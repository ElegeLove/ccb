(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a4aec7"],{"1af6":function(e,a,t){var i=t("63b6");i(i.S,"Array",{isArray:t("9003")})},"42e53":function(e,a,t){"use strict";var i=t("8465"),n=t.n(i);n.a},"75fc":function(e,a,t){"use strict";var i=t("a745"),n=t.n(i);function r(e){if(n()(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}var s=t("774e"),d=t.n(s),o=t("c8bb"),l=t.n(o);function u(e){if(l()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return d()(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){return r(e)||u(e)||c()}t.d(a,"a",function(){return p})},"774e":function(e,a,t){e.exports=t("d2d5")},8465:function(e,a,t){},a745:function(e,a,t){e.exports=t("f410")},ac6a:function(e,a,t){for(var i=t("cadf"),n=t("0d58"),r=t("2aba"),s=t("7726"),d=t("32e9"),o=t("84f2"),l=t("2b4c"),u=l("iterator"),c=l("toStringTag"),p=o.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(m),f=0;f<h.length;f++){var g,v=h[f],S=m[v],x=s[v],w=x&&x.prototype;if(w&&(w[u]||d(w,u,p),w[c]||d(w,c,v),o[v]=p,S))for(g in i)w[g]||r(w,g,i[g],!0)}},c8bb:function(e,a,t){e.exports=t("54a1")},e051:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"mxUpdataInfo"}},[t("a-breadcrumb",{attrs:{separator:" "}},[t("a-breadcrumb-item",[t("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goback}})],1),t("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("修改信息")])],1),t("a-skeleton",{attrs:{loading:e.loading,active:"",title:!1,paragraph:{rows:20}}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-row",{staticClass:"mx_main"},[t("a-col",{attrs:{span:8}},[t("div",[t("p",[e._v("学生姓名:")]),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.updataStu.name,rules:[{required:!0,message:"请填写学生姓名"}]}],expression:"[\n                                'name',\n                                {initialValue: updataStu.name,rules: [{ required: true, message: '请填写学生姓名' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写学生姓名"}})],1)],1),t("div",[t("p",[e._v("性别选择:")]),t("a-form-item",[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sex",{initialValue:e.updataStu.sex,rules:[{required:!0,message:"请选择学生性别"}]}],expression:"[\n                                'sex',\n                                {initialValue: updataStu.sex,rules: [{ required: true, message: '请选择学生性别' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择性别"},on:{change:e.sexChange}},[t("a-select-option",{attrs:{value:"0"}},[e._v("男")]),t("a-select-option",{attrs:{value:"1"}},[e._v("女")])],1)],1)],1),t("div",[t("p",[e._v("年龄:")]),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["age",{initialValue:e.updataStu.age,rules:[{required:!0,message:"请填写学生年龄"}]}],expression:"[\n                                'age',\n                                {initialValue: updataStu.age,rules: [{ required: true, message: '请填写学生年龄' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写学生年龄"}})],1)],1),t("div",[t("p",[e._v("身份证号码:")]),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardId",{initialValue:e.updataStu.cardId,rules:[{required:!0,message:"请填写身份证号码"}]}],expression:"[\n                                'cardId',\n                                {initialValue: updataStu.cardId,rules: [{ required: true, message: '请填写身份证号码' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写身份证号码"}})],1)],1),t("div",[t("p",[e._v("入校日期:")]),t("a-form-item",[t("a-date-picker",{attrs:{placeholder:"选择时间",value:e.moment(e.joinTime,"YYYY-MM-DD")},on:{change:e.mxDateChange}})],1)],1),t("div",[t("p",[e._v("就餐方式:")]),t("a-form-item",[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["diningStyle",{initialValue:e.updataStu.diningStyle,rules:[{required:!0,message:"请选择就餐方式"}]}],expression:"[\n                                'diningStyle',\n                                {initialValue: updataStu.diningStyle,rules: [{ required: true, message: '请选择就餐方式' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择就餐方式"},on:{change:e.selectChange}},e._l(e.diningStyle,function(a){return t("a-select-option",{attrs:{value:a.id}},[e._v(e._s(a.title))])}),1)],1)],1),t("div",[t("p",[e._v("监护人:")]),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentTitle",{initialValue:e.updataStu.parentTitle,rules:[{required:!0,message:"请填写监护人姓名"}]}],expression:"[\n                                'parentTitle',\n                                {initialValue: updataStu.parentTitle,rules: [{ required: true, message: '请填写监护人姓名' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写监护人姓名"}})],1)],1),t("div",[t("p",[e._v("与监护人关系:")]),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentRelation",{initialValue:e.updataStu.parentRelation,rules:[{required:!0,message:"请填写与监护人关系"}]}],expression:"[\n                                'parentRelation',\n                                {initialValue: updataStu.parentRelation,rules: [{ required: true, message: '请填写与监护人关系' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写与监护人关系"}})],1)],1),t("div",[t("p",[e._v("监护人联系电话:")]),t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentPhone",{initialValue:e.updataStu.parentPhone,rules:[{required:!0,message:"请填写与监护人关系"}]}],expression:"[\n                                'parentPhone',\n                                {initialValue: updataStu.parentPhone,rules: [{ required: true, message: '请填写与监护人关系' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写联系电话"}})],1)],1)]),t("a-col",{attrs:{span:16}},[t("div",[t("p",[e._v("人脸图片:")]),t("a-form-item",[t("div",[t("div",{staticClass:"clearfix"},[t("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?t("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["faceId",{rules:[{required:!0,message:"请录入人脸图片"}]}],expression:"[\n                                            'faceId',\n                                            {rules: [{ required: true, message: '请录入人脸图片' }]}\n                                        ]"}]},[t("a-icon",{attrs:{type:"plus"}})],1):e._e()]),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),t("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v("人脸录入\n                                    ")],1)],1)],1)])],1),e.isCertificate?t("div",{staticClass:"mx_outschool"},[t("p",[e._v("校外就餐证明:")]),t("a-form-item",[t("div",[t("div",{staticClass:"clearfix"},[t("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.sedList},on:{preview:e.handlePreviews,change:e.handleChanges}},[e.sedList.length<1?t("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["diningEnclosure",{rules:[{required:!0,message:"请上传图片"}]}],expression:"[\n                                            'diningEnclosure',\n                                            {rules: [{ required: true, message: '请上传图片' }]}\n                                        ]"}]},[t("a-icon",{attrs:{type:"plus"}})],1):e._e()]),t("a-modal",{attrs:{visible:e.previewVisibles,footer:null},on:{cancel:e.handleCancels}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImages}})])],1),t("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.sedList},on:{preview:e.handlePreviews,change:e.handleChanges}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v("上传图片\n                                    ")],1)],1)],1)])],1):e._e()])],1),t("a-form-item",[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("更新保存")])],1)],1)],1)],1)},n=[],r=t("75fc"),s=(t("7f7f"),t("ac6a"),t("c1df")),d=t.n(s),o={data:function(){return{loading:!0,moment:d.a,previewVisible:!1,previewImage:"",updataStu:{age:"",cardId:"",diningStyle:"",name:"",parentPhone:"",parentRelation:"",parentTitle:"",sex:""},fileList:[],previewVisibles:!1,previewImages:"",sedList:[],form:this.$form.createForm(this),uploading:!1,diningStyle:[{id:90,title:"校内三餐"},{id:91,title:"校内午晚餐"},{id:92,title:"校内早餐"},{id:93,title:"校内午餐"},{id:94,title:"校内晚餐"},{id:95,title:"校外就餐"}],isCertificate:!1,joinTime:"",sex:0,faceId:"",diningEnclosure:"",dateString:""}},created:function(){var e=this;this.$get("api/school/students/"+this.$route.query.id).then(function(a){if(0==a.data.code){0==a.data.data.sex?a.data.data.sex="男":1==a.data.data.sex&&(a.data.data.sex="女"),95==a.data.data.dining_style?e.isCertificate=!0:e.isCertificate=!1,e.updataStu.age=a.data.data.age,e.updataStu.cardId=a.data.data.card_id,e.updataStu.diningStyle=a.data.data.dining_style,e.updataStu.name=a.data.data.title,e.updataStu.parentPhone=a.data.data.parent_phone,e.updataStu.parentRelation=a.data.data.parent_relation,e.updataStu.parentTitle=a.data.data.parent_title,e.updataStu.sex=a.data.data.sex;var t=[],i={uid:a.data.data.face_id,name:"xxx.png",response:{data:{id:parseInt(a.data.data.face_id),url:a.data.data.face_id_photo}},status:"done",url:a.data.data.face_id_photo};t.push(i),e.fileList=t;var n=[],r={uid:a.data.data.dining_enclosure,name:"xxx.png",response:{data:{id:parseInt(a.data.data.dining_enclosure),url:a.data.data.dining_enclosure_photo}},status:"done",url:a.data.data.dining_enclosure_photo};n.push(r),e.sedList=n,e.joinTime=a.data.data.join_time_str,e.loading=!1}else e.$message.warning(a.data.msg)})},mounted:function(){var e=this;this.$get("api/school/dining",{}).then(function(a){0==a.data.code?e.diningStyle=a.data.data:e.$message.warning(a.data.msg)})},methods:{goback:function(){this.$router.go(-1)},sexChange:function(e){this.sex=e},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields(function(e,t){if(!e){"男"==t.sex?a.sex=0:"女"==t.sex&&(a.sex=1);var i=[];a.fileList.forEach(function(e){i.push(e.response.data.id)});var n=[];a.sedList.forEach(function(e){n.push(e.response.data.id)});var r={url:"api/school/students/"+a.$route.query.id,method:"put",data:{title:t.name,sex:a.sex,age:t.age,card_id:t.cardId,dining_style:t.diningStyle,dining_enclosure:n.join(","),parent_title:t.parentTitle,parent_relation:t.parentRelation,parent_phone:t.parentPhone,face_id:i.join(","),join_time:a.joinTime}};a.$apiAxiox(r).then(function(e){0==e.data.code?(a.$router.go(-1),a.$message.success("修改学生信息成功")):a.$message.warning(e.data.msg)})}})},selectChange:function(e){this.isCertificate=95==e},mxDateChange:function(e,a){this.joinTime=a},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var a=this,t=Object(r["a"])(e.fileList);t=t.slice(-1),t=t.map(function(e){return e.response&&(e.url=e.response.data.url,a.faceId=e.response.data.id),e}),this.fileList=t},handleCancels:function(){this.previewVisibles=!1},handlePreviews:function(e){this.previewImages=e.url||e.thumbUrl,this.previewVisibles=!0},handleChanges:function(e){var a=this,t=Object(r["a"])(e.fileList);t=t.slice(-1),t=t.map(function(e){return e.response&&(e.url=e.response.data.url,a.diningEnclosure=e.response.data.id),e}),this.sedList=t}}},l=o,u=(t("42e53"),t("2877")),c=Object(u["a"])(l,i,n,!1,null,"2f9733cd",null);a["default"]=c.exports},f410:function(e,a,t){t("1af6"),e.exports=t("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-78a4aec7.47630853.js.map