(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55c7a3fc"],{"02f4":function(t,i,a){var e=a("4588"),s=a("be13");t.exports=function(t){return function(i,a){var n,c,o=String(s(i)),r=e(a),l=o.length;return r<0||r>=l?t?"":void 0:(n=o.charCodeAt(r),n<55296||n>56319||r+1===l||(c=o.charCodeAt(r+1))<56320||c>57343?t?o.charAt(r):n:t?o.slice(r,r+2):c-56320+(n-55296<<10)+65536)}}},"0390":function(t,i,a){"use strict";var e=a("02f4")(!0);t.exports=function(t,i,a){return i+(a?e(t,i).length:1)}},"08ad":function(t,i,a){"use strict";var e=a("0f86"),s=a.n(e);s.a},"0bfb":function(t,i,a){"use strict";var e=a("cb7c");t.exports=function(){var t=e(this),i="";return t.global&&(i+="g"),t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),t.sticky&&(i+="y"),i}},"0f86":function(t,i,a){},"214f":function(t,i,a){"use strict";a("b0c5");var e=a("2aba"),s=a("32e9"),n=a("79e5"),c=a("be13"),o=a("2b4c"),r=a("520a"),l=o("species"),p=!n(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,i=t.exec;t.exec=function(){return i.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,i,a){var h=o(t),u=!n(function(){var i={};return i[h]=function(){return 7},7!=""[t](i)}),m=u?!n(function(){var i=!1,a=/a/;return a.exec=function(){return i=!0,null},"split"===t&&(a.constructor={},a.constructor[l]=function(){return a}),a[h](""),!i}):void 0;if(!u||!m||"replace"===t&&!p||"split"===t&&!d){var g=/./[h],f=a(c,h,""[t],function(t,i,a,e,s){return i.exec===r?u&&!s?{done:!0,value:g.call(i,a,e)}:{done:!0,value:t.call(a,i,e)}:{done:!1}}),v=f[0],y=f[1];e(String.prototype,t,v),s(RegExp.prototype,h,2==i?function(t,i){return y.call(t,this,i)}:function(t){return y.call(t,this)})}}},"227f":function(t,i,a){},"520a":function(t,i,a){"use strict";var e=a("0bfb"),s=RegExp.prototype.exec,n=String.prototype.replace,c=s,o="lastIndex",r=function(){var t=/a/,i=/b*/g;return s.call(t,"a"),s.call(i,"a"),0!==t[o]||0!==i[o]}(),l=void 0!==/()??/.exec("")[1],p=r||l;p&&(c=function(t){var i,a,c,p,d=this;return l&&(a=new RegExp("^"+d.source+"$(?!\\s)",e.call(d))),r&&(i=d[o]),c=s.call(d,t),r&&c&&(d[o]=d.global?c.index+c[0].length:i),l&&c&&c.length>1&&n.call(c[0],a,function(){for(p=1;p<arguments.length-2;p++)void 0===arguments[p]&&(c[p]=void 0)}),c}),t.exports=c},"5f1b":function(t,i,a){"use strict";var e=a("23c6"),s=RegExp.prototype.exec;t.exports=function(t,i){var a=t.exec;if("function"===typeof a){var n=a.call(t,i);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==e(t))throw new TypeError("RegExp#exec called on incompatible receiver");return s.call(t,i)}},a481:function(t,i,a){"use strict";var e=a("cb7c"),s=a("4bf8"),n=a("9def"),c=a("4588"),o=a("0390"),r=a("5f1b"),l=Math.max,p=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,u=/\$([$&`']|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,i,a,g){return[function(e,s){var n=t(this),c=void 0==e?void 0:e[i];return void 0!==c?c.call(e,n,s):a.call(String(n),e,s)},function(t,i){var s=g(a,t,this,i);if(s.done)return s.value;var d=e(t),h=String(this),u="function"===typeof i;u||(i=String(i));var v=d.global;if(v){var y=d.unicode;d.lastIndex=0}var x=[];while(1){var _=r(d,h);if(null===_)break;if(x.push(_),!v)break;var S=String(_[0]);""===S&&(d.lastIndex=o(h,n(d.lastIndex),y))}for(var b="",w=0,C=0;C<x.length;C++){_=x[C];for(var k=String(_[0]),L=l(p(c(_.index),h.length),0),D=[],M=1;M<_.length;M++)D.push(m(_[M]));var T=_.groups;if(u){var F=[k].concat(D,L,h);void 0!==T&&F.push(T);var N=String(i.apply(void 0,F))}else N=f(k,h,L,D,T,i);L>=w&&(b+=h.slice(w,L)+N,w=L+k.length)}return b+h.slice(w)}];function f(t,i,e,n,c,o){var r=e+t.length,l=n.length,p=u;return void 0!==c&&(c=s(c),p=h),a.call(o,p,function(a,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,e);case"'":return i.slice(r);case"<":o=c[s.slice(1,-1)];break;default:var p=+s;if(0===p)return a;if(p>l){var h=d(p/10);return 0===h?a:h<=l?void 0===n[h-1]?s.charAt(1):n[h-1]+s.charAt(1):a}o=n[p-1]}return void 0===o?"":o})}})},ac6a:function(t,i,a){for(var e=a("cadf"),s=a("0d58"),n=a("2aba"),c=a("7726"),o=a("32e9"),r=a("84f2"),l=a("2b4c"),p=l("iterator"),d=l("toStringTag"),h=r.Array,u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=s(u),g=0;g<m.length;g++){var f,v=m[g],y=u[v],x=c[v],_=x&&x.prototype;if(_&&(_[p]||o(_,p,h),_[d]||o(_,d,v),r[v]=h,y))for(f in e)_[f]||n(_,f,e[f],!0)}},b0c5:function(t,i,a){"use strict";var e=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},bba2:function(t,i,a){"use strict";var e=a("227f"),s=a.n(e);s.a},c899:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"mx_procure"}},[e("a-tabs",{attrs:{activeKey:t.pKey},on:{change:t.keyChange}},[e("a-tab-pane",{key:"1",attrs:{tab:"按计划采购"}},[t.sShow?e("div",{staticClass:"wrap"},[e("div",{staticClass:"back",on:{click:function(i){return t.dBack()}}},[e("a-icon",{staticStyle:{"font-size":"25px","font-weight":"bold","margin-right":"10px"},attrs:{type:"arrow-left"}}),e("p",[t._v("查看详情")])],1),t._l(t.odList.odList,function(i,a){return e("div",{staticClass:"sList"},[e("div",{staticClass:"wrap"},[e("h4",{staticStyle:{"margin-left":"20px","margin-top":"15px"}},[t._v(t._s(i.name))]),t._l(i.dList,function(i,a){return e("div",{staticStyle:{"margin-top":"20px"}},[e("div",{staticClass:"iBox"},[e("div",{staticClass:"iL"},[e("img",{staticStyle:{width:"90px",height:"90px","margin-left":"45px","margin-right":"30px"},attrs:{src:i.url,alt:""}}),e("p",{staticStyle:{"margin-right":"85px"}},[t._v(t._s(i.food))]),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(i.uPrice))])]),e("div",{staticClass:"iR"},t._l(i.time,function(i,a){return e("div",{staticStyle:{display:"flex",margin:"5px 0"}},[e("p",{staticStyle:{"margin-right":"70px"}},[t._v(t._s(i.time))]),e("p",{staticStyle:{"margin-right":"65px"}},[t._v(t._s(i.unit))]),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(i.meony))])])}),0)]),e("div",{staticClass:"ibBox"},[e("p",{staticStyle:{"margin-right":"36px"}},[t._v("总计："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(i.all))])]),e("p",[t._v("总价："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(i.aMeony))])])]),e("span",{staticClass:"line"})])})],2),e("div",{staticClass:"txt"},[e("p",{staticStyle:{"margin-left":"25px","margin-right":"70px"}},[t._v("共计："),e("span",{staticStyle:{color:"#ff6600"}},[t._v(t._s(i.allMy))])])])])}),e("div",{staticClass:"bBtn"},[e("p",{staticStyle:{"margin-right":"30px"}},[e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(t.odList.num))]),t._v("件商品")]),e("p",{staticStyle:{display:"flex","align-items":"center","margin-right":"45px"}},[t._v("共计："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold","font-size":"20px"}},[t._v(t._s(t.odList.aMy))])]),e("a-button",{attrs:{type:"primary"},on:{click:t.upOdr}},[t._v("提交订单")])],1)],2):e("div",{staticClass:"wrap"},[e("div",{staticClass:"ctList",staticStyle:{display:"flex","margin-top":"20px"}},[e("p",[t._v("食堂：")]),e("a-radio-group",{staticStyle:{width:"95%"},on:{change:t.rChange1},model:{value:t.rVal1,callback:function(i){t.rVal1=i},expression:"rVal1"}},t._l(t.ctData,function(i){return e("a-radio",{attrs:{value:i.id}},[t._v(t._s(i.title))])}),1)],1),e("div",{staticClass:"listCode"},[e("div",{staticClass:"l"},[e("p",[t._v("单号："+t._s(t.codeL.code))]),e("p",[t._v("种类："+t._s(t.codeL.type))]),e("p",[t._v("申请时间："+t._s(t.codeL.time))])]),e("div",{staticClass:"r"},t._l(t.btnL,function(i,a){return e("div",{class:{bc:1==a,bl:0==a,br:2==a,nC:1==t.num},on:{click:function(i){return t.getData(a)}}},[a<1?e("a-icon",{attrs:{type:"left"}}):t._e(),t._v("\n                            "+t._s(i)+"\n                            "),a>1?e("a-icon",{attrs:{type:"right"}}):t._e()],1)}),0)]),t.codeL.orderList.length>0?e("a-row",[e("a-col",{attrs:{span:24}},[e("div",{staticClass:"bigList"},t._l(t.codeL.orderList,function(i,a){return e("div",{staticClass:"smlList",class:{on:-1==i.isClick}},[e("div",{staticClass:"sT"},[e("h3",{staticStyle:{"text-indent":"20px"}},[t._v(t._s(i.index))])]),e("div",{staticClass:"sC"},[e("div",{staticClass:"cL"},[e("img",{attrs:{src:i.url,alt:""}}),e("p",[t._v(t._s(i.name))]),e("p",[t._v(t._s(i.unit))]),e("p",[t._v(t._s(i.num))])]),e("div",{staticClass:"cR"},t._l(i.time,function(i,a){return e("div",{staticClass:"wrap"},[e("p",[t._v(t._s(i.time))]),e("p",[t._v(t._s(i.num))]),i.eTimeList.length>0?e("div",{staticClass:"selBox"},[e("p",{staticStyle:{"margin-right":"16px"}},[t._v("送达时间")]),e("a-select",{staticStyle:{width:"200px"},attrs:{value:i.eTime},on:{change:function(a){return t.plChange(a,i)}}},t._l(i.eTimeList,function(i,a){return e("a-select-option",{key:a+1},[t._v(t._s(i))])}),1)],1):e("div",{staticClass:"selBox",staticStyle:{color:"#ff6600"}},[t._v("\n                                                已超过使用日期，无法采购\n                                            ")])])}),0)]),e("div",{staticClass:"sB"},[t._l(i.Merchant,function(a,s){return i.Merchant.length>0?e("p",{directives:[{name:"show",rawName:"v-show",value:1==i.isCK,expression:"item.isCK == true"}],staticStyle:{position:"relative"},on:{click:function(a){return t.mChange(s,i)}}},[t._v("\n                                        "+t._s(a.supplier_title)+"\n                                        "),e("span",{staticStyle:{color:"#ff6600"}},[t._v("\n                                        "+t._s(a.price))]),t._v("\n                                        "+t._s(a.unit)+"\n                                        "),a.shop_num>0?e("a-icon",{staticStyle:{position:"absolute",top:"0",left:"0","font-size":"20px"},attrs:{type:"insurance",theme:"twoTone",twoToneColor:"#52c41a"}}):t._e(),s==i.isClick?e("a-icon",{staticStyle:{position:"absolute",top:"0",left:"0"},attrs:{type:"insurance",theme:"twoTone",twoToneColor:"#ff6600"}}):t._e()],1):t._e()}),e("p",{directives:[{name:"show",rawName:"v-show",value:0==i.isCK,expression:"item.isCK == false"}],staticStyle:{width:"100%",height:"100%","text-align":"center","line-height":"2",border:"none","margin-bottom":"0"}},[t._v("该食材已超过使用日期，无法采购")]),i.Merchant.length<=0?e("p",{directives:[{name:"show",rawName:"v-show",value:1==i.isCK,expression:"item.isCK == true"}],staticStyle:{width:"100%",height:"100%","text-align":"center","line-height":"2",border:"none","margin-bottom":"0"}},[t._v("当前无供应商售卖该食材")]):t._e()],2)])}),0),e("div",{staticClass:"btn"},[e("p",[t._v("共计："),e("span",{staticStyle:{color:"#ff6600","margin-right":"30px","font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.codeL.moeny))])]),e("a-button",{attrs:{type:"primary"},on:{click:t.next}},[t._v("下一步")])],1)])],1):e("div",{staticClass:"nBox",staticStyle:{width:"100%",height:"580px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[e("a-icon",{staticStyle:{"font-size":"70px","margin-bottom":"30px"},attrs:{type:"frown",theme:"twoTone",twoToneColor:"#02bb72"}}),t._v("\n                    当前食堂暂无采购计划\n                ")],1)],1)]),e("a-tab-pane",{key:"2",attrs:{tab:"自选采购",forceRender:""}},[t.gtShow?e("div",[e("div",{staticClass:"ctList",staticStyle:{display:"flex","margin-top":"20px"}},[e("p",[t._v("食堂：")]),e("a-radio-group",{staticStyle:{width:"94%"},on:{change:t.rChange2},model:{value:t.rVal2,callback:function(i){t.rVal2=i},expression:"rVal2"}},t._l(t.ctData,function(i){return e("a-radio",{attrs:{value:i.id}},[t._v(t._s(i.title))])}),1)],1),e("div",{staticClass:"gdList"},t._l(t.gDList,function(i,a){return e("div",{staticStyle:{display:"flex"},on:{click:function(a){return t.gtSp(t.spNum,i.id)}}},[e("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:i.icon,alt:""}}),e("p",[t._v(t._s(i.name)+" ")])])}),0),e("a-form",{attrs:{form:t.form}},[e("div",{staticClass:"tabBox"},[e("p",[t._v("商品：")]),e("a-form-item",{staticStyle:{width:"200px"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"商品/食材名称"}]}],expression:"[\n                                              'code',\n                                              {rules: [{ required: true, message: '商品/食材名称'}]}\n                                        ]"}],attrs:{placeholder:"请输入商品/食材名称"}})],1),e("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(i){return t.getPlist()}}},[t._v("搜索")])],1)]),e("div",{staticClass:"type"},t._l(t.tpList.list,function(i,a){return e("p",{class:{on:t.tpList.val==a},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.getSp(t.tpList,a,i.id)}}},[t._v(t._s(i.title))])}),0),t.cmCode.length<=0?e("div",{staticClass:"none"},[e("img",{staticStyle:{width:"160px",height:"160px"},attrs:{src:a("ceca"),alt:""}}),e("p",[t._v(t._s(t.tips))])]):t._e(),e("div",{staticClass:"mCList"},[t._l(t.cmCode,function(i,a){return e("div",{staticClass:"mcBox",staticStyle:{"margin-bottom":"20px"},on:{click:function(e){return t.lookDt(a,i)}}},[e("div",{staticClass:"mcT"},[e("img",{attrs:{src:i.url,alt:""}})]),e("div",{staticClass:"mcB",staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-around"}},[e("p",{staticStyle:{"margin-bottom":"0","text-indent":"10px"}},[e("span",{staticStyle:{color:"#ff6600","font-size":"16px"}},[t._v(t._s(i.moeny))]),t._v(t._s(i.unit))]),e("div",{staticClass:"txt",staticStyle:{display:"flex"}},[e("p",{staticStyle:{"margin-bottom":"0","text-indent":"10px"}},[t._v(t._s(i.fName))]),e("p",{staticStyle:{"margin-left":"5px","margin-bottom":"0","text-indent":"10px",width:"90px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(i.txt))])]),e("p",{staticStyle:{"margin-bottom":"0","text-indent":"10px"}},[t._v(t._s(i.sName))])])])}),e("div",{staticStyle:{width:"100%"}},[e("a-pagination",{staticStyle:{float:"right"},attrs:{defaultPageSize:15,total:t.mTotal}})],1)],2)],1):t._e(),t.dtShow?t._e():e("div",[e("div",{staticClass:"back",on:{click:function(i){return t.sdBack()}}},[e("a-icon",{staticStyle:{"font-size":"25px","font-weight":"bold","margin-right":"10px"},attrs:{type:"arrow-left"}}),e("p",[t._v("商品详情")])],1),e("div",{staticClass:"sdBox",staticStyle:{"margin-top":"40px"}},[e("div",{staticClass:"sdT"},[e("div",{staticClass:"Top",staticStyle:{display:"flex"}},[e("div",{staticClass:"Tl"},[""!=t.dtData.pic?e("img",{staticStyle:{width:"240px",height:"240px"},attrs:{src:t.dtData.pic,alt:""}}):e("img",{staticStyle:{width:"240px",height:"240px"},attrs:{src:a("ceca"),alt:""}})]),e("div",{staticClass:"Tr",staticStyle:{width:"70%","margin-left":"65px"}},[e("div",{staticClass:"trT",staticStyle:{width:"100%"}},[e("div",[e("div",{staticClass:"top",staticStyle:{display:"flex","flex-direction":"column",width:"100%"}},[e("div",{staticClass:"Tt",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e("h2",{staticStyle:{"margin-bottom":"0",color:"#000"}},[t._v(t._s(t.dtData.dTxt))]),e("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.dtData.name))])]),e("div",{staticClass:"Tb",staticStyle:{"margin-top":"5px",display:"flex","align-items":"center",height:"60px",background:"#f8f8f8"}},[e("p",{staticStyle:{"margin-bottom":"0","margin-left":"30px"}},[t._v("商品售价")]),e("p",{staticStyle:{"margin-bottom":"0","margin-left":"30px"}},[e("span",{staticStyle:{color:"#ff6600","font-size":"20px"}},[t._v(t._s(t.dtData.moeny))]),t._v("/斤")])])]),e("div",{staticClass:"btm",staticStyle:{display:"flex","margin-top":"12px"}},[e("p",{staticStyle:{"margin-bottom":"0","margin-left":"30px",height:"30px","line-height":"30px","margin-right":"30px"}},[t._v("送达信息")]),t.hackReset?e("div",{staticStyle:{display:"flex","flex-wrap":"wrap",width:"320px","justify-content":"center"}},[t._l(t.tnData,function(i,a){return e("div",{class:{ml:a>0},staticStyle:{width:"380px","margin-bottom":"20px",display:"flex","align-items":"center"}},[e("div",{staticClass:"wrap",staticStyle:{display:"flex","flex-direction":"column"}},[e("div",{staticStyle:{display:"flex"}},[e("a-select",{staticStyle:{"margin-right":"20px",width:"180px"},attrs:{placeholder:"选择送达时间",value:t.tnData[a].key,defaultValue:t.tnData[a].key},on:{change:function(e){return t.sChange(e,i,a)}}},t._l(i.opList,function(i){return e("a-select-option",{key:i.key},[t._v("\n                                                                    "+t._s(i.val)+"\n                                                                ")])}),1),e("a-input",{staticStyle:{width:"120px"},attrs:{value:i.num,addonAfter:"斤",placeholder:"填写数量"},on:{change:function(e){return t.iChange(e,i,a)}}})],1),i.iState?e("p",{staticStyle:{color:"red","margin-bottom":"0"}},[t._v("请填写完整信息")]):t._e()]),a>0?e("a-icon",{class:i.iState?"mt5":"",staticStyle:{"font-size":"24px",cursor:"pointer","margin-left":"10px"},attrs:{type:"close"},on:{click:function(i){return t.remove(a,t.tnData)}}}):t._e()],1)}),e("a-button",{staticStyle:{margin:"30px auto"},attrs:{size:"small"},on:{click:function(i){return t.addDT(t.dtData.tnData)}}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加新批次\n                                                ")],1)],2):t._e()])])])])]),e("div",{staticClass:"Btm",staticStyle:{display:"flex","justify-content":"center"}},[e("a-button",{staticStyle:{"margin-right":"30px"},on:{click:function(i){return t.notNull("buy")}}},[t._v("立即购买")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.notNull("join")}}},[t._v("加入购物车")])],1)])]),e("div",{staticClass:"imgBox",staticStyle:{"margin-top":"40px",display:"flex"}},[e("div",{staticClass:"IL",staticStyle:{display:"flex","flex-direction":"column","align-items":"center",width:"180px",height:"235px",border:"1px solid #d9d9d9"}},[e("h3",{staticStyle:{width:"100%","text-indent":"10px",color:"#000"}},[t._v(t._s(t.dtData.name))]),""!=t.dtData.logo?e("img",{staticStyle:{width:"95px",height:"95px"},attrs:{src:t.dtData.logo,alt:""}}):e("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:a("ceca"),alt:""}}),e("div",{staticStyle:{position:"relative","margin-top":"15px","margin-bottom":"20px"}},[e("a-rate",{attrs:{value:t.dtData.stNum,allowHalf:""}}),e("div",{staticStyle:{width:"140px",height:"100%",position:"absolute",top:"0",left:"0"}})],1),e("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.gtSp(t.spNum,t.dtData.id)}}},[t._v("进入店铺")])],1),e("div",{staticClass:"IR",staticStyle:{width:"80%","margin-left":"20px"}},[e("div",{staticClass:"title",staticStyle:{height:"40px",background:"#f8f8f8",display:"flex","align-items":"center"}},[e("p",{staticStyle:{"margin-bottom":"0","margin-left":"30px"}},[t._v("商品介绍")])]),e("div",{staticClass:"TD",staticStyle:{display:"flex","margin-left":"30px","margin-top":"20px"}},[e("div",{staticClass:"tdL",staticStyle:{width:"33%"}},[e("p",[t._v("品牌名称："+t._s(t.dtData.pName))]),e("p",[t._v("生产厂家："+t._s(t.dtData.produce))]),e("p",[t._v("产地："+t._s(t.dtData.ads))])]),e("div",{staticClass:"tdC",staticStyle:{width:"33%"}},[e("p",[t._v("生产日期："+t._s(t.dtData.sTime))]),e("p",[t._v("保质期："+t._s(t.dtData.day))]),e("p",[t._v("贮存方式："+t._s(t.dtData.dep))])]),e("div",{staticClass:"tdR",staticStyle:{width:"33%"}},[e("p",[t._v("包装方式："+t._s(t.dtData.pack))]),e("p",[t._v("净含量："+t._s(t.dtData.nCnt))])])]),e("div",{staticClass:"iBox",staticStyle:{"margin-top":"60px"}},t._l(t.dtData.imgList,function(t){return e("img",{staticStyle:{width:"100%",height:"480px"},attrs:{src:t,alt:""}})}),0)])])]),t.scShow?e("div",[e("div",{staticStyle:{height:"125px",background:"#f9f9f9",display:"flex","align-items":"center"}},[e("a-icon",{staticStyle:{"font-size":"60px",margin:"0px 25px 0 50px"},attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}}),e("p",{staticStyle:{"margin-bottom":"0",color:"#000","font-size":"22px"}},[t._v("加入“"+t._s(t.ctData[t.rvIndex].title)+"”购物车成功")])],1),e("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"20px"}},[e("div",{staticClass:"scL"},[e("img",{staticStyle:{width:"75px",height:"75px","margin-left":"50px","margin-right":"35px"},attrs:{src:"http://img5.imgtn.bdimg.com/it/u=3029025827,2440807936&fm=26&gp=0.jpg",alt:""}})]),e("div",{staticClass:"scR"},[e("p",{staticStyle:{color:"#000","font-size":"16px","margin-bottom":"10px"}},[t._v(t._s(t.cartMy.txt))]),e("div",{staticClass:"scrB",staticStyle:{display:"flex","align-items":"center"}},[e("p",{staticStyle:{"margin-bottom":"0",color:"#ccc","margin-right":"25px"}},[t._v("数量："+t._s(t.cartMy.num)+"斤")]),e("p",{staticStyle:{"margin-bottom":"0",color:"#ccc"}},[t._v("总价：￥"+t._s(t.cartMy.My*t.cartMy.num))])])])]),e("span",{staticStyle:{width:"95%",height:"2px",background:"#f8f8f8",display:"block",margin:"25px auto 0"}}),e("div",{staticStyle:{"margin-top":"90px"}},[e("a-button",{staticStyle:{"margin-left":"50px","margin-right":"15px"},on:{click:function(i){return t.ctue("c")}}},[t._v("继续选购")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.ctue("s")}}},[t._v("\n                        去购物车结算\n                        "),e("a-icon",{attrs:{type:"right"}})],1)],1)]):t._e(),t.pdShow?e("div",[e("div",{staticClass:"back",on:{click:function(i){return t.pdBack(t.spNum)}}},[e("a-icon",{staticStyle:{"font-size":"25px","font-weight":"bold","margin-right":"10px"},attrs:{type:"arrow-left"}}),e("p",[t._v("店铺详情")])],1),e("div",{staticStyle:{display:"flex","margin-top":"35px"}},[e("div",{staticClass:"img"},[e("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:this.spData.url,alt:""}})]),e("div",{staticClass:"rote",staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","margin-left":"30px"}},[e("div",{staticClass:"reT",staticStyle:{display:"flex"}},[e("p",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(this.spData.title))]),e("img",{staticStyle:{width:"15px",height:"15px"},attrs:{src:this.spData.icon,alt:""}})]),e("p",{staticStyle:{"margin-bottom":"0"}},[t._v("经营类目："+t._s(this.spData.style))]),e("div",{staticStyle:{position:"relative"}},[e("a-rate",{attrs:{value:t.dtData.stNum,allowHalf:""}}),e("div",{staticStyle:{width:"140px",height:"100%",position:"absolute",top:"0",left:"0"}})],1)])]),e("a-form",{attrs:{form:t.form}},[e("div",{staticClass:"tabBox"},[e("p",[t._v("商品：")]),e("a-form-item",{staticStyle:{width:"200px"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code1",{rules:[{required:!0,message:"商品/食材名称"}]}],expression:"[\n                                              'code1',\n                                              {rules: [{ required: true, message: '商品/食材名称'}]}\n                                        ]"}],attrs:{placeholder:"请输入商品/食材名称"}})],1),e("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(i){return t.getPlist2()}}},[t._v("搜索")])],1)]),e("div",{staticClass:"type"},t._l(t.tpList.list,function(i,a){return e("p",{class:{on:t.tpList.val==a},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.getSp(t.tpList,a,i.id)}}},[t._v(t._s(i.title))])}),0),t.cmCode.length<=0?e("div",{staticClass:"none"},[e("img",{staticStyle:{width:"160px",height:"160px"},attrs:{src:a("ceca"),alt:""}}),e("p",[t._v(t._s(t.tips))])]):t._e(),e("div",{staticClass:"mCList"},t._l(t.cmCode,function(i,a){return e("div",{staticClass:"mcBox",on:{click:function(i){return t.lookDt(a)}}},[e("div",{staticClass:"mcT"},[e("img",{attrs:{src:i.url,alt:""}})]),e("div",{staticClass:"mcB",staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-around"}},[e("p",{staticStyle:{"margin-bottom":"0","text-indent":"10px"}},[e("span",{staticStyle:{color:"#ff6600","font-size":"16px"}},[t._v(t._s(i.moeny))]),t._v(t._s(i.unit))]),e("div",{staticClass:"txt",staticStyle:{display:"flex"}},[e("p",{staticStyle:{"margin-bottom":"0","text-indent":"10px"}},[t._v(t._s(i.fName))]),e("p",{staticStyle:{"margin-left":"5px","margin-bottom":"0","text-indent":"10px",width:"90px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(i.txt))])]),e("p",{staticStyle:{"margin-bottom":"0","text-indent":"10px"}},[t._v(t._s(i.sName))])])])}),0)],1):t._e()]),e("a-tab-pane",{key:"3",attrs:{tab:"购物车",forceRender:""}},[t.sCart?e("div",[e("div",{staticClass:"ctList",staticStyle:{display:"flex","margin-top":"20px","margin-left":"15px"}},[e("p",[t._v("食堂：")]),e("a-radio-group",{staticStyle:{width:"95%"},on:{change:t.rChange3},model:{value:t.rVal3,callback:function(i){t.rVal3=i},expression:"rVal3"}},t._l(t.ctData,function(i){return e("a-radio",{attrs:{value:i.id}},[t._v(t._s(i.title))])}),1)],1),t.spcData.length>0?e("div",[e("div",{staticClass:"ckTop",staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},[e("a-checkbox",{staticStyle:{"margin-left":"15px"},attrs:{checked:t.isCk},on:{change:t.ckChange}},[t._v("全部商品")]),e("a-button",{attrs:{type:"primary"},on:{click:t.removeAll}},[t._v("移除选中")])],1),t._l(t.spcData,function(i,a){return i.sList.length>0?e("div",{staticStyle:{border:"1px solid #d9d9d9","border-radius":"5px","margin-top":"30px"}},[e("div",{staticClass:"up",staticStyle:{"margin-top":"20px"}},[e("a-checkbox",{staticStyle:{"margin-left":"15px"},attrs:{checked:i.isCk},on:{change:function(a){return t.ckchange1(a,i.isCk,i)}}},[t._v(t._s(i.name))])],1),t._l(i.sList,function(s,n){return e("div",{staticClass:"cnt",staticStyle:{display:"flex","align-items":"center","margin-top":"45px","justify-content":"center","margin-bottom":"20px","flex-direction":"column"}},[e("a-row",{staticStyle:{width:"100%",display:"flex","align-items":"center","margin-bottom":"30px"}},[e("a-col",{attrs:{span:2}},[e("a-checkbox",{staticStyle:{"margin-left":"15px"},attrs:{checked:s.isCk},on:{change:function(a){return t.ckchange2(a,s,i)}}})],1),e("a-col",{attrs:{span:3}},[e("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:s.url,alt:""}})]),e("a-col",{attrs:{span:4}},[e("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(s.txt))])]),e("a-col",{attrs:{span:3}},[e("p",{staticStyle:{"margin-bottom":"0"}},[t._v("￥"+t._s(s.moeny)+"/"+t._s(s.unit))])]),e("a-col",{attrs:{span:10}},[e("div",[t._l(s.tData,function(a,n){return e("div",{staticClass:"ctList",staticStyle:{width:"430px",display:"flex","margin-bottom":"15px"}},[e("a-select",{staticStyle:{width:"160px"},attrs:{value:a.key},on:{change:function(i){return t.sIchange(i,a,s.id,s)}}},t._l(a.tList,function(i){return e("a-select-option",{key:i.key},[t._v("\n                                                    "+t._s(i.val)+"\n                                                ")])}),1),e("a-input",{class:{rCol:-1==a.num},staticStyle:{width:"120px","margin-left":"30px"},attrs:{addonAfter:"斤",value:a.num},on:{change:function(a){return t.addW(a,s.tData[n],i,s.moeny,s)}}}),e("p",{staticStyle:{"margin-bottom":"0","line-height":"32px","margin-left":"20px","font-weight":"bold"}},[t._v("￥"+t._s(a.My))]),n>=1?e("a-icon",{staticStyle:{"font-size":"24px","margin-left":"5px","margin-top":"3px",cursor:"pointer"},attrs:{type:"close"},on:{click:function(i){return t.removeW(s.tData,n,s)}}}):t._e()],1)}),e("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.addNew(s.tData)}}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加新批次")],1),e("div",{staticClass:"btm",staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end",width:"355px"}},[e("p",{staticStyle:{"margin-right":"32px","margin-bottom":"0"}},[t._v("总计："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(s.allS))])]),e("p",{staticStyle:{"margin-bottom":"0"}},[t._v("总价："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v("￥"+t._s(s.allM))])])])],2)]),e("a-col",{attrs:{span:2}},[e("p",{staticStyle:{"margin-bottom":"0",color:"#02bb72",cursor:"pointer"},on:{click:function(i){return t.removeL(n,a,s)}}},[t._v("移除")])])],1),e("span",{staticStyle:{width:"96%",height:"1px",background:"#d9d9d9"}})],1)})],2):t._e()}),e("div",{staticClass:"ckTop",staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between",margin:"20px 0"}},[e("a-checkbox",{staticStyle:{"margin-left":"15px"},on:{change:t.ckChange}},[t._v("全部商品")]),e("p",{staticStyle:{"margin-bottom":"0",cursor:"pointer"},on:{click:t.removeAll}},[t._v("移除选中")]),e("p",{staticStyle:{"margin-bottom":"0"}},[t._v("已选择"),e("span",[t._v(t._s(t.munMy.num))]),t._v("件商品")]),e("p",{staticStyle:{"margin-bottom":"0"}},[t._v("总价："),e("span",[t._v("￥"+t._s(t.munMy.My))])]),e("a-button",{attrs:{type:"primary"},on:{click:t.getMy}},[t._v("去结算")])],1)],2):e("div",{staticStyle:{height:"600px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[e("img",{staticStyle:{width:"170px",height:"170px"},attrs:{src:a("ceca"),alt:""}}),e("p",[t._v("暂未添加商品")])])]):e("div",[t.succ?e("div",[e("div",{staticClass:"back",on:{click:function(i){return t.scBack()}}},[e("a-icon",{staticStyle:{"font-size":"25px","font-weight":"bold","margin-right":"10px"},attrs:{type:"arrow-left"}}),e("p",[t._v("查看详情")])],1),t._l(t.spcData,function(i,a){return i.isSck?e("div",{staticClass:"sList"},[e("div",{staticClass:"wrap"},[e("h4",{staticStyle:{"margin-left":"20px","margin-top":"15px"}},[t._v(t._s(i.name))]),t._l(i.sList,function(i,a){return i.isCk?e("div",{staticStyle:{"margin-top":"20px"}},[e("div",{staticClass:"iBox"},[e("div",{staticClass:"iL"},[e("img",{staticStyle:{width:"90px",height:"90px","margin-left":"45px","margin-right":"30px"},attrs:{src:i.url,alt:""}}),e("p",{staticStyle:{"margin-right":"85px"}},[t._v(t._s(i.txt))]),e("p",{staticStyle:{"font-weight":"bold"}},[t._v("￥"+t._s(i.moeny)+"/"+t._s(i.unit))])]),e("div",{staticClass:"iR"},t._l(i.tData,function(a,s){return e("div",{staticStyle:{display:"flex",margin:"5px 0"}},[e("p",{staticStyle:{"margin-right":"70px"}},[t._v(t._s(a.tList[a.key-1].val))]),e("p",{staticStyle:{"margin-right":"65px"}},[t._v(t._s(a.num)+"/"+t._s(i.unit))]),e("p",{staticStyle:{"font-weight":"bold"}},[t._v("￥"+t._s(a.My))])])}),0)]),e("div",{staticClass:"ibBox"},[e("p",{staticStyle:{"margin-right":"36px"}},[t._v("总计："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(i.allS))])]),e("p",[t._v("总价："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(i.allM))])])]),e("span",{staticClass:"line"})]):t._e()})],2),e("div",{staticClass:"txt"},[e("p",{staticStyle:{width:"50px","margin-left":"20px"}},[t._v("留言：")]),e("a-input",{staticStyle:{width:"70%"},attrs:{placeholder:"对卖家说点什么"},model:{value:i.txt,callback:function(a){t.$set(i,"txt",a)},expression:"item.txt"}}),e("p",{staticStyle:{"margin-left":"25px","margin-right":"70px"}},[t._v("共计："),e("span",{staticStyle:{color:"#ff6600"}},[t._v("￥"+t._s(i.allMy))])])],1)]):t._e()}),e("div",{staticClass:"bBtn"},[e("p",{staticStyle:{"margin-right":"30px"}},[e("span",{staticStyle:{color:"#ff6600","font-weight":"bold"}},[t._v(t._s(t.munMy.num))]),t._v("件商品")]),e("p",{staticStyle:{display:"flex","align-items":"center","margin-right":"45px"}},[t._v("共计："),e("span",{staticStyle:{color:"#ff6600","font-weight":"bold","font-size":"20px"}},[t._v(t._s(t.munMy.My))])]),e("a-button",{attrs:{type:"primary"},on:{click:t.upOdr2}},[t._v("提交订单")])],1)],2):e("div",[e("div",{staticStyle:{height:"125px",background:"#f9f9f9",display:"flex","align-items":"center"}},[e("a-icon",{staticStyle:{"font-size":"60px",margin:"0px 25px 0 50px"},attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}}),e("p",{staticStyle:{"margin-bottom":"0",color:"#000","font-size":"22px"}},[t._v("下单成功！请留意验收")])],1),e("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"20px"}},[e("div",{staticClass:"scL"},[e("img",{staticStyle:{width:"75px",height:"75px","margin-left":"50px","margin-right":"35px"},attrs:{src:"http://img5.imgtn.bdimg.com/it/u=3029025827,2440807936&fm=26&gp=0.jpg",alt:""}})]),e("div",{staticClass:"scR"},[e("div",{staticClass:"scrB",staticStyle:{display:"flex","align-items":"center"}},[e("p",{staticStyle:{"margin-bottom":"0",color:"#000","margin-right":"25px"}},[t._v("采购食堂")]),e("p",{staticStyle:{"margin-bottom":"0",color:"#000"}},[t._v("食堂1")])]),e("div",{staticClass:"scrB",staticStyle:{display:"flex","align-items":"center"}},[e("p",{staticStyle:{"margin-bottom":"0",color:"#000","margin-right":"25px"}},[t._v("下单时间")]),e("p",{staticStyle:{"margin-bottom":"0",color:"#000"}},[t._v(t._s(t.spTime))])]),e("div",{staticClass:"scrB",staticStyle:{display:"flex","align-items":"center"}},[e("p",{staticStyle:{"margin-bottom":"0",color:"#000","margin-right":"25px"}},[t._v("实际金额")]),e("p",{staticStyle:{"margin-bottom":"0",color:"red"}},[t._v("￥"+t._s(t.munMy.My))])])])]),e("span",{staticStyle:{width:"95%",height:"2px",background:"#f8f8f8",display:"block",margin:"25px auto 0"}}),e("div",{staticStyle:{"margin-top":"90px"}},[e("a-button",{staticStyle:{"margin-left":"50px","margin-right":"15px"},on:{click:t.look}},[t._v("查看我的订单")]),e("a-button",{attrs:{type:"primary"},on:{click:t.shping}},[t._v("\n                            继续选购\n                        ")])],1)])])])],1),e("a-back-top",{attrs:{visibilityHeight:200}}),e("a-modal",{attrs:{title:t.Title},model:{value:t.visible,callback:function(i){t.visible=i},expression:"visible"}},[e("div",{staticStyle:{height:"150px",display:"flex","align-items":"center","justify-content":"center"}},[e("p",{staticStyle:{"margin-bottom":"0","text-align":"center"},domProps:{innerHTML:t._s(t.refuse)}})]),t.sShow?e("template",{slot:"footer"},[e("a-button",{on:{click:function(i){return t.upBack("NO")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.upBack("OK")}}},[t._v("确认")])],1):e("template",{slot:"footer"},[e("a-button",{on:{click:function(i){return t.boxBack("NO")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.boxBack("OK")}}},[t._v("确认")])],1)],2),e("a-modal",{attrs:{title:t.Title2},model:{value:t.visible2,callback:function(i){t.visible2=i},expression:"visible2"}},[e("div",{staticStyle:{height:"150px",display:"flex","align-items":"center","justify-content":"center"}},[e("p",{staticStyle:{"margin-bottom":"0","text-align":"center"},domProps:{innerHTML:t._s(t.refuse2)}})]),t.remB?e("template",{slot:"footer"},[e("a-button",{on:{click:function(i){return t.remBack("All")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.remOK("All")}}},[t._v("确认")])],1):e("template",{slot:"footer"},[e("a-button",{on:{click:function(i){return t.remBack("one")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.remOK("one")}}},[t._v("确认")])],1)],2),e("a-modal",{attrs:{title:t.Title3},model:{value:t.visible3,callback:function(i){t.visible3=i},expression:"visible3"}},[e("div",{staticStyle:{height:"150px",display:"flex","align-items":"center","justify-content":"center"}},[e("p",{staticStyle:{"margin-bottom":"0","text-align":"center"},domProps:{innerHTML:t._s(t.refuse3)}})]),e("template",{slot:"footer"},[e("a-button",{on:{click:function(i){return t.odBack("NO")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(i){return t.odBack("OK")}}},[t._v("确认")])],1)],2)],1)},s=[],n=(a("a481"),a("7f7f"),a("ac6a"),a("c1df")),c=a.n(n),o={data:function(){return{isCk:!1,pKey:"1",rVal1:1,rVal2:1,rVal3:1,ctData:[],codeL:{code:"5125646464846441",type:13,time:"2019-07-04   15:23",orderList:[],moeny:"￥5000"},xx:[{index:1,url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569436524235&di=b23fd3a775194edc22feb97f830a30a9&imgtype=0&src=http%3A%2F%2Fimg.yzcdn.cn%2Fupload_files%2F2017%2F10%2F25%2FFmbTIIj0tXV76FObWUw54Zpj4sbG.jpg%2521730x0.jpg",name:"包包白",unit:"斤",num:500,time:[{time:"07-02   星期一",num:"200斤",eTime:"全部",eTimeList:["全部","食堂一","食堂二","食堂三"]}],Merchant:[{name:"赵三的猪肉",money:"￥15",unit:"/斤",cUse:!0},{name:"赵三的猪肉",money:"￥15",unit:"/斤",cUse:!1},{name:"赵三的猪肉",money:"￥15",unit:"/斤",cUse:!1},{name:"赵三的猪肉",money:"￥15",unit:"/斤",cUse:!1},{name:"赵三的猪肉",money:"￥15",unit:"/斤",cUse:!1}],isClick:-2},{index:2,url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569436524235&di=b23fd3a775194edc22feb97f830a30a9&imgtype=0&src=http%3A%2F%2Fimg.yzcdn.cn%2Fupload_files%2F2017%2F10%2F25%2FFmbTIIj0tXV76FObWUw54Zpj4sbG.jpg%2521730x0.jpg",name:"包包白",unit:"斤",num:500,time:[{time:"07-02   星期一",num:"200斤",eTime:"全部",eTimeList:["全部","食堂一","食堂二","食堂三"]}],Merchant:[],isClick:-2},{index:3,url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569436524235&di=b23fd3a775194edc22feb97f830a30a9&imgtype=0&src=http%3A%2F%2Fimg.yzcdn.cn%2Fupload_files%2F2017%2F10%2F25%2FFmbTIIj0tXV76FObWUw54Zpj4sbG.jpg%2521730x0.jpg",name:"包包白",unit:"斤",num:500,time:[{time:"07-02   星期一",num:"200斤",eTime:"全部",eTimeList:["全部","食堂一","食堂二","食堂三"]}],Merchant:[{name:"赵三的猪肉",money:"￥15",unit:"/斤",cUse:!1}],isClick:-2},{index:4,url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569436524235&di=b23fd3a775194edc22feb97f830a30a9&imgtype=0&src=http%3A%2F%2Fimg.yzcdn.cn%2Fupload_files%2F2017%2F10%2F25%2FFmbTIIj0tXV76FObWUw54Zpj4sbG.jpg%2521730x0.jpg",name:"包包白",unit:"斤",num:500,time:[{time:"07-02   星期一",num:"200斤",eTime:"全部",eTimeList:["全部","食堂一","食堂二","食堂三"]}],Merchant:[],isClick:-2}],btnL:["上一条","本条","下一条"],num:1,visible:!1,Title:"",refuse:"",sShow:!1,odList:{num:15,aMy:"￥5000.00",odList:[{name:"张三的猪肉",dList:[],allMy:"￥3000.00"}]},form:this.$form.createForm(this),gDList:[],tpList:{val:0,list:["全部","肉禽蛋类","海鲜鱼类","蔬菜素食","水果饮品","粮油干杂","其他"]},styleID:"",foodName:"",splier:"",tips:"暂无供应商经营该类目",cmCode:[],gtShow:!0,dtShow:!0,scShow:!1,pdShow:!1,form2:this.$form.createForm(this),dtData:{},tnData:[{opList:[],num:"",key:1,iState:!1,price:0}],spNum:1,hackReset:!0,remB:!0,remD:!1,visible2:!1,Title2:"",refuse2:"",I1:"",I2:"",visible3:!1,Title3:"",refuse3:"",sCart:!0,spcData:[],succ:!0,mTotal:0,Itime:[],spID:"",spData:{url:"",title:"",rate:"",style:""},styData:[],allData:[],page:0,rvIndex:0,munMy:{num:0,My:0},cartMy:{num:0,My:0,txt:""},cg_id:0,spList:"",spTime:c()(new Date).format("YYYY-MM-DD h:mm:ss"),newList:[]}},methods:{keyChange:function(t){this.pKey=t,3==t&&this.getChatList()},rChange1:function(t){var i=this,a="";this.ctData.forEach(function(t,e){t.id==i.rVal1&&(a=i.ctData[e].title)}),this.getJList(this.rVal1),this.$message.success("当前选中“"+a+"”采购计划")},rChange2:function(t){this.getList(),this.sceahData()},rChange3:function(t){this.getChatList()},getData:function(t){if(0==t){if(1==this.num)return this.num=1,this.page=0,void this.setDt(this.allData,this.page);this.num-=1,this.page--,this.setDt(this.allData,this.page)}if(1==t)return this.num=1,this.page=0,void this.setDt(this.allData,this.page);if(2==t){if(this.num<this.allData.length)return this.num+=1,this.page++,void this.setDt(this.allData,this.page);this.$message.warning("超过最大可选条目！")}},mChange:function(t,i){i.isClick=t},plChange:function(t,i){i.eTime=t},next:function(){var t=!0;for(var i in this.codeL.orderList)if(this.codeL.orderList[i].isCK&&this.codeL.orderList[i].issp&&this.codeL.orderList[i].isClick<0){t=!1,this.codeL.orderList[i].isClick=-1;break}t?(this.visible=!this.visible,this.Title="采购提示",this.refuse="当前计划中有食材无供应商售卖或已超过使用日期，将不计入订单中"):this.$message.warning("请选择供应商！")},boxBack:function(t){this.visible=!this.visible,"OK"==t&&(this.sShow=!this.sShow,this.newList.filter(function(t){if(t.isCK&&t.issp){console.log(t);t.url,t.name,t.num}}))},upOdr:function(){this.visible=!this.visible,this.Title="提交订单",this.refuse="当前所选采购计划单号5126546456464，申请时间2019-07-02   15:23提交订单后供应商将按送达时间配送，请再次确认"},upOdr2:function(){this.visible3=!this.visible3,this.Title3="提交订单",this.refuse3="提交订单后供应商将按送达时间配送，请再次确认"},upBack:function(t){this.visible=!this.visible,"OK"==t&&this.$message.success("提交成功")},dBack:function(){this.sShow=!this.sShow},getPlist:function(t){var i=this;this.tips="暂未搜索到对应食材";var a=["code"];this.form.validateFields(a,function(t,a){console.log(a),t||(i.foodName=a.code,i.sceahData(),i.form.resetFields())})},getSp:function(t,i,a){this.styleID=a,this.sceahData(),t.val=i,this.tips="暂无供应商经营该类目"},lookDt:function(t,i){var a=this;console.log(i),this.succ=!this.succ,this.spNum=2,this.gtShow=!this.gtShow,this.dtShow=!this.dtShow,this.tnData=[{opList:this.Itime,num:"",key:1,iState:!1}],this.cartMy.My=1*i.moeny.slice(1,i.moeny.length),this.cartMy.txt=i.fName+"    "+i.txt,this.spID=i.id;var e={url:"api/school/cargo/"+i.id,method:"get",data:{}};this.$apiAxiox(e).then(function(t){0==t.data.code?(a.tnData.price=t.data.data.price,a.dtData={id:t.data.data.supplier_id,pic:t.data.data.img_src_one,logo:t.data.data.supplier_logo,dTxt:t.data.data.category_title,name:t.data.data.supplier_title,moeny:"￥"+t.data.data.price,stNum:t.data.data.score_num,pName:t.data.data.supplier_title,produce:t.data.data.factory,ads:t.data.data.source,sTime:t.data.data.product_date_str,day:t.data.data.shelf_life+"天",dep:t.data.data.storage_method_str,pack:t.data.data.pack_str,nCnt:t.data.data.net_weight,imgList:t.data.data.logo_src}):console.log(1)})},sdBack:function(){this.spNum=1,this.gtShow=!this.gtShow,this.dtShow=!this.dtShow},addDT:function(t){if(this.tnData.length<7){var i={key:1,opList:this.Itime,num:"",iState:!1,price:0},a=this.tnData.length;this.$set(this.tnData,a,i)}else this.$message.warning("最多添加7个批次，已达上限")},notNull:function(t){var i=this;if("join"===t){var a=!0,e=this;if(this.tnData.forEach(function(t,e){console.log(t),i.cartMy.num+=1*t.num,""==t.key?(t.iState=!0,a=!1):(t.iState=!1,a=!0),""==t.num||0==t.num?(t.iState=!0,a=!1):(t.iState=!1,a=!0)}),a){var s={cid:this.rVal2,materials:[{cargo_id:this.spID,detail:[]}]};this.tnData.forEach(function(t,a){var e,n;e=(new Date).getFullYear()+t.opList[t.key-1].val.substring(0,5).replace("-",""),n=t.opList[t.key-1].val.indexOf("上午"),n=-1!=n?1:2;var c={num:t.num,usetime:e,state:n};s.materials[0].detail.push(c),i.$delete(s,"opList")}),s.materials=JSON.stringify(s.materials);var n={url:"api/school/cart",method:"post",data:s};e.$apiAxiox(n).then(function(t){0==t.data.code?(i.getIndex(),i.dtShow=!i.dtShow,i.scShow=!i.scShow):i.$message.warning(t.data.msg)})}}else this.dtShow=!this.dtShow,this.scShow=!this.scShow},iChange:function(t,i,a){i.iState=!1,i.num=t.target.value},sChange:function(t,i,a){i.key=t},ctue:function(t){"c"==t?(this.spNum=1,this.scShow=!this.scShow,this.gtShow=!this.gtShow):(this.pKey="3",this.getChatList())},getPlist2:function(t){var i=this;this.tips="暂未搜索到对应食材";var a=["code1"];this.form.validateFields(a,function(t,a){console.log(a),t||(i.foodName=a.code1,i.sceahData(),i.form.resetFields())})},gtSp:function(t,i){console.log(i),this.splier=i,1==t?(this.gtShow=!this.gtShow,this.pdShow=!this.pdShow):(this.dtShow=!this.dtShow,this.pdShow=!this.pdShow),this.getSPd(i),this.sceahData()},pdBack:function(t){this.splier="",1==t?(this.gtShow=!this.gtShow,this.pdShow=!this.pdShow):(this.dtShow=!this.dtShow,this.pdShow=!this.pdShow),this.tpList.list=this.styData,this.sceahData()},remove:function(t,i){this.$delete(this.tnData,t),this.$forceUpdate(),console.log(this.tnData)},ckchange1:function(t,i,a){console.log(a),a.isCk=t.target.checked,t.target.checked?a.sList.forEach(function(t,i){t.isCk=!0}):a.sList.forEach(function(t,i){t.isCk=!1});var e=[],s=!0;this.spcData.forEach(function(t,i){e.push(t.isCk)}),e.forEach(function(t,i){0==t&&(s=!1)}),this.isCk=!!s,this.getNumAndMy()},ckchange2:function(t,i,a){console.log(a),i.isCk=t.target.checked;var e=[],s=!0;a.sList.forEach(function(t,i){e.push(t.isCk)}),e.forEach(function(t,i){0==t&&(s=!1)}),s?a.isCk=!0:(a.isCk=!1,this.isCk=!1),this.getNumAndMy()},ckChange:function(t){this.isCk=t.target.checked,t.target.checked?this.spcData.forEach(function(t,i){t.isCk=!0,t.sList.forEach(function(t,i){t.isCk=!0})}):this.spcData.forEach(function(t,i){t.isCk=!1,t.sList.forEach(function(t,i){t.isCk=!1})}),this.getNumAndMy()},removeL:function(t,i,a){this.cg_id=a.id,this.remB=!1,this.visible2=!0,this.Title2="确认移除",this.refuse2="是否确认移除该商品？",this.I1=i,this.I2=t},addNew:function(t,i){var a={key:1,tList:this.tnData[0].opList,My:0,num:0};t.push(a)},addW:function(t,i,a,e,s){i.num=t.target.value,i.My=(i.num*e).toFixed(2),a.sList.forEach(function(t,i){t.allS=0,t.allM=0,t.tData.forEach(function(i,a){t.allS+=1*i.num,t.allM+=1*i.My}),t.allM=t.allM.toFixed(2)}),this.getNumAndMy(),this.getGoodData(s,s.id)},removeW:function(t,i,a){t.splice(i,1),a.allS=0,console.log(a),a.allM=0,a.tData.forEach(function(t,i){a.allS+=1*t.num}),a.allM+=a.moeny*a.allS,a.allM=a.allM.toFixed(2),this.getNumAndMy(),this.getGoodData(a,a.id)},reload:function(){this.$forceUpdate()},removeAll:function(){this.munMy.num<=0?this.$message.warning("未选择商品！"):(this.remB=!0,this.visible2=!0,this.Title2="确认移除",this.refuse2="是否确认移除选中商品？")},remBack:function(t){this.visible2=!1},remOK:function(t){var i=this,a="";if(this.visible2=!1,"All"==t){for(var e in this.spcData)for(var s in this.spcData[e].sList)this.spcData[e].sList[s].isCk&&(a+=this.spcData[e].sList[s].id+",");a=a.substring(0,a.length-1),console.log(a);var n={url:"api/school/cart/"+a,method:"delete",data:{cid:this.rVal1}};this.$apiAxiox(n).then(function(t){if(0==t.data.code){var a=i.spcData.length;i.spcData.forEach(function(t,e){1==t.isCk&&t.sList.splice(e,1),e+1==a&&i.spcData.forEach(function(t,i){t.sList.forEach(function(i,a){1==i.isCk&&t.sList.splice(a,1)})})}),i.getNumAndMy()}else i.$message.warning(t.data.msg)})}else{var c={url:"api/school/cart/"+this.cg_id,method:"delete",data:{cid:this.rVal1}};this.$apiAxiox(c).then(function(t){0==t.data.code?i.spcData[i.I1].sList.splice(i.I2,1):i.$message.warning(t.data.msg)})}},getMy:function(){if(this.munMy.num<=0)this.$message.warning("未选择商品！");else{var t=!0;for(var i in this.spcData)for(var a in this.spcData[i].sList)if(this.spcData[i].sList[a].isCk)for(var e in this.spcData[i].sList[a].tData){if(0==this.spcData[i].sList[a].tData[e].num||""==this.spcData[i].sList[a].tData[e].num){t=!1,this.$message.warning("填写使用数量！");break}if("undefined"==typeof this.spcData[i].sList[a].tData[e].key||null==this.spcData[i].sList[a].tData[e].key||""==this.spcData[i].sList[a].tData[e].key){t=!1,this.$message.warning("选择使用时间！");break}}t&&(this.sCart=!this.sCart)}},scBack:function(){this.sCart=!this.sCart},odBack:function(t){var i=this;if(this.visible3=!this.visible3,"OK"==t){var a={url:"api/school/order",method:"post",data:{cid:this.rVal3,card_ids:this.spList}};this.$apiAxiox(a).then(function(t){0==t.data.code?i.succ=!i.succ:i.$message.warning(t.data.msg)})}else console.log(2)},look:function(){this.$router.push({path:"/mxOrder"}),this.succ=!this.succ,this.sCart=!this.sCart},shping:function(){this.succ=!this.succ,this.sCart=!this.sCart,this.pKey="2",this.munMy.num=0,this.munMy.My=0},getIndex:function(){var t=this;this.ctData.forEach(function(i,a){i.id==t.rVal2&&(t.rvIndex=a)})},sIchange:function(t,i,a,e){i.key=t,this.getGoodData(e,a)},getGoodData:function(t,i){var a=[{cargo_id:i,detail:[]}];for(var e in t.tData){var s=t.tData[e].tList[t.tData[e].key-1].val.replace("-",""),n="";s=(new Date).getFullYear()+s,n="上午"==s.substr(s.length-2,2)?1:2,s=s.substring(0,8);var c={num:t.tData[e].num,usetime:s,state:n};a[0].detail.push(c)}a=JSON.stringify(a),this.setCart(a)},getFRoom:function(){var t=this,i={url:"api/common/dictionaries",method:"get",data:{}};this.$apiAxiox(i).then(function(i){if(0==i.data.code)if(i.data.data.canteen.length>0){t.ctData=i.data.data.canteen,t.rVal1=t.ctData[0].id,t.rVal2=t.ctData[0].id,t.rVal3=t.ctData[0].id,t.tpList.list=i.data.data.food;var a={id:"",title:"全部"};t.tpList.list.unshift(a),t.getJList(t.rVal1)}else t.$message.warning("暂无食堂可供选择！")})},sceahData:function(){var t=this,i={url:"api/school/cargo?classify="+this.styleID+"&title="+this.foodName+"&supplier_id="+this.splier,method:"get",data:{}};this.$apiAxiox(i).then(function(i){0==i.data.code&&(t.foodName="",t.mTotal=i.data.data.total,t.cmCode=[],i.data.data.data.forEach(function(i,a){var e={id:i.id,url:i.img_src_one,moeny:"￥"+i.price,unit:"/"+i.unit,fName:i.category_title,txt:i.title,sName:i.supplier_title};t.cmCode.push(e)}))})},getList:function(){var t=this,i={url:"api/school/supplier",method:"get",data:{}};this.sperList=[],this.gDList=[],this.$apiAxiox(i).then(function(i){0==i.data.code&&i.data.data.forEach(function(i,a){var e,s;e=1==i.state,s=1!=i.expire_status;var n={id:i.supplier_id,logo:i.logo_src,name:i.title,icon:i.special_mark_src,tel:i.phone,lperson:i.legal_title,ads:i.loc_detail,rate:i.score_num,state:e,eTime:s};t.gDList.push(n)})})},jdTime:function(){var t;(new Date).getHours()>11?(t=c()().add(1,"days"),this.getTimeList(t,!0)):(t=c()(new Date),this.getTimeList(t,!1))},getTimeList:function(t,i){for(var a=0,e=[],s=1;s<8;s++){var n=24*a*60*60*1e3;a++;var o=c()(parseInt(c()(t).format("x"))+n).format("MM-DD");e.push(o)}var r=["上午","下午"],l=0,p=[];i?(l=1,e.forEach(function(t,i){r.forEach(function(i){var a={key:l,val:t+"  "+i};l++,p.push(a)})})):(l=0,e.forEach(function(t,i){r.forEach(function(i){var a={key:l,val:t+"  "+i};l++,p.push(a)})}),p.splice(0,1)),this.Itime=p,this.tnData[0].opList=p},getChatList:function(){var t=this,i={url:"api/school/cart?cid="+this.rVal3,method:"get",data:{}};this.$apiAxiox(i).then(function(i){0==i.data.code?(t.spcData=[],i.data.data.forEach(function(i,a){var e={index:a,isCk:!1,name:i.title,sList:[],txt:"",allMy:0,isSck:!1};i.materials.forEach(function(i,a){var s={isCk:!1,url:"",txt:i.material_title,moeny:i.price,tData:[],unit:i.unit,allS:0,allM:0,id:i.cargo_id};i.detail.forEach(function(a,e){s.allS+=1*a.num;var n=[],c="";""==a.usetime||null==a.usetime?(n=t.tnData[0].opList,c=""):(n=t.tnData[0].opList,c=t.getKey(a.usetime,a.state));var o={key:c,tList:n,My:(i.price*a.num).toFixed(2),num:a.num};s.tData.push(o)}),s.allM+=i.price*s.allS,s.allM=s.allM.toFixed(2),e.allMy+=1*s.allM,e.sList.push(s)}),t.spcData.push(e)}),console.log(t.spcData)):t.$message.warning(i.data.msg)})},getKey:function(t,i){t=t.substring(4,6)+"-"+t.substring(6,8),t+=1==i?"  上午":"  下午";var a="";return this.tnData[0].opList.forEach(function(i,e){t==i.val&&(a=e+1)}),a},getSPd:function(t){var i=this,a={url:"api/school/supplierdetail?supplier_id="+t,method:"get",data:{}};this.$apiAxiox(a).then(function(t){if(0==t.data.code){i.spData.url=t.data.data.logo_src,i.spData.title=t.data.data.title,i.spData.icon=t.data.data.special_mark_src,i.dtData.stNum=t.data.data.scoring,i.spData.style=t.data.data.busin_category_str,i.tpList.list=t.data.data.busin_category_arr;var a={id:"",title:"全部"};i.tpList.list.unshift(a),i.styData=i.tpList.list}else i.$message.warning(t.data.msg)})},getJList:function(t){var i=this,a={url:"api/school/plan/procure?cid="+t,method:"get",data:{}};this.$apiAxiox(a).then(function(t){0==t.data.code?(i.allData=t.data.data,i.setDt(t.data.data,0)):i.$message.warning(t.data.msg)})},setDt:function(t,i){var a=this;t.length<=0?this.codeL.orderList=[]:(this.codeL.orderList=[],this.newList=[],this.codeL.code=t[i].single_number,this.codeL.type=t[i].material_types,this.codeL.time=t[i].updated_at,t[i].materials.forEach(function(t,i){var e={index:i+1,url:t.cover,name:t.title,unit:t.unit,num:t.sum_num,time:[],Merchant:t.supp,isClick:-2,isCK:!0,issp:!1};t.supp.length>0&&(e.issp=!0),t.batch.forEach(function(t,i){var a={time:c()(1e3*t.usetime).format("MM-DD  dddd"),num:t.num,eTime:"",eTimeList:[]};t.choice_items.length<=0&&(e.isCK=!1),t.choice_items.forEach(function(t,i){var e=c()(1e3*t.time).format("MM-DD"),s="上午";1==t.default&&(a.eTime=i+1),2==t.afternoon&&(s="下午"),e=e+"  "+s,a.eTimeList.push(e)}),console.log(a.eTimeList),e.time.push(a)}),a.codeL.orderList.push(e)}),this.newList=this.codeL.orderList)},getNumAndMy:function(){this.munMy.num=0,this.munMy.My=0;var t="";for(var i in this.spcData)for(var a in this.spcData[i].isSck=!1,this.spcData[i].allMy=0,this.spcData[i].sList)this.spcData[i].sList[a].isCk&&(this.munMy.My+=1*this.spcData[i].sList[a].allM,this.munMy.num+=1,this.spcData[i].isSck=!0,this.spcData[i].allMy+=1*this.spcData[i].sList[a].allM,t+=this.spcData[i].sList[a].id+",");this.spList=t.slice(0,t.length-1),console.log(this.spList)},setCart:function(t){var i=this;console.log(1111111);var a={url:"api/school/cart/"+this.rVal3,method:"put",data:{materials:t}};this.$apiAxiox(a).then(function(t){0==t.data.code||i.$message.warning(t.data.msg)})}},created:function(){this.jdTime(),this.getFRoom(),this.getList(),this.sceahData()}},r=o,l=(a("08ad"),a("bba2"),a("2877")),p=Object(l["a"])(r,e,s,!1,null,"61660ae8",null);i["default"]=p.exports},ceca:function(t,i,a){t.exports=a.p+"img/logo.b7dee120.png"}}]);
//# sourceMappingURL=chunk-55c7a3fc.ae47d57e.js.map