(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-321ccdc7"],{"1af6":function(a,t,e){var n=e("63b6");n(n.S,"Array",{isArray:e("9003")})},"597e":function(a,t,e){},"75fc":function(a,t,e){"use strict";var n=e("a745"),i=e.n(n);function s(a){if(i()(a)){for(var t=0,e=new Array(a.length);t<a.length;t++)e[t]=a[t];return e}}var r=e("774e"),o=e.n(r),d=e("c8bb"),l=e.n(d);function c(a){if(l()(Object(a))||"[object Arguments]"===Object.prototype.toString.call(a))return o()(a)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(a){return s(a)||c(a)||u()}e.d(t,"a",function(){return p})},"774e":function(a,t,e){a.exports=e("d2d5")},a745:function(a,t,e){a.exports=e("f410")},ac6a:function(a,t,e){for(var n=e("cadf"),i=e("0d58"),s=e("2aba"),r=e("7726"),o=e("32e9"),d=e("84f2"),l=e("2b4c"),c=l("iterator"),u=l("toStringTag"),p=d.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(h),m=0;m<f.length;m++){var v,C=f[m],g=h[C],b=r[C],y=b&&b.prototype;if(y&&(y[c]||o(y,c,p),y[u]||o(y,u,C),d[C]=p,g))for(v in n)y[v]||s(y,v,n[v],!0)}},c124:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"mxModifyInfos"}},[e("a-breadcrumb",{attrs:{separator:" "}},[e("a-breadcrumb-item",[e("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:a.goback}})],1),e("a-breadcrumb-item",{staticClass:"mx_header_text"},[a._v("修改信息")])],1),e("a-skeleton",{attrs:{loading:a.loading,active:"",title:!1,paragraph:{rows:20}}},[e("a-form",{attrs:{form:a.form},on:{submit:a.handleSubmit}},[e("a-form-item",{attrs:{label:"身份证正反面图片"}},[e("div",[e("div",{staticClass:"clearfix"},[e("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:a.updataCanteens.fileList},on:{preview:a.handlePreview,change:a.handleChange}},[a.updataCanteens.fileList.length<1?e("div",[e("a-icon",{attrs:{type:"plus"}})],1):a._e()]),e("a-modal",{attrs:{visible:a.previewVisible,footer:null},on:{cancel:a.handleCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:a.previewImage}})])],1),e("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:a.updataCanteens.fileList},on:{preview:a.handlePreview,change:a.handleChange}},[e("a-button",[e("a-icon",{attrs:{type:"upload"}}),a._v("更换图片\n                    ")],1)],1)],1),e("div",[e("div",{staticClass:"clearfix"},[e("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:a.updataCanteens.sedList},on:{preview:a.handlePreviews,change:a.handleChanges}},[a.updataCanteens.sedList.length<1?e("div",[e("a-icon",{attrs:{type:"plus"}})],1):a._e()]),e("a-modal",{attrs:{visible:a.previewVisibles,footer:null},on:{cancel:a.handleCancels}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:a.previewImages}})])],1),e("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:a.updataCanteens.sedList},on:{preview:a.handlePreviews,change:a.handleChanges}},[e("a-button",[e("a-icon",{attrs:{type:"upload"}}),a._v("更换图片\n                    ")],1)],1)],1)]),e("a-form-item",{attrs:{label:"身份证号码"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardId",{initialValue:a.updataCanteens.cardId,rules:[{required:!0,message:"请填写身份证号码"}]}],expression:"[\n                    'cardId',\n                    {initialValue: updataCanteens.cardId,rules: [{ required: true, message: '请填写身份证号码' }]}\n                ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写身份证号码"}})],1),e("a-form-item",{attrs:{label:"健康证图片"}},[e("div",[e("div",{staticClass:"clearfix"},[e("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:a.updataCanteens.health},on:{preview:a.healthPreview,change:a.healthChange}},[a.updataCanteens.health.length<1?e("div",[e("a-icon",{attrs:{type:"plus"}})],1):a._e()]),e("a-modal",{attrs:{visible:a.healthVisible,footer:null},on:{cancel:a.healthCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:a.healthImage}})])],1),e("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:a.updataCanteens.health},on:{preview:a.healthPreview,change:a.healthChange}},[e("a-button",[e("a-icon",{attrs:{type:"upload"}}),a._v("更换图片\n                    ")],1)],1)],1)]),e("a-form-item",{attrs:{label:"健康证发证单位"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["authority",{initialValue:a.updataCanteens.authority,rules:[{required:!0,message:"请填写发证单位"}]}],expression:"[\n                    'authority',\n                    {initialValue: updataCanteens.authority,rules: [{ required: true, message: '请填写发证单位' }]}\n                ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写发证单位"}})],1),e("a-form-item",{attrs:{label:"健康证发证日期"}},[e("a-date-picker",{attrs:{placeholder:"发证日期选择",value:a.moment(a.issuance,"YYYY-MM-DD")},on:{change:a.mxDateChange}})],1),e("a-form-item",[e("a-button",{staticClass:"mx_back",on:{click:a.mxBack}},[a._v("上一步")]),e("a-button",{attrs:{type:"primary","html-type":"submit"}},[a._v("更新保存")])],1)],1)],1)],1)},i=[],s=e("75fc"),r=(e("7f7f"),e("ac6a"),e("c1df")),o=e.n(r),d={data:function(){return{moment:o.a,loading:!0,previewVisible:!1,previewImage:"",fileList:[{uid:"-1",name:"xxx.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],previewVisibles:!1,previewImages:"",sedList:[{uid:"-1",name:"xxx.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],healthVisible:!1,healthImage:"",health:[{uid:"-1",name:"xxx.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],updataCanteens:{fileList:[],sedList:[],health:[],cardId:"",authority:""},form:this.$form.createForm(this),uploading:!1,issuance:"",staffOne:"",values:{},faceId:"",faceUrl:"",sedId:"",sedUrl:"",healthId:"",healthUrl:"",updataCanteen:{}}},created:function(){var a=this;this.updataCanteen=this.$route.query.updataCanteen,console.log(this.updataCanteen),this.$get("api/school/staff/"+this.$route.query.id).then(function(t){if(0==t.data.code){a.updataCanteens.cardId=t.data.data.staff.card_id,a.updataCanteens.authority=t.data.data.staff.authority,a.issuance=t.data.data.staff.join_time_str;var e=[],n={uid:t.data.data.staff.card_photo_src[0].id,name:"xxx.png",response:{data:{id:parseInt(t.data.data.staff.card_photo_src[0].id),url:t.data.data.staff.card_photo_src[0].url}},status:"done",url:t.data.data.staff.card_photo_src[0].url};e.push(n),a.updataCanteens.fileList=e;var i=[],s={uid:t.data.data.staff.card_photo_src[1].id,name:"xxx.png",response:{data:{id:parseInt(t.data.data.staff.card_photo_src[1].id),url:t.data.data.staff.card_photo_src[1].url}},status:"done",url:t.data.data.staff.card_photo_src[1].url};i.push(s),a.updataCanteens.sedList=i;var r=[],o={uid:t.data.data.staff.health_cert_id,name:"xxx.png",response:{data:{id:parseInt(t.data.data.staff.health_cert_id),url:t.data.data.staff.health_cert_src}},status:"done",url:t.data.data.staff.health_cert_src};r.push(o),a.updataCanteens.health=r,a.loading=!1}else console.log(22)})},methods:{goback:function(){this.$router.push({path:"/mxEmployeeInfo"})},mxBack:function(){var a=this;this.form.validateFields(function(t,e){t||(Object.assign(a.updataCanteens,{cardId:e.cardId,authority:e.authority}),a.$router.push({path:"/mxModifyInfo",query:{updataCanteen:a.updataCanteen,updataCanteens:a.updataCanteens,id:a.$route.query.id}}))})},handleSubmit:function(a){var t=this;a.preventDefault(),this.form.validateFields(function(a,e){if(!a){"男"==t.updataCanteen.sex&&(t.updataCanteen.sex=1),"女"==t.updataCanteen.sex&&(t.updataCanteen.sex=2),t.updataCanteen.joinTime=o()(t.updataCanteen.joinTime).format("x")/1e3,t.issuance=o()(t.issuance).format("x")/1e3;var n=[];t.updataCanteens.fileList.forEach(function(a){n.push(a.response.data.id)});var i=[];t.updataCanteen.fileList.forEach(function(a){i.push(a.response.data.id)});var s=[];t.updataCanteens.sedList.forEach(function(a){s.push(a.response.data.id)});var r=[];t.updataCanteens.health.forEach(function(a){r.push(a.response.data.id)});var d={url:"api/school/staff/"+t.$route.query.id,method:"put",data:{canteen_id:t.updataCanteen.canteenId,title:t.updataCanteen.name,sex:t.updataCanteen.sex,age:t.updataCanteen.age,job_title:t.updataCanteen.job_title,education:t.updataCanteen.education,phone:t.updataCanteen.phone,location:t.updataCanteen.location,join_time:t.updataCanteen.joinTime,card_photo:n.join(",")+","+s.join(","),card_id:e.cardId,health_cert:r.join(","),authority:e.authority,issuance:t.issuance,face_id:i.join(",")}};t.$apiAxiox(d).then(function(a){0==a.data.code?(t.$message.success("修改员工成功"),t.$router.push({path:"/mxEmployeeInfo"})):console.log(22)})}})},mxDateChange:function(a,t){this.issuance=t},handleCancel:function(){this.previewVisible=!1},handlePreview:function(a){this.previewImage=a.url||a.thumbUrl,this.previewVisible=!0},handleChange:function(a){var t=this,e=Object(s["a"])(a.fileList);e=e.slice(-1),e=e.map(function(a){return a.response&&(a.url=a.response.data.url,t.faceId=a.response.data.id,t.faceUrl=a.response.data.url),a}),this.updataCanteens.fileList=e},handleCancels:function(){this.previewVisibles=!1},handlePreviews:function(a){this.previewImages=a.url||a.thumbUrl,this.previewVisibles=!0},handleChanges:function(a){var t=this,e=Object(s["a"])(a.fileList);e=e.slice(-1),e=e.map(function(a){return a.response&&(a.url=a.response.data.url,t.sedId=a.response.data.id,t.sedUrl=a.response.data.url),a}),this.updataCanteens.sedList=e},healthCancel:function(){this.healthVisible=!1},healthPreview:function(a){this.healthImage=a.url||a.thumbUrl,this.healthVisible=!0},healthChange:function(a){var t=this,e=Object(s["a"])(a.fileList);e=e.slice(-1),e=e.map(function(a){return a.response&&(a.url=a.response.data.url,t.healthId=a.response.data.id,t.healthUrl=a.response.data.url),a}),this.updataCanteens.health=e}}},l=d,c=(e("ec7d"),e("2877")),u=Object(c["a"])(l,n,i,!1,null,"535a69e2",null);t["default"]=u.exports},c8bb:function(a,t,e){a.exports=e("54a1")},ec7d:function(a,t,e){"use strict";var n=e("597e"),i=e.n(n);i.a},f410:function(a,t,e){e("1af6"),a.exports=e("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-321ccdc7.61dcb6ed.js.map