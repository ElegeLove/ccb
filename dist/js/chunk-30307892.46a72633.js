(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30307892"],{"1af6":function(e,t,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"2e58":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mxAddStudent"}},[a("a-breadcrumb",{attrs:{separator:" "}},[a("a-breadcrumb-item",[a("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goback}})],1),a("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("添加学生")])],1),a("a-skeleton",{attrs:{loading:e.loading,active:"",title:!1,paragraph:{rows:26}}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-row",{staticClass:"mx_main"},[a("a-col",{attrs:{span:8}},[a("div",[a("p",[e._v("学生姓名:")]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请填写学生姓名"}]}],expression:"[\n                                'name',\n                                {rules: [{ required: true, message: '请填写学生姓名' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写学生姓名"}})],1)],1),a("div",[a("p",[e._v("性别选择:")]),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sex",{rules:[{required:!0,message:"请选择学生性别"}]}],expression:"[\n                                'sex',\n                                {rules: [{ required: true, message: '请选择学生性别' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择性别"},on:{change:e.sexChange}},[a("a-select-option",{attrs:{value:"0"}},[e._v("男")]),a("a-select-option",{attrs:{value:"1"}},[e._v("女")])],1)],1)],1),a("div",[a("p",[e._v("年龄:")]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["age",{rules:[{required:!0,message:"请填写学生年龄"}]}],expression:"[\n                                'age',\n                                {rules: [{ required: true, message: '请填写学生年龄' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写学生年龄"}})],1)],1),a("div",[a("p",[e._v("身份证号码:")]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardId",{rules:[{required:!0,message:"请填写身份证号码"}]}],expression:"[\n                                'cardId',\n                                {rules: [{ required: true, message: '请填写身份证号码' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写身份证号码"}})],1)],1),a("div",[a("p",[e._v("入校日期:")]),a("a-form-item",[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["joinTime",{rules:[{required:!0,message:"请选择就餐方式"}]}],expression:"[\n                                'joinTime',\n                                {rules: [{ required: true, message: '请选择就餐方式' }]}\n                            ]"}],attrs:{placeholder:"选择时间"},on:{change:e.mxDateChange}})],1)],1),a("div",[a("p",[e._v("就餐方式:")]),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["diningStyle",{rules:[{required:!0,message:"请选择就餐方式"}]}],expression:"[\n                                'diningStyle',\n                                {rules: [{ required: true, message: '请选择就餐方式' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择就餐方式"},on:{change:e.selectChange}},e._l(e.diningStyle,function(t){return a("a-select-option",{attrs:{value:t.id}},[e._v(e._s(t.title))])}),1)],1)],1),a("div",[a("p",[e._v("监护人:")]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentTitle",{rules:[{required:!0,message:"请填写监护人姓名"}]}],expression:"[\n                                'parentTitle',\n                                {rules: [{ required: true, message: '请填写监护人姓名' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写监护人姓名"}})],1)],1),a("div",[a("p",[e._v("与监护人关系:")]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentRelation",{rules:[{required:!0,message:"请填写与监护人关系"}]}],expression:"[\n                                'parentRelation',\n                                {rules: [{ required: true, message: '请填写与监护人关系' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写与监护人关系"}})],1)],1),a("div",[a("p",[e._v("监护人联系电话:")]),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentPhone",{rules:[{required:!0,message:"请填写与监护人关系"}]}],expression:"[\n                                'parentPhone',\n                                {rules: [{ required: true, message: '请填写与监护人关系' }]}\n                            ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写联系电话"}})],1)],1)]),a("a-col",{attrs:{span:16}},[a("div",[a("p",[e._v("人脸图片:")]),a("a-form-item",[a("div",[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["faceId",{rules:[{required:!0,message:"请录入人脸图片"}]}],expression:"[\n                                            'faceId',\n                                            {rules: [{ required: true, message: '请录入人脸图片' }]}\n                                        ]"}]},[a("a-icon",{attrs:{type:"plus"}})],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("人脸录入\n                                    ")],1)],1)],1)])],1),e.isCertificate?a("div",{staticClass:"mx_outschool"},[a("p",[e._v("校外就餐证明:")]),a("a-form-item",[a("div",[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.sedList},on:{preview:e.handlePreviews,change:e.handleChanges}},[e.sedList.length<1?a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["diningEnclosure",{rules:[{required:!0,message:"请上传图片"}]}],expression:"[\n                                            'diningEnclosure',\n                                            {rules: [{ required: true, message: '请上传图片' }]}\n                                        ]"}]},[a("a-icon",{attrs:{type:"plus"}})],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisibles,footer:null},on:{cancel:e.handleCancels}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImages}})])],1),a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.sedList},on:{preview:e.handlePreviews,change:e.handleChanges}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传图片\n                                    ")],1)],1)],1)])],1):e._e()])],1),a("a-form-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("立即添加")])],1)],1)],1)],1)},r=[],n=a("75fc"),s=(a("7f7f"),{data:function(){return{loading:!0,previewVisible:!1,previewVisibles:!1,previewImage:"",previewImages:"",fileList:[],sedList:[],form:this.$form.createForm(this),uploading:!1,uploadings:!1,diningStyle:[{id:90,title:"校内三餐"},{id:91,title:"校内午晚餐"},{id:92,title:"校内早餐"},{id:93,title:"校内午餐"},{id:94,title:"校内晚餐"},{id:95,title:"校外就餐"}],isCertificate:!1,sex:0,faceId:"",diningEnclosure:"",dateString:""}},mounted:function(){var e=this;this.$get("api/school/dining",{}).then(function(t){0==t.data.code?(e.diningStyle=t.data.data,e.loading=!1):e.$message.warning(t.data.msg)})},methods:{goback:function(){window.history.back(-1)},selectChange:function(e){this.isCertificate=95==e},sexChange:function(e){this.sex=e},mxDateChange:function(e,t){this.dateString=t},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){var i={url:"api/school/students?class_id="+t.$route.query.classid,method:"post",data:{title:a.name,sex:t.sex,age:a.age,card_id:a.cardId,dining_style:a.diningStyle,dining_enclosure:t.diningEnclosure,parent_title:a.parentTitle,parent_relation:a.parentRelation,parent_phone:a.parentPhone,face_id:t.faceId,join_time:t.dateString}};t.$apiAxiox(i).then(function(e){0==e.data.code?(t.form.setFieldsValue({age:"",cardId:"",diningStyle:"",name:"",parentPhone:"",parentRelation:"",parentTitle:"",sex:""}),t.fileList=[],t.sedList=[],t.$message.success("添加学生成功"),t.$router.go(-1)):t.$message.warning(e.data.msg)})}})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=this,a=Object(n["a"])(e.fileList);a=a.slice(-1),a=a.map(function(e){return e.response&&(e.url=e.response.data.url,t.faceId=e.response.data.id),e}),this.fileList=a},handleCancels:function(){this.previewVisibles=!1},handlePreviews:function(e){this.previewImages=e.url||e.thumbUrl,this.previewVisibles=!0},handleChanges:function(e){var t=this,a=Object(n["a"])(e.fileList);a=a.slice(-1),a=a.map(function(e){return e.response&&(e.url=e.response.data.url,t.diningEnclosure=e.response.data.id),e}),this.sedList=a}}}),o=s,l=(a("7609"),a("2877")),d=Object(l["a"])(o,i,r,!1,null,"c5fe331c",null);t["default"]=d.exports},"75fc":function(e,t,a){"use strict";var i=a("a745"),r=a.n(i);function n(e){if(r()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var s=a("774e"),o=a.n(s),l=a("c8bb"),d=a.n(l);function c(e){if(d()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o()(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){return n(e)||c(e)||u()}a.d(t,"a",function(){return p})},7609:function(e,t,a){"use strict";var i=a("f933"),r=a.n(i);r.a},"774e":function(e,t,a){e.exports=a("d2d5")},a745:function(e,t,a){e.exports=a("f410")},c8bb:function(e,t,a){e.exports=a("54a1")},f410:function(e,t,a){a("1af6"),e.exports=a("584a").Array.isArray},f933:function(e,t,a){}}]);
//# sourceMappingURL=chunk-30307892.46a72633.js.map