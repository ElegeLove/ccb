(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca11509c"],{"0bfb":function(t,e,n){"use strict";var a=n("cb7c");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0ca6":function(t,e,n){},"1af6":function(t,e,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"28a0":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},3022:function(t,e,n){(function(t){var a=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},a=0;a<e.length;a++)n[e[a]]=Object.getOwnPropertyDescriptor(t,e[a]);return n},i=/%[sdj%]/g;e.format=function(t){if(!S(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(c(arguments[n]));return e.join(" ")}n=1;for(var a=arguments,r=a.length,o=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(a[n++]);case"%d":return Number(a[n++]);case"%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return t}}),s=a[n];n<r;s=a[++n])_(s)||!k(s)?o+=" "+s:o+=" "+c(s);return o},e.deprecate=function(n,a){if("undefined"!==typeof t&&!0===t.noDeprecation)return n;if("undefined"===typeof t)return function(){return e.deprecate(n,a).apply(this,arguments)};var i=!1;function r(){if(!i){if(t.throwDeprecation)throw new Error(a);t.traceDeprecation?console.trace(a):console.error(a),i=!0}return n.apply(this,arguments)}return r};var r,o={};function c(t,n){var a={seen:[],stylize:l};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),y(n)?a.showHidden=n:n&&e._extend(a,n),I(a.showHidden)&&(a.showHidden=!1),I(a.depth)&&(a.depth=2),I(a.colors)&&(a.colors=!1),I(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=s),u(a,t,a.depth)}function s(t,e){var n=c.styles[e];return n?"["+c.colors[n][0]+"m"+t+"["+c.colors[n][1]+"m":t}function l(t,e){return t}function d(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,a){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(a,t);return S(i)||(i=u(t,i,a)),i}var r=p(t,n);if(r)return r;var o=Object.keys(n),c=d(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),j(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(O(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(R(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return t.stylize(Date.prototype.toString.call(n),"date");if(j(n))return f(n)}var l,y="",_=!1,b=["{","}"];if(v(n)&&(_=!0,b=["[","]"]),O(n)){var x=n.name?": "+n.name:"";y=" [Function"+x+"]"}return R(n)&&(y=" "+RegExp.prototype.toString.call(n)),C(n)&&(y=" "+Date.prototype.toUTCString.call(n)),j(n)&&(y=" "+f(n)),0!==o.length||_&&0!=n.length?a<0?R(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=_?h(t,n,a,c,o):o.map(function(e){return m(t,n,a,c,e,_)}),t.seen.pop(),g(l,y,b)):b[0]+y+b[1]}function p(t,e){if(I(e))return t.stylize("undefined","undefined");if(S(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return x(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):_(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,a,i){for(var r=[],o=0,c=e.length;o<c;++o)D(e,String(o))?r.push(m(t,e,n,a,String(o),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(m(t,e,n,a,i,!0))}),r}function m(t,e,n,a,i,r){var o,c,s;if(s=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},s.get?c=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(c=t.stylize("[Setter]","special")),D(a,i)||(o="["+i+"]"),c||(t.seen.indexOf(s.value)<0?(c=_(n)?u(t,s.value,null):u(t,s.value,n-1),c.indexOf("\n")>-1&&(c=r?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n"))):c=t.stylize("[Circular]","special")),I(o)){if(r&&i.match(/^\d+$/))return c;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+c}function g(t,e,n){var a=t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return a>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function v(t){return Array.isArray(t)}function y(t){return"boolean"===typeof t}function _(t){return null===t}function b(t){return null==t}function x(t){return"number"===typeof t}function S(t){return"string"===typeof t}function w(t){return"symbol"===typeof t}function I(t){return void 0===t}function R(t){return k(t)&&"[object RegExp]"===V(t)}function k(t){return"object"===typeof t&&null!==t}function C(t){return k(t)&&"[object Date]"===V(t)}function j(t){return k(t)&&("[object Error]"===V(t)||t instanceof Error)}function O(t){return"function"===typeof t}function L(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function V(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(I(r)&&(r=Object({NODE_ENV:"production",BASE_URL:"http://cdn.ccb.micmio.com/"}).NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(r)){var a=t.pid;o[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,a,t)}}else o[n]=function(){};return o[n]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=v,e.isBoolean=y,e.isNull=_,e.isNullOrUndefined=b,e.isNumber=x,e.isString=S,e.isSymbol=w,e.isUndefined=I,e.isRegExp=R,e.isObject=k,e.isDate=C,e.isError=j,e.isFunction=O,e.isPrimitive=L,e.isBuffer=n("d60a");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",E(),e.format.apply(e,arguments))},e.inherits=n("28a0"),e._extend=function(t,e){if(!e||!k(e))return t;var n=Object.keys(e),a=n.length;while(a--)t[n[a]]=e[n[a]];return t};var N="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function z(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);var i=n.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var r=this,o=function(){return i.apply(r,arguments)};e.apply(this,n).then(function(e){t.nextTick(o,null,e)},function(e){t.nextTick(M,e,o)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,a(e)),n}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(N&&t[N]){var e=t[N];if("function"!==typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,a=new Promise(function(t,a){e=t,n=a}),i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);i.push(function(t,a){t?n(t):e(a)});try{t.apply(this,i)}catch(o){n(o)}return a}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),N&&Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,a(t))},e.promisify.custom=N,e.callbackify=z}).call(this,n("f28c"))},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),i=n("0bfb"),r=n("9e1e"),o="toString",c=/./[o],s=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?s(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?i.call(t):void 0)}):c.name!=o&&s(function(){return c.call(this)})},"75fc":function(t,e,n){"use strict";var a=n("a745"),i=n.n(a);function r(t){if(i()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var o=n("774e"),c=n.n(o),s=n("c8bb"),l=n.n(s);function d(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return r(t)||d(t)||u()}n.d(e,"a",function(){return p})},"774e":function(t,e,n){t.exports=n("d2d5")},a745:function(t,e,n){t.exports=n("f410")},aac0:function(t,e,n){"use strict";var a=n("0ca6"),i=n.n(a);i.a},ac6a:function(t,e,n){for(var a=n("cadf"),i=n("0d58"),r=n("2aba"),o=n("7726"),c=n("32e9"),s=n("84f2"),l=n("2b4c"),d=l("iterator"),u=l("toStringTag"),p=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),m=0;m<h.length;m++){var g,v=h[m],y=f[v],_=o[v],b=_&&_.prototype;if(b&&(b[d]||c(b,d,p),b[u]||c(b,u,v),s[v]=p,y))for(g in a)b[g]||r(b,g,a[g],!0)}},b3c2:function(t,e,n){"use strict";n.r(e);for(var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"mx_inventory"}},[n("a-skeleton",{attrs:{loading:t.loadingActive,active:"",paragraph:{rows:20}}},[n("a-tabs",{attrs:{activeKey:t.activeKey},on:{change:t.callback}},[n("a-tab-pane",{key:"1",attrs:{tab:"盘点"}},[n("div",{staticClass:"mx_canteen",staticStyle:{display:"flex"}},[n("div",[t._v("\n                        食堂：\n                    ")]),n("a-radio-group",{staticStyle:{width:"94%"},on:{change:t.onChange},model:{value:t.canteenId,callback:function(e){t.canteenId=e},expression:"canteenId"}},t._l(t.canteen,function(e,a){return n("a-radio",{attrs:{value:e.id}},[t._v(t._s(e.title))])}),1)],1),n("div",{staticClass:"components-input-demo-presuffix"},[n("p",{staticClass:"hmTxt"},[t._v("食材:")]),n("a-input",{ref:"userNameInput",staticClass:"seachBox",staticStyle:{width:"200px"},attrs:{placeholder:"食材名称/批次号"},model:{value:t.mxClassVal,callback:function(e){t.mxClassVal=e},expression:"mxClassVal"}},[t.mxClassVal?n("a-icon",{staticStyle:{color:"#999"},attrs:{slot:"suffix",theme:"filled",type:"close-circle"},on:{click:t.emitEmpty},slot:"suffix"}):t._e()],1),n("a-button",{staticClass:"seachBtn",attrs:{type:"primary"},on:{click:t.mxSeach}},[t._v("搜索")])],1),n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("p",{staticStyle:{margin:"0"}},[t._v("仓库：")]),n("a-select",{staticStyle:{width:"120px"},on:{change:t.mxChangeHouse},model:{value:t.storehouseId,callback:function(e){t.storehouseId=e},expression:"storehouseId"}},t._l(t.storehouse,function(e,a){return n("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.title))])}),1)],1),n("a-button",{attrs:{type:"primary"},on:{click:t.mxSub}},[t._v("提交审核")]),n("a-modal",{attrs:{height:"480px",title:"审核信息"},model:{value:t.valInfo,callback:function(e){t.valInfo=e},expression:"valInfo"}},[n("div",[n("div",{staticStyle:{display:"flex","margin-top":"20px"}},[n("a-textarea",{staticStyle:{width:"460px",height:"90px",resize:"none"},attrs:{placeholder:"填写盘点审核备注信息"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),n("div",{staticStyle:{display:"flex","margin-top":"20px"}},[n("div",[n("div",{staticClass:"clearfix"},[n("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<2?n("div",[n("a-icon",{attrs:{type:"plus"}})],1):t._e()]),n("a-modal",{staticStyle:{display:"flex"},attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1),n("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[n("a-button",{attrs:{icon:"upload"}},[t._v("\n                                            上传图片\n                                        ")])],1)],1)])]),n("template",{slot:"footer"},[n("a-button",{on:{click:function(e){return t.submit("NO")}}},[t._v("取消")]),n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("OK")}}},[t._v("确认")])],1)],2)],1),t.isDataNull?t._e():n("a-table",{staticStyle:{marginTop:"24px"},attrs:{columns:t.columnNull,dataSource:t.dataNull,bordered:"",pagination:!1}}),n("a-skeleton",{attrs:{loading:t.loading,active:"",paragraph:{rows:20}}},[t.isDataNull?n("a-table",{staticStyle:{marginTop:"24px"},attrs:{columns:t.column,dataSource:t.dataMain,bordered:"",pagination:!1},scopedSlots:t._u([{key:"material_single_src",fn:function(t,e,a){return n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("viewer",[n("img",{staticStyle:{width:"60px",heigth:"60px"},attrs:{src:t}})])],1)}},{key:"total",fn:function(e,a,i){return n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("div",{staticStyle:{position:"relative"}},[n("a-input",{staticStyle:{width:"68px",paddingRight:"24px"},attrs:{"data-index":i},on:{keyup:t.mxInpVal}}),n("span",{staticStyle:{position:"absolute",right:"6px",lineHeight:"32px"}},[t._v("斤")])],1)])}},{key:"checkResults",fn:function(e,a,i){return n("div",{},[a.isResult?0==a.result_num?n("p",{staticStyle:{margin:"0"}},[t._v(t._s(a.result_num))]):n("p",{staticStyle:{margin:"0"}},[n("span",{style:a.result_num<0?"color:#ff6600":"color:#33cc00"},[t._v(t._s(a.result_num))]),t._v(" 斤,¥"+t._s(a.result_num_price))]):n("p",{staticStyle:{margin:"0"}},[t._v("-- --")])])}}],null,!1,3730966001)}):t._e()],1)],1),n("a-tab-pane",{key:"2",attrs:{tab:"盘点记录",forceRender:""}},[t.isShowInfo?t._e():n("div",[n("a-form",{attrs:{layout:"inline"}},[n("a-form-item",{attrs:{label:"食堂："}},[n("a-select",{staticStyle:{width:"150px",marginTop:"5px"},attrs:{value:t.canteenRecordKey},on:{change:t.selectChange}},t._l(t.canteenShow,function(e,a){return n("a-select-option",{key:a+1},[t._v(t._s(e.title))])}),1)],1)],1),n("div",{staticClass:"components-input-demo-presuffix"},[n("p",{staticClass:"hmTxt"},[t._v("单号:")]),n("a-input",{ref:"userNameInput",staticClass:"seachBox",staticStyle:{width:"200px"},attrs:{placeholder:"单号"},model:{value:t.mxClassValRecord,callback:function(e){t.mxClassValRecord=e},expression:"mxClassValRecord"}},[t.mxClassValRecord?n("a-icon",{staticStyle:{color:"#999"},attrs:{slot:"suffix",theme:"filled",type:"close-circle"},on:{click:t.emitEmptyRecord},slot:"suffix"}):t._e()],1)],1),n("div",{staticClass:"b",staticStyle:{display:"flex","align-items":"center"}},[n("div",{staticClass:"tabBox"},[n("p",{staticStyle:{margin:"0"}},[t._v("状态：")]),n("a-select",{staticStyle:{width:"120px","margin-right":"40px"},attrs:{value:t.rstate},on:{change:t.plChange}},[n("a-select-option",{attrs:{value:"-1"}},[t._v("全部")]),n("a-select-option",{attrs:{value:"0"}},[t._v("审核中")]),n("a-select-option",{attrs:{value:"1"}},[t._v("审核成功")]),n("a-select-option",{attrs:{value:"2"}},[t._v("审核失败")])],1)],1),n("div",{staticClass:"tabBox",staticStyle:{height:"40px"}},[n("p",{staticStyle:{margin:"0"}},[t._v("日期：")]),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("a-date-picker",{attrs:{disabledDate:t.startDate,showTime:"",format:"YYYY-MM-DD",placeholder:"选择日期"},on:{openChange:t.startOpenChange},model:{value:t.startValue,callback:function(e){t.startValue=e},expression:"startValue"}}),n("div",{staticStyle:{margin:"0 10px"}},[t._v("—")]),n("a-date-picker",{attrs:{disabledDate:t.endDate,showTime:"",format:"YYYY-MM-DD",placeholder:"选择日期",open:t.endOpen},on:{openChange:t.endOpenChange},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}})],1)]),n("a-button",{staticStyle:{"margin-left":"20px","margin-top":"-9px"},attrs:{type:"primary"},on:{click:t.getPlist}},[t._v("查询")]),n("a-button",{staticStyle:{"margin-left":"20px","margin-top":"-9px"},on:{click:t.clearL}},[t._v("重置")])],1),n("a-skeleton",{attrs:{loading:t.loadingRecord,active:"",paragraph:{rows:20}}},[n("a-table",{staticStyle:{marginTop:"24px"},attrs:{columns:t.columns,dataSource:t.dataMains,bordered:"",pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"state_text",fn:function(e,a,i){return n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a.examine||"拒绝"==e?n("div",{staticStyle:{color:"red"}},[t._v(t._s(e))]):n("div",[t._v(t._s(e))])])}},{key:"operation",fn:function(e,a,i){return[n("div",{staticClass:"editable-row-operations"},[n("div",[a.examine?n("a",{staticClass:"mx_operation mx_color",on:{click:function(e){return t.mxShowInventory(a.id)}}},[t._v("去审核")]):n("a",{staticClass:"mx_operation mx_color",on:{click:function(e){return t.mxShowInventory(a.id)}}},[t._v("查看")])])])]}}],null,!1,1276657365)})],1)],1),t.isShowInfo?n("div",[n("a-breadcrumb",{attrs:{separator:" "}},[n("a-breadcrumb-item",[n("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:t.backShowInfo}})],1),n("a-breadcrumb-item",{staticClass:"mx_header_text"},[t._v("查看详情")])],1),n("a-skeleton",{attrs:{loading:t.loadingRecordInfo,active:"",paragraph:{rows:20}}},[n("div",[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",padding:"0 10px"}},[n("p",{staticStyle:{margin:"38px 0 18px"}},[n("span",{staticStyle:{marginRight:"120px"}},[t._v(t._s(t.recordInfo.canteen_title))]),n("span",[t._v("单号："+t._s(t.recordInfo.inventroy_sn))])]),0==t.recordInfo.state?n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("a-button",{staticStyle:{display:"flex","align-items":"center",marginRight:"30px"},attrs:{type:"primary"},on:{click:function(e){return t.mxAgree("同意")}}},[n("a-icon",{staticStyle:{color:"green",fontSize:"16px","font-weight":"bold"},attrs:{type:"check"}}),n("span",[t._v("同意")])],1),n("a-button",{staticStyle:{display:"flex","align-items":"center"},attrs:{type:"primary"},on:{click:function(e){return t.mxAgree("拒绝")}}},[n("a-icon",{staticStyle:{color:"red",fontSize:"16px","font-weight":"bold"},attrs:{type:"close"}}),n("span",[t._v("拒绝")])],1),n("a-modal",{attrs:{title:t.auditTitle,centered:"",maskClosable:!1,maskStyle:{opacity:"0.3",background:"#000",animation:"none"}},on:{ok:t.mxOkAgree,cancel:t.mxCelAgree},model:{value:t.isAgree,callback:function(e){t.isAgree=e},expression:"isAgree"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.auditCause,expression:"auditCause"}],staticStyle:{width:"100%",resize:"none",paddingLeft:"12px"},attrs:{cols:"30",rows:"10",placeholder:t.placeholder},domProps:{value:t.auditCause},on:{input:function(e){e.target.composing||(t.auditCause=e.target.value)}}})])],1):t._e()]),n("a-table",{attrs:{columns:t.columnShowInfo,dataSource:t.dataShowInfo,bordered:"",pagination:!1},scopedSlots:t._u([{key:"material_img_src_one",fn:function(t,e,a){return n("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[n("viewer",[n("img",{staticStyle:{width:"60px",heigth:"60px"},attrs:{src:t}})])],1)}},{key:"unit",fn:function(e,a,i){return n("div",{},[t._v("\n                                    ¥"+t._s(a.unit_price)+"/"+t._s(a.unit)+"\n                                ")])}},{key:"checkResults",fn:function(e,a,i){return[n("div",{staticClass:"editable-row-operations"},[n("div",[n("p",{staticStyle:{margin:"0"}},[n("span",{style:a.result_num<0?"color:#ff6600":"color:#33cc00"},[t._v(t._s(a.result_num))]),t._v(t._s(a.unit)+","),n("span",[t._v("¥"+t._s(a.result_price))])])])])]}}],null,!1,2930089537)}),n("a-row",{staticStyle:{marginTop:"42px"}},[n("a-col",{staticStyle:{paddingLeft:"10px"},attrs:{span:8}},[n("div",[n("p",[t._v("审核备注："),n("span",[t._v(t._s(t.recordInfo.remark))])]),n("p",[t._v("盘  点  人："),n("span",[t._v(t._s(t.recordInfo.nickname))])]),n("p",[t._v("盘点时间："),n("span",[t._v(t._s(t.recordInfo.inventory_time_text))])])]),0!=t.recordInfo.state?n("div",{staticStyle:{marginTop:"50px"}},[n("p",[t._v("当前状态："),n("span",[t._v(t._s(t.recordInfo.state_text))])]),2==t.recordInfo.state?n("p",[t._v("拒绝原因："),n("span",[t._v(t._s(t.recordInfo.audit_remark))])]):n("p",[t._v("审核备注："),n("span",[t._v(t._s(t.recordInfo.audit_remark))])]),n("p",[t._v("审  核  人："),n("span",[t._v(t._s(t.recordInfo.audit_nickname))])]),n("p",[t._v("审核时间："),n("span",[t._v(t._s(t.recordInfo.audit_time_text))])])]):t._e()]),n("a-col",{attrs:{span:16}},[n("div",[n("p",[t._v("食材照片")]),n("viewer",t._l(t.recordInfo.photo_src,function(t){return n("img",{staticStyle:{width:"92px",height:"92px",borderRadius:"5px",marginRight:"20px"},attrs:{src:t.url,alt:""}})}),0)],1)])],1)],1)])],1):t._e()])],1)],1)],1)},i=[],r=n("75fc"),o=(n("ac6a"),n("6b54"),n("c1df")),c=n.n(o),s=(n("3022"),[{title:"食堂",dataIndex:"orderNum",align:"center",width:"8%",scopedSlots:{customRender:"orderNum"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=9,a.attrs.rowSpan=0===n?9:0,a}},{title:"图片",dataIndex:"images",align:"center",width:"12%",scopedSlots:{customRender:"images"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"名称",dataIndex:"name",align:"center",width:"12%",scopedSlots:{customRender:"name"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"仓库",dataIndex:"deposit",align:"center",width:"12%",scopedSlots:{customRender:"deposit"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"批次号",dataIndex:"batchNum",align:"center",width:"12%",scopedSlots:{customRender:"batchNum"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"单价/单位",dataIndex:"unit",align:"center",width:"12%",scopedSlots:{customRender:"unit"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"账面数量",dataIndex:"num",align:"center",width:"12%",scopedSlots:{customRender:"num"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"盘点数量(斤)",dataIndex:"total",align:"center",width:"8%",scopedSlots:{customRender:"total"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}},{title:"盘点结果",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"},customRender:function(t,e,n){var a={children:t,attrs:{}};return a.attrs.colSpan=0,a.attrs.rowSpan=0===n?9:0,a}}]),l=[],d=[{title:"食堂",dataIndex:"canteen_title",align:"center",width:"8%",scopedSlots:{customRender:"canteen_title"}},{title:"图片",dataIndex:"material_single_src",align:"center",width:"12%",scopedSlots:{customRender:"material_single_src"}},{title:"名称",dataIndex:"material_title",align:"center",width:"12%",scopedSlots:{customRender:"material_title"}},{title:"仓库",dataIndex:"storehou_title",align:"center",width:"10%",scopedSlots:{customRender:"storehou_title"}},{title:"批次号",dataIndex:"batch_num",align:"center",width:"12%",scopedSlots:{customRender:"batch_num"}},{title:"单价/单位(/斤)",dataIndex:"order_unit_price",align:"center",width:"12%",scopedSlots:{customRender:"order_unit_price"}},{title:"账面数量",dataIndex:"num",align:"center",width:"12%",scopedSlots:{customRender:"num"}},{title:"盘点数量(斤)",dataIndex:"total",align:"center",width:"10%",scopedSlots:{customRender:"total"}},{title:"盘点结果",dataIndex:"checkResults",align:"center",scopedSlots:{customRender:"checkResults"}}],u=[],p=0;p<2;p++){b=p%2==0?1:2;var f=[{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"},{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"}];u.push({key:p.toString(),canteen_title:"食堂".concat(p+1),material_single_src:f[p],material_title:"包包白",storehou_title:"仓库".concat(b),batch_num:"265365".concat(p),order_unit_price:"15.00",num:"200"})}for(var h=[{title:"食堂",dataIndex:"canteen_title",align:"center",width:"10%",scopedSlots:{customRender:"canteen_title"}},{title:"单号",dataIndex:"inventroy_sn",align:"center",width:"15%",scopedSlots:{customRender:"inventroy_sn"}},{title:"种类数量",dataIndex:"cate_num",align:"center",width:"15%",scopedSlots:{customRender:"cate_num"}},{title:"当前状态",dataIndex:"state_text",align:"center",width:"15%",scopedSlots:{customRender:"state_text"}},{title:"盘点人",dataIndex:"nickname",align:"center",width:"15%",scopedSlots:{customRender:"nickname"}},{title:"盘点时间",dataIndex:"inventory_time_text",align:"center",width:"15%",scopedSlots:{customRender:"inventory_time_text"}},{title:"操作按钮",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}],m=[],g=0;g<2;g++)m.push({key:g.toString(),canteen_title:"食堂".concat(g+1),inventroy_sn:"561656441566".concat(g),cate_num:"1".concat(g),state_text:"1".concat(g),nickname:"阿".concat(g),inventory_time_text:"2019-07-02    15:23"});for(var v=[{title:"序号",dataIndex:"orderNums",align:"center",width:"8%",scopedSlots:{customRender:"orderNums"}},{title:"图片",dataIndex:"material_img_src_one",align:"center",width:"12%",scopedSlots:{customRender:"material_img_src_one"}},{title:"名称",dataIndex:"material_title",align:"center",width:"12%",scopedSlots:{customRender:"material_title"}},{title:"仓库",dataIndex:"storehou_title",align:"center",width:"12%",scopedSlots:{customRender:"storehou_title"}},{title:"批次号",dataIndex:"batch_num",align:"center",width:"12%",scopedSlots:{customRender:"batch_num"}},{title:"单价/单位",dataIndex:"unit",align:"center",width:"12%",scopedSlots:{customRender:"unit"}},{title:"账面数量",dataIndex:"paper_num",align:"center",width:"12%",scopedSlots:{customRender:"paper_num"}},{title:"盘点数量",dataIndex:"inventory_num",align:"center",width:"8%",scopedSlots:{customRender:"inventory_num"}},{title:"盘点结果",dataIndex:"checkResults",align:"center",scopedSlots:{customRender:"checkResults"}}],y=[],_=0;_<2;_++){var b;b=_%2==0?1:2;f=[{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"},{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"}];y.push({key:_.toString(),orderNums:"".concat(_+1),material_img_src_one:f[_],material_title:"包包白",storehou_title:"仓库".concat(b),batch_num:"265365".concat(_),unit:"￥15.00/斤",paper_num:"200斤",inventory_num:"202.35斤"})}var x={data:function(){var t=this;return{activeKey:"1",loadingActive:!1,moment:c.a,canteenId:"",storehouseId:"",loading:!0,loadingRecord:!0,column:d,dataMain:u,columnNull:s,dataNull:l,isDataNull:!0,canteen:[],canteenShow:[],storehouse:[],valInfo:!1,headers:{authorization:"authorization-text"},canteenRecordKey:"全部",canteenRecordId:0,fileList:[],previewVisible:!1,previewImage:"",mxClassVal:"",mxClassValRecord:"",remark:"",rstate:"-1",startRecord:"",endRecord:"",startValue:null,endValue:null,endOpen:!1,columns:h,dataMains:m,recordInfo:{},isShowInfo:!1,loadingRecordInfo:!0,dataShowInfoId:"",columnShowInfo:v,dataShowInfo:y,pagination:{pageSize:15,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录 第 ").concat(t.pagination.current," / ").concat(Math.ceil(e/t.pagination.pageSize)," 页")}},auditState:"",auditTitle:"",placeholder:"",auditCause:"",isAgree:!1,isRefuse:!1}},created:function(){this.getCanteen(),this.getInventoryRecord("","","","","")},watch:{startValue:function(t){t&&(this.startRecord=c()(t._d).format("YYYY-MM-DD"))},endValue:function(t){t&&(this.endRecord=c()(t._d).format("YYYY-MM-DD"))}},methods:{callback:function(t){this.activeKey=t,this.loadingActive=!0,"1"==t?this.getCanteen():(this.loadingRecord=!0,this.getInventoryRecord("","","","",""))},onChange:function(t){this.canteenId=t.target.value,this.getStorehouse(t.target.value),this.loading=!0,this.getInventoryList("",t.target.value,"")},handleTableChange:function(t,e,n){this.pagination.pageSize=t.pageSize,this.pagination.current=t.current,this.loadingRecord=!0,this.getInventoryRecord("","","","","")},getCanteen:function(){var t=this;this.$get("api/school/canteen",{}).then(function(e){if(0==e.data.code){t.canteenShow=e.data.data;var n={id:0,title:"全部"};t.canteenShow.splice(0,0,n);var a=[];t.canteenShow.forEach(function(t,e){0!=e&&a.push(t)}),t.canteen=a,t.canteenId=t.canteen[0].id,t.loadingActive=!1,t.getStorehouse(t.canteen[0].id),t.loading=!0,t.getInventoryList("",t.canteen[0].id,"")}else console.log(22)})},selectChange:function(t){this.canteenRecordKey=t,this.canteenRecordId=this.canteenShow[t-1].id},getStorehouse:function(t){var e=this;this.$get("api/scale/storehouse?canteen_id="+t).then(function(t){if(0==t.data.code){e.storehouse=t.data.data,e.storehouseId=0;var n={id:0,title:"全部"};e.storehouse.splice(0,0,n)}else console.log(22)})},mxChangeHouse:function(t){var e;this.storehouseId=t,e=0==t?"":t,this.loading=!0,this.getInventoryList(e,this.canteenId,"")},mxSeach:function(){var t;"-1"==this.foodState||this.foodState,t=0==this.storehouseId?"":this.storehouseId,this.loading=!0,this.getInventoryList(t,this.canteenId,this.mxClassVal)},emitEmpty:function(){this.$refs.userNameInput.focus(),this.mxClassVal=""},getInventoryList:function(t,e,n){var a=this;this.$get("api/school/stock?storehou_id="+t+"&canteen_id="+e+"&keyword="+n).then(function(t){0==t.data.code?(t.data.data.forEach(function(t){t.isResult=!1,t.result_num=0,t.result_num_price=0,t.key=t.id,t.material_single_src||(t.material_single_src="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")}),a.dataMain=t.data.data,a.loading=!1):console.log(22)})},mxInpVal:function(t){var e=this,n={url:"api/school/stock",method:"post",data:{id:this.dataMain[t.target.dataset.index].id,stock_num:t.target.value}};this.$apiAxiox(n).then(function(n){0==n.data.code?(e.dataMain[t.target.dataset.index].isResult=!0,e.dataMain[t.target.dataset.index].result_num=n.data.data.result_num,e.dataMain[t.target.dataset.index].result_num_price=n.data.data.result_num_price):e.$message.success(n.data.msg)})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){this.previewImage=t.url||t.thumbUrl,this.previewVisible=!0},handleChange:function(t){var e=Object(r["a"])(t.fileList);e=e.slice(-2),e=e.map(function(t){return t.response&&(t.url=t.response.data.url),t}),this.fileList=e},mxSub:function(){this.valInfo=!this.valInfo},submit:function(t){var e=this;if(this.valInfo=!this.valInfo,"OK"==t){var n=[];this.fileList.forEach(function(t){n.push(t.response.data.id)});var a={url:"api/school/submit/stock",method:"post",data:{remark:this.remark,photo:n.join(",")}};this.$apiAxiox(a).then(function(t){var n;0==t.data.code?(e.remark="",e.fileList=[],e.$message.success("提交盘点审核成功"),n=0==e.storehouseId?"":e.storehouseId,e.loading=!0,e.getInventoryList(n,e.canteenId,e.mxClassVal)):(e.remark="",e.fileList=[],e.$message.warning(t.data.msg))})}},getInventoryRecord:function(t,e,n,a,i){var r=this,o=this;this.$get("api/school/inventory?page="+this.pagination.current+"&keywords="+t+"&canteen_id="+e+"&state="+n+"&begin_time="+a+"&end_time="+i).then(function(t){0==t.data.code?(o.pagination.pageSize=t.data.data.per_page,o.pagination.total=t.data.data.total,t.data.data.data.forEach(function(t){t.key=t.id,0==t.state?t.examine=!0:t.examine=!1}),r.dataMains=t.data.data.data,r.loadingRecord=!1,r.loadingActive=!1):console.log(22)})},startDate:function(t){var e=this.endValue;return!(!t||!e)&&t.valueOf()>e.valueOf()},endDate:function(t){var e=this.startValue;return!(!t||!e)&&e.valueOf()>=t.valueOf()},startOpenChange:function(t){t||(this.endOpen=!0)},endOpenChange:function(t){this.endOpen=t},emitEmptyRecord:function(){this.$refs.userNameInput.focus(),this.mxClassValRecord=""},plChange:function(t){this.rstate=t},clearL:function(){this.mxClassValRecord="",this.canteenRecordId=0,this.canteenRecordKey="全部",this.rstate="-1";var t="";this.startRecord="",this.endRecord="",this.startValue=null,this.endValue=null,this.loadingRecord=!0,this.getInventoryRecord(this.mxClassValRecord,this.canteenRecordId,t,this.startRecord,this.endRecord)},getPlist:function(){var t;t="-1"==this.rstate?"":this.rstate,this.loadingRecord=!0,this.getInventoryRecord(this.mxClassValRecord,this.canteenRecordId,t,this.startRecord,this.endRecord)},mxShowInventory:function(t){var e=this;this.isShowInfo=!0,this.loadingRecordInfo=!0,this.$get("api/school/inventory/"+t).then(function(t){if(0==t.data.code){if(t.data.data.batchs.forEach(function(t,e){t.key=t.id,t.orderNums=e+1}),t.data.data.photo_src.length<1){var n=[{url:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}];t.data.data.photo_src=n}e.dataShowInfoId=t.data.data.id,e.dataShowInfo=t.data.data.batchs,e.recordInfo=t.data.data,e.loadingRecordInfo=!1}else console.log(22)})},backShowInfo:function(){var t;this.isShowInfo=!1,t="-1"==this.rstate?"":this.rstate,this.loadingRecord=!0,this.getInventoryRecord(this.mxClassValRecord,this.canteenRecordId,t,this.startRecord,this.endRecord)},mxAgree:function(t){"拒绝"==t?(this.auditState="2",this.auditTitle="拒绝原因",this.placeholder="请认真核对"):(this.auditState="1",this.auditTitle="审核备注",this.placeholder="快及时处理吧"),this.isAgree=!0},mxOkAgree:function(){var t=this;this.isAgree=!1;var e={url:"api/school/inventory/"+this.dataShowInfoId,method:"put",data:{audit_type:this.auditState,audit_remark:this.auditCause}};this.$apiAxiox(e).then(function(e){var n;0==e.data.code?(t.auditState="",t.auditCause="",t.$message.success(e.data.msg),t.isShowInfo=!1,n="-1"==t.rstate?"":t.rstate,t.loadingRecord=!0,t.getInventoryRecord(t.mxClassValRecord,t.canteenRecordId,n,t.startRecord,t.endRecord)):t.$message.warning(e.data.msg)})},mxCelAgree:function(){this.isAgree=!1,this.auditCause=""},mxRefuse:function(){this.isRefuse=!0},mxOkRefuse:function(){this.$message.success("库存报损审核成功"),this.isRefuse=!1},mxCelRefuse:function(){this.isRefuse=!1}}},S=x,w=(n("aac0"),n("2877")),I=Object(w["a"])(S,a,i,!1,null,"2315778d",null);e["default"]=I.exports},c8bb:function(t,e,n){t.exports=n("54a1")},d60a:function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-ca11509c.d558124e.js.map