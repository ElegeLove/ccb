(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85905574"],{"3de4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mx_ckBook"}},[a("a-skeleton",{attrs:{loading:t.pageLoad,active:"",paragraph:{rows:20}}},[a("a-tabs",{attrs:{activeKey:t.keyNum},on:{change:t.keyChange}},[a("a-tab-pane",{key:"1",attrs:{tab:"每周食谱"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.addCK,expression:"!addCK"}],staticClass:"rcps"},[a("div",{staticClass:"ctnBox"},[a("p",[t._v("食堂：")]),a("a-radio-group",{staticStyle:{width:"94%"},on:{change:function(e){return t.rChange(t.ctnKey)}},model:{value:t.ctnKey,callback:function(e){t.ctnKey=e},expression:"ctnKey"}},t._l(t.ctnList,function(e,i){return a("a-radio",{attrs:{value:e.id}},[t._v(t._s(e.title))])}),1)],1),a("div",{staticClass:"wBox",staticStyle:{"margin-top":"20px"}},[a("p",[t._v("周期：")]),a("p",{staticClass:"brd"},[t._v(t._s(t.week.one)+" — "+t._s(t.week.seven))]),a("a-button",{staticClass:"prev",staticStyle:{"margin-left":"20px",color:"#02bb72"},attrs:{type:"ghost"},on:{click:function(e){return t.changeWk("add")}}},[a("a-icon",{attrs:{type:"left"}}),t._v("上一周")],1),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.changeWk("zero")}}},[t._v("本周")]),a("a-button",{staticClass:"next",staticStyle:{"margin-left":"20px",color:"#02bb72"},attrs:{type:"ghost"},on:{click:function(e){return t.changeWk("reduce")}}},[t._v("下一周"),a("a-icon",{attrs:{type:"right"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.iBtn,expression:"iBtn"}],staticClass:"actBox"},[a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"form",type:"primary"},on:{click:function(e){return t.edit("e")}}},[t._v("编辑食谱")]),a("a-button",{staticStyle:{"margin-right":"80px"},attrs:{type:"primary"},on:{click:function(e){return t.edit("u")}}},[t._v(t._s(t.btnState))]),a("a-button",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.edit("c")}}},[t._v("复制食谱")]),a("div",{staticClass:"btnBox"},[a("span",[t._v("打印")]),a("span",{staticClass:"line"}),a("span",[t._v("导出")])])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.iBtn,expression:"!iBtn"}],staticClass:"actBox"},[a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"form",type:"primary"},on:{click:function(e){return t.editB("f")}}},[t._v("取消编辑")]),a("a-button",{staticStyle:{"margin-right":"80px"},attrs:{type:"primary"},on:{click:function(e){return t.editB("p")}}},[t._v("保存")]),a("a-button",{staticStyle:{"margin-right":"20px"},on:{click:function(e){return t.editB("c")}}},[t._v("清空")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.initial,expression:"initial"}],staticClass:"tabBook"},[a("a-table",{attrs:{bordered:"",dataSource:t.dataSource,columns:t.columns,loading:t.loading,pagination:!1},scopedSlots:t._u([t._l(7,function(e){return{key:"ct"+(e+1),fn:function(i,s){return a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},[t._l(s.name[e-1],function(i,o){return a("div",[t.isModify?a("p",{class:{cBor:t.isExpire[e-1]}},[t._v(t._s(i.title)),t.isExpire[e-1]?a("span",{staticStyle:{"margin-left":"5px",cursor:"pointer"},on:{click:function(a){return t.reFood(s.name,o,e)}}},[t._v("X")]):t._e()]):a("p",[t._v(t._s(i.title))])])}),t.isExpire[e-1]?a("div",[s.name[e-1].length>0?a("p",{directives:[{name:"show",rawName:"v-show",value:t.isModify,expression:"isModify"}],staticStyle:{border:"1px solid #C9C9C9","border-radius":"5px",padding:"0 5px","margin-top":"5px",cursor:"pointer"},on:{click:function(a){return t.addCk(s.name[e-1],e,s)}}},[a("a-icon",{attrs:{type:"plus"}}),t._v("添加菜品")],1):a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.isModify,expression:"isModify"}],staticStyle:{"font-size":"25px","font-weight":"bold",color:"#999",cursor:"pointer"},attrs:{type:"plus"},on:{click:function(a){return t.addCk(s.name[e-1],e,s)}}})],1):t._e()],2)}}}),{key:"footer",fn:function(e){return[a("div",{staticClass:"tWrap",staticStyle:{display:"flex","justify-content":"space-around"}},[t.isModify?t._e():a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("营养师："+t._s(t.btmTxt.dietitian))]),t.isModify?a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{"margin-bottom":"0","line-height":"31px"}},[t._v("营养师：")]),a("a-input",{staticClass:"Inp",class:{on:1==t.col},attrs:{placeholder:"填写营养师姓名"},on:{change:t.InpTxt},model:{value:t.btmTxt.dietitian,callback:function(e){t.$set(t.btmTxt,"dietitian",e)},expression:"btmTxt.dietitian"}})],1):t._e(),t.isModify?a("div",{staticStyle:{display:"flex"}},[t.isModify?a("p",{staticStyle:{"margin-bottom":"0","line-height":"31px"}},[t._v("制谱人：")]):t._e(),t.isModify?a("a-input",{staticClass:"Inp",attrs:{disabled:t.isE},model:{value:t.btmTxt.producer,callback:function(e){t.$set(t.btmTxt,"producer",e)},expression:"btmTxt.producer"}}):t._e()],1):t._e(),t.isModify?a("div",{staticStyle:{display:"flex"}},[t.isModify?a("p",{staticStyle:{"margin-bottom":"0","line-height":"31px"}},[t._v("审核人：")]):t._e(),t.isModify?a("a-input",{staticClass:"Inp",attrs:{disabled:t.isE},model:{value:t.btmTxt.name,callback:function(e){t.$set(t.btmTxt,"name",e)},expression:"btmTxt.name"}}):t._e()],1):t._e(),t.isModify?t._e():a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("制谱人："+t._s(t.btmTxt.producer))]),t.isModify?t._e():a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("审核人："+t._s(t.btmTxt.name))])])]}}],null,!0)},[a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle"},slot:"customTitle"},[a("p",{staticStyle:{position:"absolute","margin-bottom":"0",width:"30px",left:"-9px",top:"-17px"}},[t._v("日期")]),a("p",{staticStyle:{position:"absolute",width:"41px",height:"1px",background:"#999",transform:"rotateZ(-45deg)","margin-left":"10px","margin-top":"10px",left:"-7px",top:"-9px"}}),a("p",{staticStyle:{position:"absolute","text-align":"right","margin-bottom":"0",width:"30px",left:"23px"}},[t._v("餐次")])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle2"},slot:"customTitle2"},[a("p",[t._v("星期一")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[0]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle3"},slot:"customTitle3"},[a("p",[t._v("星期二")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[1]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle4"},slot:"customTitle4"},[a("p",[t._v("星期三")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[2]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle5"},slot:"customTitle5"},[a("p",[t._v("星期四")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[3]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle6"},slot:"customTitle6"},[a("p",[t._v("星期五")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[4]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle7"},slot:"customTitle7"},[a("p",[t._v("星期六")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[5]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle8"},slot:"customTitle8"},[a("p",[t._v("星期日")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[6]))])])])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.addCK,expression:"addCK"}],staticClass:"addCk"},[a("div",{staticClass:"back",on:{click:function(e){return t.back()}}},[a("a-icon",{staticStyle:{"font-size":"25px","font-weight":"bold","margin-right":"10px"},attrs:{type:"arrow-left"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.sFood,expression:"sFood"}]},[t._v("查看详情")]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.sFood,expression:"!sFood"}]},[t._v("创建菜品")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.sFood,expression:"sFood"}],staticClass:"sFood"},[a("div",{staticClass:"timeBox",staticStyle:{display:"flex"}},[a("p",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.dayWeek))]),a("p",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.oWeek))]),0==t.fNum?a("p",[t._v("早餐")]):t._e(),1==t.fNum?a("p",[t._v("午餐")]):t._e(),2==t.fNum?a("p",[t._v("晚餐")]):t._e(),3==t.fNum?a("p",[t._v("加餐")]):t._e()]),a("div",{staticClass:"cBox"},[a("p",[t._v("菜品：")]),a("a-input",{staticStyle:{width:"300px",margin:"0 20px"},attrs:{placeholder:"菜品名称"},model:{value:t.foodName,callback:function(e){t.foodName=e},expression:"foodName"}}),a("a-button",{on:{click:t.seachFood}},[t._v("搜索")])],1),a("div",{staticClass:"btn",staticStyle:{display:"flex",border:"1px solid #999",width:"220px","border-radius":"5px","align-items":"center","margin-top":"20px"}},[a("div",{staticClass:"l",class:{on:0==t.btnI},staticStyle:{padding:"5px 0",width:"50%","text-align":"center",cursor:"pointer"},on:{click:function(e){return t.bClick(0)}}},[t._v("常用菜品")]),a("div",{staticClass:"r",class:{on:1==t.btnI},staticStyle:{padding:"5px 0",width:"50%","text-align":"center",cursor:"pointer"},on:{click:function(e){return t.bClick(1)}}},[t._v("全部菜品")])]),a("div",{staticClass:"wrap",staticStyle:{display:"flex","align-items":"center","margin-top":"40px"}},[a("p",{staticStyle:{margin:"0 0 20px 0",width:"82px"}},[t._v("已选：")]),a("div",{staticClass:"food",staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.foodL,function(e,i){return a("div",{staticClass:"f",staticStyle:{display:"flex","align-items":"center",border:"1px solid #ccc","min-width":"50px","margin-right":"20px","margin-bottom":"20px","border-radius":"3px"}},[a("p",{staticStyle:{margin:"0",padding:"2px 3px"}},[t._v(t._s(e.title))]),a("a-icon",{staticStyle:{margin:"0 5px"},attrs:{type:"close"},on:{click:function(e){return t.reFod(i)}}})],1)}),0)]),a("ul",{staticStyle:{display:"flex","margin-top":"60px","padding-left":"0"}},t._l(t.foodList,function(e,i){return a("li",{staticClass:"block",class:{on:t.sBtnI==i},staticStyle:{"margin-right":"20px","list-style":"none",cursor:"pointer"},on:{click:function(a){return t.fLiClick(i,e.id)}}},[t._v(t._s(e.title))])}),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.hasFod,expression:"hasFod"}],staticClass:"Img",staticStyle:{display:"flex","flex-direction":"column","align-items":"center","margin-top":"80px"}},[a("img",{staticStyle:{width:"180px",height:"180px"},attrs:{src:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1565947892&di=2fae88c09ec2947064b5b53e81f58a10&src=http://5b0988e595225.cdn.sohucs.com/images/20171218/c8b036db72f8498dbd80cc9dbd3cd5cd.jpeg",alt:""}}),a("p",{directives:[{name:"show",rawName:"v-show",value:t.seachS,expression:"seachS"}],staticStyle:{"margin-top":"15px"}},[t._v("当前无常用菜品，"),a("span",{staticStyle:{color:"#02bb72",cursor:"pointer"},on:{click:t.all}},[t._v("快去全部菜品选择吧")])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.seachS,expression:"!seachS"}],staticStyle:{"margin-top":"15px"}},[t._v("菜品库里没有"),a("span",{staticStyle:{color:"#02bb72"}},[t._v("“包包白”")]),t._v("相关的菜品，"),a("span",{staticStyle:{color:"#02bb72",cursor:"pointer"},on:{click:t.addF}},[t._v("请点击此处手动创建")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasFod,expression:"!hasFod"}],staticClass:"img"},[a("div",{staticClass:"iWrap",staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},t._l(t.fodList,function(e,i){return a("div",{staticClass:"fod",on:{click:function(a){return t.lookCk(i,e.excipient,e.materials)}}},[a("div",{staticClass:"t"},[e.state?a("a-icon",{staticStyle:{position:"absolute",top:"5px",right:"5px","font-size":"25px",cursor:"pointer"},attrs:{type:"check-circle"},on:{click:function(t){t.stopPropagation()}}}):a("a-icon",{staticStyle:{position:"absolute",top:"5px",right:"5px","font-size":"25px",cursor:"pointer"},attrs:{type:"plus-circle"},on:{click:function(a){return a.stopPropagation(),t.addFood(e,i,e.state)}}}),a("img",{attrs:{src:e.url,alt:""}})],1),a("div",{staticClass:"b"},[a("p",[t._v(t._s(e.title))]),a("p",[t._v("本月已排"),a("span",{staticStyle:{color:"#02bb72"}},[t._v(t._s(e.num))]),t._v("次")]),a("p",[t._v("最近排期："+t._s(e.time))])])])}),0),a("a-pagination",{attrs:{simple:"",defaultCurrent:t.pKey,total:t.pTotal},on:{change:t.onpChange}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.sFood,expression:"!sFood"}],staticClass:"aFood"},[a("div",{staticClass:"fBox"},[a("a-form",{attrs:{form:t.form}},[a("div",{staticClass:"mx_ckBook"},[a("p",{attrs:{calss:"iMt"}},[t._v("名称")]),a("a-form-item",[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fName",{rules:[{required:!0,message:"请填写菜品名称"}]}],expression:"[\n                                                'fName',\n                                                {\n                                                  rules: [\n                                                    { required: true, message: '请填写菜品名称'}\n                                                  ]\n                                                }\n\t\t\t\t\t\t\t\t\t\t\t]"}],attrs:{placeholder:"填写菜品名称"}})],1)],1),a("div",{staticClass:"Logo on"},[a("p",{staticStyle:{width:"100%"}},[t._v("证件图片")]),a("div",{staticClass:"img",class:{on:1==t.rEShow2}},[a("img",{attrs:{src:"",alt:""}})]),a("a-form-item",[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["upload",{rules:[{required:!0,message:"请填上传图片"}],valuePropName:"fileList",getValueFromEvent:t.normFile}],expression:"['upload', {\n                                                        rules: [\n                                                            { required: true, message: '请填上传图片'}\n                                                        ],\n                                                        valuePropName: 'fileList',\n                                                        getValueFromEvent: normFile,\n                                                    }]"}],staticClass:"mx_right",attrs:{showUploadList:!1,multiple:!0,headers:t.headers,name:"logo",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","list-type":"picture"},on:{change:t.upImg}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 上传图片\n                                                    ")],1)],1)],1)],1)],1),a("div",{staticClass:"mx_ckBook"},[a("p",{attrs:{calss:"iMt"}},[t._v("类别")]),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fNature",{rules:[{required:!0,message:"请选择菜品类别"}]}],expression:"['fNature', {rules: [{ required: true, message: '请选择菜品类别' }]}]"}],attrs:{placeholder:"请选择菜品类别"}},[a("a-select-option",{attrs:{value:"jack"}},[t._v("Jack")]),a("a-select-option",{attrs:{value:"lucy"}},[t._v("Lucy")]),a("a-select-option",{attrs:{value:"disabled"}},[t._v("Disabled")]),a("a-select-option",{attrs:{value:"Yiminghe"}},[t._v("yiminghe")])],1)],1)],1),a("div",{staticClass:"mx_ckBook"},[a("p",{attrs:{calss:"iMt"}},[t._v("主食材")]),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sFood",{rules:[{required:!0,message:"请添加主食材",type:"array"}]}],expression:"[\n                                                'sFood',\n                                                {rules: [{ required: true, message: '请添加主食材', type: 'array' }]}]"}],attrs:{mode:"multiple",placeholder:"请添加主食材"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"search"},slot:"suffixIcon"}),a("a-select-option",{attrs:{value:"red"}},[t._v("\n                                                    Red\n                                                ")]),a("a-select-option",{attrs:{value:"green"}},[t._v("\n                                                    Green\n                                                ")]),a("a-select-option",{attrs:{value:"blue"}},[t._v("\n                                                    Blue\n                                                ")])],1)],1)],1),a("div",{staticClass:"mx_ckBook"},[a("p",{attrs:{calss:"iMt"}},[t._v("辅食材")]),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sFood2",{rules:[{required:!0,message:"请添加辅食材",type:"array"}]}],expression:"[\n                                                'sFood2',\n                                                {rules: [{ required: true, message: '请添加辅食材', type: 'array' }]}]"}],attrs:{mode:"multiple",placeholder:"请添加辅食材"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"search"},slot:"suffixIcon"}),a("a-select-option",{attrs:{value:"red"}},[t._v("\n                                                    Red\n                                                ")]),a("a-select-option",{attrs:{value:"green"}},[t._v("\n                                                    Green\n                                                ")]),a("a-select-option",{attrs:{value:"blue"}},[t._v("\n                                                    Blue\n                                                ")])],1)],1)],1),a("a-button",{staticClass:"mx_smBtn",attrs:{type:"primary"},on:{click:t.check}},[t._v("添加至食谱")])],1)],1)])]),a("a-modal",{attrs:{title:"切换提示",onOk:"handleOk"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("p",[t._v("当前编辑食谱未保存，是否保存后再进行切换？")]),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("\n                                保存\n                            ")])],1)],2),a("a-modal",{attrs:{title:"菜品食材"},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[a("div",{staticClass:"zBox"},[a("p",[t._v("主食材："+t._s(t.zFood))])]),a("div",{staticClass:"fBox"},[a("p",[t._v("辅食材："+t._s(t.fFood))])]),a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{type:"primary"},on:{click:t.backC}},[t._v("取消")])],1)],2),a("a-modal",{attrs:{title:t.v3Title,onOk:"v3Clisk"},model:{value:t.visible3,callback:function(e){t.visible3=e},expression:"visible3"}},[a("a-textarea",{directives:[{name:"show",rawName:"v-show",value:"提交审核"==t.btnState,expression:"btnState == '提交审核'"}],staticStyle:{height:"150px",resize:"none"},attrs:{placeholder:"这是6月5日至6月17日的食谱，请查收~"},model:{value:t.refuse,callback:function(e){t.refuse=e},expression:"refuse"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"审核失败"==t.btnState,expression:"btnState == '审核失败'"}],staticClass:"wrap",staticStyle:{height:"150px"}},[a("div",{staticClass:"sC"},[a("p",[t._v("申请人："+t._s(t.exData.aName))]),a("p",[t._v("申请备注："+t._s(t.exData.aTxt))])]),a("div",{staticClass:"fail"},[a("p",[t._v("审核人："+t._s(t.exData.eName))]),a("p",[t._v("未通过原因："+t._s(t.exData.eTxt))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"审核中"==t.btnState,expression:"btnState == '审核中'"}],staticClass:"wrap",staticStyle:{height:"150px"}},[a("div",{staticClass:"sC"},[a("p",[t._v("申请人："+t._s(t.exData.aName))]),a("p",[t._v("申请备注："+t._s(t.exData.aTxt))])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"审核通过"==t.btnState,expression:"btnState == '审核通过'"}],staticClass:"wrap",staticStyle:{height:"150px"}},[a("div",{staticClass:"sC"},[a("p",[t._v("申请人："+t._s(t.exData.aName))]),a("p",[t._v("申请备注："+t._s(t.exData.aTxt))]),a("p",[t._v("审核人："+t._s(t.exData.eName))]),a("p",[t._v("审核备注："+t._s(t.exData.eTxt))])])]),a("template",{slot:"footer"},[a("a-button",{on:{click:t.v3back}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.v3Clisk(t.btnState)}}},[t._v(t._s(t.btnTxt))])],1)],2),a("a-modal",{attrs:{title:"选择周期",onOk:"ckTime"},model:{value:t.visible4,callback:function(e){t.visible4=e},expression:"visible4"}},[a("div",{staticClass:"wrap",staticStyle:{height:"150px",display:"flex","align-items":"center","justify-content":"center"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("复制至：")]),a("a-range-picker",{on:{change:t.onChange}})],1),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.tBack}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.ckTime}},[t._v("\n                                确定\n                            ")])],1)],2)],1),a("a-tab-pane",{key:"2",attrs:{tab:"全部食谱",forceRender:""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.power,expression:"!power"}],staticClass:"power"},[a("a-form",{attrs:{form:t.form2}},[a("div",{staticClass:"t"},[a("div",{staticClass:"tabBox"},[a("p",[t._v("食堂：")]),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["selectF",{initialValue:t.rState}],expression:"['selectF',{initialValue: rState}]"}],staticStyle:{width:"120px","margin-right":"40px"}},t._l(t.rSList,function(e,i){return a("a-select-option",{key:i+1},[t._v(t._s(e.title))])}),1)],1)],1)]),a("div",{staticClass:"b"},[a("div",{staticClass:"tabBox"},[a("p",[t._v("状态：")]),a("a-form-item",{staticStyle:{width:"220px"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["selectS",{initialValue:t.rstate}],expression:"['selectS',{initialValue: rstate}]"}],staticStyle:{width:"120px","margin-right":"40px"}},t._l(t.rList,function(e,i){return a("a-select-option",{key:i+1},[t._v(t._s(e.title))])}),1)],1)],1),a("div",{staticClass:"tabBox"},[a("p",[t._v("日期：")]),a("a-form-item",[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["rpicker"],expression:"['rpicker']"}]})],1)],1),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.getPlist}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:t.clearL}},[t._v("重置")])],1)]),a("div",{staticClass:"oBox",staticStyle:{display:"flex","align-items":"center","margin-top":"30px"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.newFList}},[a("a-icon",{attrs:{type:"form"}}),t._v("新建食谱\n                            ")],1),a("div",{staticClass:"open",staticStyle:{display:"flex","margin-left":"30px"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("公示到家长端：")]),a("a-switch",{attrs:{checked:t.oNum,checkedChildren:"开启",unCheckedChildren:"关闭",defaultChecked:""},on:{change:t.open}})],1)],1),a("a-table",{staticClass:"hBox",staticStyle:{"margin-top":"30px"},attrs:{loading:t.kTwoLoad,bordered:"",dataSource:t.dataSource2,columns:t.columns2,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"state",fn:function(e,i){return a("div",{},[a("p",{directives:[{name:"show",rawName:"v-show",value:"待审核"==i.state,expression:"record.state == '待审核'"}],staticStyle:{margin:"0",color:"#ff6600"}},[t._v(t._s(i.state))]),a("p",{directives:[{name:"show",rawName:"v-show",value:"待审核"!=i.state,expression:"record.state != '待审核'"}],staticStyle:{margin:"0"}},[t._v(t._s(i.state))])])}},{key:"btn",fn:function(e,i,s){return[a("div",{staticClass:"editable-row-operations"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"待审核"!=i.state,expression:"record.state != '待审核'"}],staticStyle:{display:"flex","justify-content":"center"}},[a("a",{staticClass:"mx_updata mx_color",on:{click:function(e){return t.kState("OK",i)}}},[t._v("查看")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"待审核"==i.state,expression:"record.state == '待审核'"}],staticStyle:{display:"flex","justify-content":"center"}},[a("a",{staticClass:"mx_updata mx_color",on:{click:function(e){return t.kState("NO",i)}}},[t._v("去审核")])])])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.power,expression:"power"}],staticClass:"power"},[a("div",{staticClass:"back",on:{click:function(e){return t.kback()}}},[a("a-icon",{staticStyle:{"font-size":"25px","font-weight":"bold","margin-right":"10px"},attrs:{type:"arrow-left"}}),a("p",[t._v("食谱审核")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.acShow,expression:"acShow"}],staticClass:"acBox",staticStyle:{"margin-top":"20px"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.rOk("OK")}}},[a("a-icon",{attrs:{type:"check"}}),t._v("通过\n                            ")],1),a("a-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){return t.rOk("NO")}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"close"}}),t._v("拒绝\n                            ")],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.acShow,expression:"!acShow"}],staticClass:"acBox",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"t",staticStyle:{display:"flex","align-items":"center","margin-top":"0"}},[a("p",{staticStyle:{width:"100px"}},[t._v("审核状态："+t._s(t.eMag.state))]),a("p",{directives:[{name:"show",rawName:"v-show",value:"通过"==t.eMag.state,expression:"eMag.state == '通过'"}],staticStyle:{"margin-left":"30px"}},[t._v("审核备注："+t._s(t.eMag.msg))]),a("p",{directives:[{name:"show",rawName:"v-show",value:"拒绝"==t.eMag.state,expression:"eMag.state == '拒绝'"}],staticStyle:{"margin-left":"30px"}},[t._v("拒绝原因："+t._s(t.eMag.msg))])]),a("div",{staticClass:"b",staticStyle:{display:"flex","align-items":"center","margin-top":"0"}},[a("p",{staticStyle:{width:"100px"}},[t._v("审核人："+t._s(t.eMag.name))]),a("p",{staticStyle:{"margin-left":"30px"}},[t._v("审核时间："+t._s(t.eMag.time))])])]),a("a-table",{staticStyle:{"margin-top":"40px"},attrs:{loading:t.sLoading,bordered:"",dataSource:t.dataSourceS,columns:t.columnsS,pagination:!1},scopedSlots:t._u([t._l(7,function(e){return{key:"ct"+(e+1),fn:function(i,s){return a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},t._l(s.name[e-1],function(e,i){return a("div",[t._v("\n                                    "+t._s(e.title)+"\n                                ")])}),0)}}}),{key:"footer",fn:function(e){return[a("div",{staticClass:"tWrap",staticStyle:{display:"flex","justify-content":"space-around"}},[a("div",{staticClass:"iBox",staticStyle:{display:"flex","align-items":"center"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("营养师："+t._s(t.eData.name1))])]),a("div",{staticClass:"iBox",staticStyle:{display:"flex","align-items":"center"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("制谱人："+t._s(t.eData.name2))])]),a("div",{staticClass:"iBox",staticStyle:{display:"flex","align-items":"center"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[t._v("审核人："+t._s(t.eData.name3))])])])]}}],null,!0)},[a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle"},slot:"customTitle"},[a("p",{staticStyle:{position:"absolute","margin-bottom":"0",width:"30px",left:"-9px",top:"-17px"}},[t._v("日期")]),a("p",{staticStyle:{position:"absolute",width:"41px",height:"1px",background:"#999","margin-bottom":"0",transform:"rotateZ(-45deg)","margin-left":"10px","margin-top":"10px",left:"-7px",top:"-9px"}}),a("p",{staticStyle:{position:"absolute","text-align":"right","margin-bottom":"0",width:"30px",left:"23px"}},[t._v("餐次")])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle2"},slot:"customTitle2"},[a("p",[t._v("星期一")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[0]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle3"},slot:"customTitle3"},[a("p",[t._v("星期二")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[1]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle4"},slot:"customTitle4"},[a("p",[t._v("星期三")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[2]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle5"},slot:"customTitle5"},[a("p",[t._v("星期四")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[3]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle6"},slot:"customTitle6"},[a("p",[t._v("星期五")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[4]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle7"},slot:"customTitle7"},[a("p",[t._v("星期六")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[5]))])]),a("div",{staticStyle:{position:"relative"},attrs:{slot:"customTitle8"},slot:"customTitle8"},[a("p",[t._v("星期日")]),a("p",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(this.weekList[6]))])])])],1),a("a-modal",{attrs:{title:t.openTxt,onOk:"handleOk"},model:{value:t.kVisible,callback:function(e){t.kVisible=e},expression:"kVisible"}},[a("div",{staticClass:"wrap",staticStyle:{height:"150px",display:"flex","align-items":"center","justify-content":"center"}},[a("p",[t._v(t._s(t.oTxt))])]),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.kBack}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.kOk}},[t._v("确认")])],1)],2),a("a-modal",{attrs:{title:t.pTitle,onOk:"handleOk"},model:{value:t.pVisible,callback:function(e){t.pVisible=e},expression:"pVisible"}},[a("a-textarea",{staticStyle:{height:"150px",resize:"none"},attrs:{placeholder:t.pLder},model:{value:t.pTxt,callback:function(e){t.pTxt=e},expression:"pTxt"}}),a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.pBack}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.pOk}},[t._v("确认")])],1)],2)],1)],1)],1)],1)},s=[],o=(a("7f7f"),a("ac6a"),a("c1df")),n=a.n(o),r={data:function(){var t=this;return{sLoading:!1,kTwoLoad:!1,pageLoad:!0,loading:!0,isE:!0,oNum:!0,keyNum:"1",kVisible:!1,rState:1,rstate:1,rSList:[],rList:[{id:"",title:"全部"},{id:0,title:"未审核"},{id:1,title:"已通过"},{id:2,title:"已拒绝"}],refuse:"",btnTxt:"提交",btnState:"提交审核",v3Title:"审核备注",exData:{aName:"王阿航",aTxt:"无",eName:"王阿航",eTxt:"吃的太撇！"},form:this.$form.createForm(this),form2:this.$form.createForm(this),sFood:!0,seachS:!0,rEShow2:!1,zFood:"包包白",fFood:"包包白、玉米、西瓜、哈密瓜",hasFod:!0,btnI:0,sBtnI:0,col:!1,visible:!1,visible2:!1,visible3:!1,visible4:!1,rValue:1,addCK:!1,state:!1,ctnList:[],ctnKey:1,weekList:[],oWeek:"",dayWeek:"",initial:!0,iBtn:!0,week:{one:"",seven:"",nOne:"",nSeven:""},weekNum:0,columns:[],dataSource:[],notData:[{key:"0",logo:"早餐",name:["本周未编辑"]},{key:"1",logo:"午餐",name:[]},{key:"2",logo:"晚餐",name:[]},{key:"3",logo:"加餐",name:[]}],notTab:[{slots:{title:"customTitle"},align:"center",dataIndex:"logo",width:80,height:50},{slots:{title:"customTitle2"},align:"center",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0==a?4:0,i.attrs.colSpan=7,i},dataIndex:"name",scopedSlots:{customRender:"ct2"}},{slots:{title:"customTitle3"},align:"center",dataIndex:"state",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0,i.attrs.colSpan=0,i}},{slots:{title:"customTitle4"},align:"center",dataIndex:"lpName",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0,i.attrs.colSpan=0,i}},{slots:{title:"customTitle5"},align:"center",dataIndex:"sTime",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0,i.attrs.colSpan=0,i}},{slots:{title:"customTitle6"},align:"center",dataIndex:"btn",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0,i.attrs.colSpan=0,i}},{slots:{title:"customTitle7"},align:"center",dataIndex:"123",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0,i.attrs.colSpan=0,i}},{slots:{title:"customTitle8"},align:"center",dataIndex:"23",customRender:function(t,e,a){var i={children:t,attrs:{}};return i.attrs.rowSpan=0,i.attrs.colSpan=0,i}}],hasTab:[{slots:{title:"customTitle"},align:"center",dataIndex:"logo",width:80,height:50},{slots:{title:"customTitle2"},align:"center",dataIndex:"name",scopedSlots:{customRender:"ct2"}},{slots:{title:"customTitle3"},align:"center",dataIndex:"state",scopedSlots:{customRender:"ct3"}},{slots:{title:"customTitle4"},align:"center",dataIndex:"lpName",scopedSlots:{customRender:"ct4"}},{slots:{title:"customTitle5"},align:"center",dataIndex:"sTime",scopedSlots:{customRender:"ct5"}},{slots:{title:"customTitle6"},align:"center",dataIndex:"btn",scopedSlots:{customRender:"ct6"}},{slots:{title:"customTitle7"},align:"center",dataIndex:"123",scopedSlots:{customRender:"ct7"}},{slots:{title:"customTitle8"},align:"center",dataIndex:"23",scopedSlots:{customRender:"ct8"}}],isNew:!0,isModify:!1,isExpire:[],btmTxt:{dietitian:"",producer:"",name:""},foodList:["全部","发酵面制品","汤面类","油炸类","其他"],fodList:[],fcList:[],headers:{authorization:"authorization-text"},power:!1,columns2:[{title:"食堂",align:"center",dataIndex:"droom"},{title:"周期",align:"center",dataIndex:"time"},{title:"营养师",align:"center",dataIndex:"nName"},{title:"制谱人",align:"center",dataIndex:"rName"},{title:"申请时间",align:"center",dataIndex:"sTime"},{title:"审核状态",align:"center",dataIndex:"state",scopedSlots:{customRender:"state"}},{title:"操作按钮",align:"center",dataIndex:"btn",scopedSlots:{customRender:"btn"}}],dataSource2:[],pagination:{pageSize:15,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,pageSizeOptions:["10","20"],showTotal:function(e){return"共 ".concat(e," 条记录 第 ").concat(t.pagination.current," / ").concat(Math.ceil(e/t.pagination.pageSize)," 页")}},isOpen:!0,oTxt:"关闭后家长端将无法查看食谱",openTxt:"关闭公示",columnsS:[{slots:{title:"customTitle"},align:"center",dataIndex:"logo",width:80,height:50,backgroundColor:"#777"},{slots:{title:"customTitle2"},align:"center",dataIndex:"name",scopedSlots:{customRender:"ct2"}},{slots:{title:"customTitle3"},align:"center",dataIndex:"state",scopedSlots:{customRender:"ct3"}},{slots:{title:"customTitle4"},align:"center",dataIndex:"lpName",scopedSlots:{customRender:"ct4"}},{slots:{title:"customTitle5"},align:"center",dataIndex:"sTime",scopedSlots:{customRender:"ct5"}},{slots:{title:"customTitle6"},align:"center",dataIndex:"btn",scopedSlots:{customRender:"ct6"}},{slots:{title:"customTitle7"},align:"center",dataIndex:"123",scopedSlots:{customRender:"ct7"}},{slots:{title:"customTitle8"},align:"center",dataIndex:"23",scopedSlots:{customRender:"ct8"}}],dataSourceS:[{key:"0",logo:"早餐",name:[["包子","馒头","豆浆","牛奶","稀饭"],["包子","馒头","豆浆","牛奶","稀饭"],["包子","馒头","豆浆","牛奶","稀饭"]]},{key:"1",logo:"午餐",name:[["番茄炒蛋","红烧牛肉","酸菜鱼","泡椒肉丝","红烧肥肠"],["番茄炒蛋","红烧牛肉","酸菜鱼","泡椒肉丝","红烧肥肠"],["番茄炒蛋","红烧牛肉","酸菜鱼","泡椒肉丝","红烧肥肠"],["番茄炒蛋","红烧牛肉","酸菜鱼","泡椒肉丝","红烧肥肠"]]},{key:"2",logo:"晚餐",name:[[],["番茄","牛肉","酸菜","泡椒","烧肥肠"],["番茄","牛肉","酸菜","泡椒","烧肥肠"]]},{key:"3",logo:"加餐",name:[["番茄","牛肉","酸菜","泡椒","烧肥肠"]]}],eData:{name1:"",name2:"",name3:""},acShow:!1,pTitle:"",pTxt:"",pLder:"食谱排的真棒，请继续保持",pVisible:!1,eMag:{state:"拒绝",msg:"如果我打很多很多很多很多很多字这里不好显示",name:"阿航",time:"2019-06-01   15:23"},fNum:0,wNum:1,oFid:0,nFid:0,foodName:"",pTotal:0,pKey:1,foodL:[],foodI:0,time:{s:"",e:""},rlID:"",isState:1,dCode:0,timeList:[]}},beforeCreate:function(){},methods:{tFormat:function(){this.timeList=[];for(var t=n()(new Date).day(1).format("MM月DD日"),e=n()(new Date).day(7).format("MM月DD日"),a=n()(new Date).day(1).format("YYYYMMDD"),i=n()(new Date).day(7).format("YYYYMMDD"),s=1;s<8;s++)this.weekList.push(n()(new Date).day(s).format("MM月DD日")),this.timeList.push(n()(new Date).day(s).format("x"));this.week.one=t,this.week.seven=e,this.week.nOne=a,this.week.nSeven=i},changeWk:function(t){"add"==t?(this.weekNum--,this.getWeek(this.weekNum)):"zero"==t?(this.weekNum=0,this.getWeek(this.weekNum)):(this.weekNum++,this.getWeek(this.weekNum)),this.getFBook(),this.iBtn=!0,this.isModify=!1},getWeek:function(t){this.weekList=[];for(var e=7*t*24*60*60*1e3,a=e+5184e5,i=7*t*24*60*60*1e3,s=i+5184e5,o=0,r=1;r<8;r++){var c=24*o*60*60*1e3;o++;var l=n()(parseInt(n()(new Date).day(1).format("x"))+e+c).format("MM月DD日");this.weekList.push(l)}e=n()(parseInt(n()(new Date).day(1).format("x"))+e).format("MM月DD日"),i=n()(parseInt(n()(new Date).day(1).format("x"))+i).format("YYYYMMDD"),a=n()(parseInt(n()(new Date).day(1).format("x"))+a).format("MM月DD日"),s=n()(parseInt(n()(new Date).day(1).format("x"))+s).format("YYYYMMDD"),this.week.one=e,this.week.seven=a,this.week.nOne=i,this.week.nSeven=s},edit:function(t){var e=this;if("e"==t){if(this.isNew){this.isE=!1,this.notData[0].name=[],this.notData.forEach(function(t,e){t.name=[[],[],[],[],[],[],[]]}),this.dataSource=this.notData,this.columns=this.hasTab;var a=n()(new Date).format("x");this.isExpire=[!0,!0,!0,!0,!0,!0,!0],this.timeList.forEach(function(t,i){t<=a&&(e.isExpire[i]=!1)})}this.iBtn=!this.iBtn,this.isModify=!this.isModify}else"u"==t?"提交审核"==this.btnState?(this.visible3=!this.visible3,this.v3Title="审核备注"):"审核通过"==this.btnState?(this.visible3=!this.visible3,this.btnTxt="确定",this.v3Title="查看详情"):(this.btnState,this.visible3=!this.visible3,this.btnTxt="确定",this.v3Title="查看详情"):this.visible4=!this.visible4},editB:function(t){var e=this;if("f"==t){var a=[];this.dataSource.forEach(function(t,e){var i=0;switch(e){case 0:i=1;break;case 1:i=2;break;case 2:i=3;break;case 3:i=4}t.name.forEach(function(t,e){var s=0;switch(e){case 0:s=1;break;case 1:s=2;break;case 2:s=3;break;case 3:s=4;break;case 4:s=5;break;case 5:s=6;break;case 6:s=7}t.forEach(function(t){var e={week:s,meal_times:i,food_id:t.food_id||t.id};a.push(e)})})}),this.isModify&&a.length>0?this.state=!1:(this.state=!0,this.notData[0].name[0]="本周未编辑",this.dataSource=this.notData,this.columns=this.notTab),this.isModify=!this.isModify,this.iBtn=!this.iBtn}else if("p"==t)if(""==this.btmTxt.dietitian)this.col=!0,this.$message.warning("请填写营养师姓名");else{var i=[];this.dataSource.forEach(function(t,e){var a=0;switch(e){case 0:a=1;break;case 1:a=2;break;case 2:a=3;break;case 3:a=4}t.name.forEach(function(t,e){var s=0;switch(e){case 0:s=1;break;case 1:s=2;break;case 2:s=3;break;case 3:s=4;break;case 4:s=5;break;case 5:s=6;break;case 6:s=7}t.forEach(function(t){var e={week:s,meal_times:a,food_id:t.food_id||t.id};i.push(e)})})});var s={url:"api/school/recipes/"+this.week.nOne+this.week.nSeven,method:"put",data:{id:this.ctnKey,producer:this.btmTxt.producer,dietitian:this.btmTxt.dietitian,foods:JSON.stringify(i)}};this.$apiAxiox(s).then(function(t){console.log(t),0==t.data.code?(e.$message.success("保存食谱成功"),e.iBtn=!e.iBtn,e.isModify=!e.isModify):e.$message.error(t.data.msg)})}else this.notData[0].name[0]="本周未编辑",this.dataSource=this.notData,this.columns=this.notTab,this.$message.success("清空食谱成功")},addCk:function(t,e,a){switch(this.foodI=e,this.foodL=t,"早餐"==a.logo?this.fNum=0:"午餐"==a.logo?this.fNum=1:"晚餐"==a.logo?this.fNum=2:this.fNum=3,e){case 1:this.oWeek="星期一";break;case 2:this.oWeek="星期二";break;case 3:this.oWeek="星期三";break;case 4:this.oWeek="星期四";break;case 5:this.oWeek="星期五";break;case 6:this.oWeek="星期六";break;case 7:this.oWeek="星期天"}this.dayWeek=this.weekList[e-1],this.addCK=!this.addCK,this.seachFood(0)},reFood:function(t,e,a){t[a-1].splice(e,1)},seachFood:function(t){var e=this,a=0;a=0==t?0:t;var i=this.btnI+1,s={method:"get",url:"api/school/dishes?keyword="+this.foodName+"&state="+i+"&type="+a+"&page="+this.pKey};this.$apiAxiox(s).then(function(t){0==t.data.data.data.length?(e.hasFod=!0,e.seachS=!0):(e.hasFod=!1,e.fodList=[],e.pTotal=t.data.data.total,t.data.data.data.forEach(function(t,a){""==t.cover&&(t.cover="../../assets/login/logo.png"),0==t.last_use&&(t.last_use=n()(new Date).format("YYYY-MM-DD"));var i=!1;0!=e.fcList.length&&e.fcList.forEach(function(e,a){e.id==t.id&&(i=!0)});var s={id:t.id,state:i,url:t.cover,title:t.title,num:t.material_num,time:t.last_use,excipient:t.excipient,materials:t.materials};e.fodList.push(s)}),console.log(e.fodList),e.fodList.forEach(function(t,a){e.foodL.forEach(function(e,a){t.id==e.id&&(t.state=!0)})}))})},InpTxt:function(){""!=this.Dietitian&&(this.col=!1)},rChange:function(t){var e=this;if("本周未编辑"!=this.notData[0].name[0]){var a=[];this.dataSource.forEach(function(t,i){var s=0;switch(i){case 0:s=1;break;case 1:s=2;break;case 2:s=3;break;case 3:s=4}t.name.forEach(function(t,e){var i=0;switch(e){case 0:i=1;break;case 1:i=2;break;case 2:i=3;break;case 3:i=4;break;case 4:i=5;break;case 5:i=6;break;case 6:i=7}t.forEach(function(t){var e={week:i,meal_times:s,food_id:t.food_id||t.id};a.push(e)})}),a.length<=0?e.state=!0:e.state=!1})}else this.state=!0;this.nFid=t,this.state||(this.visible=!this.visible),this.getFBook()},handleOk:function(){this.visible=!this.visible,this.ctnKey=this.nFid,this.getFBook(),this.$message.success("保存食谱成功")},handleCancel:function(){this.visible=!this.visible,this.notData.forEach(function(t,e){t.name=[[],[],[],[],[],[],[]]}),this.dataSource=this.notData,this.columns=this.hasTab},back:function(){this.addCK=!this.addCK},bClick:function(t){this.btnI=t,this.seachFood(0)},fLiClick:function(t,e){this.sBtnI=t,this.seachFood(e)},all:function(){this.sBtnI=0,this.btnI=1,this.seachFood(0)},addFood:function(t,e,a){this.fodList[e].state=!a,this.foodL.length>=20?this.$message.warning("菜品添加已达上限"):this.foodL.push(t)},reFod:function(t){var e=this;this.foodL.splice(t,1),this.fodList.forEach(function(t,a){t.state=!1,e.foodL.forEach(function(e,a){t.id==e.id&&(t.state=!0)})})},lookCk:function(t,e,a){this.fFood=e,this.zFood=a,this.visible2=!this.visible2},backC:function(){this.visible2=!this.visible2},addF:function(){this.sFood=!this.sFood},check:function(){var t=this,e=["fName","fNature","sFood","sFood2","upload"];this.form.validateFields(e,function(e,a){console.log(a),void 0==a.upload?t.rEShow2=!0:t.rEShow2=!1})},normFile:function(t){return console.log("Upload event:",t),Array.isArray(t)?t:t&&t.fileList},upImg:function(t){"uploading"!==t.file.status&&console.log(t.file,t.fileList),"done"===t.file.status?(this.$message.success("".concat(t.file.name," file uploaded successfully")),this.rEShow2=!1):"error"===t.file.status&&this.$message.error("".concat(t.file.name," file upload failed."))},v3Clisk:function(t){var e=this;if("提交审核"==t){this.visible3=!this.visible3;var a=[];if("本周未编辑"==this.dataSource[0].name[0])return void this.$message.warning("本周未编辑");this.dataSource.forEach(function(t,e){var i=0;switch(e){case 0:i=1;break;case 1:i=2;break;case 2:i=3;break;case 3:i=4}t.name.forEach(function(t,e){var s=0;switch(e){case 0:s=1;break;case 1:s=2;break;case 2:s=3;break;case 3:s=4;break;case 4:s=5;break;case 5:s=6;break;case 6:s=7}t.forEach(function(t){var e={week:s,meal_times:i,food_id:t.food_id||t.id};a.push(e)})})});var i={url:"api/school/recipes/"+this.week.nOne+this.week.nSeven,method:"put",data:{id:this.ctnKey,producer:this.btmTxt.producer,dietitian:this.btmTxt.dietitian,remake:this.refuse,foods:JSON.stringify(a)}};this.$apiAxiox(i).then(function(t){0==t.data.code?e.$message.success("提交成功"):e.$message.error(t.data.msg)})}else this.visible3=!this.visible3},v3back:function(){this.visible3=!this.visible3},onChange:function(t){console.log(t[0].format("MM月DD日")),console.log(t[1].format("MM月DD日"))},tBack:function(){this.visible4=!this.visible4},ckTime:function(){this.visible4=!this.visible4,this.$message.success("复制成功")},getPlist:function(){var t=this,e=["selectF","selectS","rpicker"];this.form2.validateFields(e,function(e,a){console.log(a),e||(t.ctnKey=t.rSList[a.selectF-1].id,t.rlID=t.rList[a.selectS-1].id,void 0!=a.rpicker?(t.time.s=n()(a.rpicker[0]._d).format("YYYYMMDD"),t.time.e=n()(a.rpicker[1]._d).format("YYYYMMDD")):(t.time.s="",t.time.e=""),t.getAllFoodBock(1))})},clearL:function(){this.rState=1,this.rstate=1,this.form2.resetFields()},handleTableChange:function(t,e,a){this.pagination.pageSize=t.pageSize,this.pagination.current=t.current,this.getAllFoodBock(1)},open:function(t){this.isOpen=t,this.kVisible=!0,this.oNum?(this.oTxt="关闭后家长端将无法查看食谱",this.openTxt="关闭公示"):(this.oTxt="开启后家长端即可查看审核通过的食谱",this.openTxt="开启公示")},kBack:function(){this.kVisible=!this.kVisible},kOk:function(){this.kVisible=!this.kVisible,this.oNum=!this.oNum},newFList:function(){this.keyNum="1"},keyChange:function(t){this.keyNum=t,this.getAllFoodBock(0)},kState:function(t,e){var a=this;this.sLoading=!this.sLoading,this.power=!this.power,this.acShow="NO"==t;var i={url:"api/school/recipes/"+e.code+"?id="+e.id,method:"get",data:{}};this.$apiAxiox(i).then(function(t){if(0==t.data.code){a.dCode=t.data.data.serial_num,a.eData.name1=t.data.data.dietitian,a.eData.name2=t.data.data.producer,a.eData.name3=t.data.data.state_str;var e={key:"0",logo:"早餐",name:[]},i={key:"1",logo:"午餐",name:[]},s={key:"2",logo:"晚餐",name:[]},o={key:"3",logo:"加餐",name:[]};t.data.data.foods.forEach(function(t,a){e.name.push(t.meal_times[1]),i.name.push(t.meal_times[2]),s.name.push(t.meal_times[3]),o.name.push(t.meal_times[4])}),a.dataSourceS=[],a.dataSourceS.push(e),a.dataSourceS.push(i),a.dataSourceS.push(s),a.dataSourceS.push(o),a.sLoading=!a.sLoading}})},rOk:function(t){this.pVisible=!this.pVisible,"OK"==t?(this.pTitle="审核备注",this.pLder="食谱排的真棒，请继续保持",this.isState=1):(this.pTitle="拒绝原因",this.pLder="请仔细检查食谱哦",this.isState=2)},kback:function(){this.power=!this.power},pBack:function(){this.pVisible=!this.pVisible},pOk:function(){var t=this,e={url:"api/school/examine/recipes",method:"post",data:{serial_num:this.dCode,feedback:this.pTxt,state:this.isState}};this.$apiAxiox(e).then(function(e){0==e.data.code?(t.$message.success("食谱审核成功"),t.pTxt="",t.power=!t.power,t.pVisible=!t.pVisible,t.getAllFoodBock(0)):(t.$message.error(e.data.msg),t.pVisible=!1)})},getData:function(){var t=this,e={url:"api/common/dictionaries",method:"get",data:{}};this.$apiAxiox(e).then(function(e){0==e.data.code?(e.data.data.canteen.length>0?(t.ctnList=e.data.data.canteen,t.ctnKey=t.ctnList[0].id,t.rSList.push({id:0,title:"全部"}),t.ctnList.forEach(function(e,a){t.rSList.push(e)})):t.rState="全部",t.foodList=e.data.data.gener,t.foodList.splice(0,0,{id:0,title:"全部"})):t.$message.warning(e.data.msg),t.getFBook()})},getFBook:function(){var t=this;this.loading=!0;var e={url:"api/school/recipes/"+this.week.nOne+this.week.nSeven+"?id="+this.ctnKey,method:"get"};this.$apiAxiox(e).then(function(e){0==e.data.code?void 0==e.data.data.length?(e.data.data.foods==[]?(t.dataSource=t.notData,t.columns=t.notTab):("未审核"==e.data.data.state_str?(e.data.data.state_str="提交审核",t.btnState=e.data.data.state_str):t.btnState=e.data.data.state_str,t.btmTxt.dietitian=e.data.data.dietitian,t.btmTxt.producer=e.data.data.producer,t.btmTxt.name=e.data.data.auditor_nickname,t.setData(e.data.data.foods),t.isNew=!1),t.loading=!1,t.pageLoad=!1):(t.dataSource=t.notData,t.columns=t.notTab,t.loading=!1,t.pageLoad=!1,t.isNew=!0,t.btnState="提交审核"):(t.isNew=!0,t.dataSource=t.notData,t.columns=t.notTab,t.$message.error(e.data.msg),t.loading=!1,t.pageLoad=!1)})},getAllFoodBock:function(t){var e=this;this.kTwoLoad=!0;var a=this,i=0;0==t?(this.pageLoad=!0,i=""):i=this.ctnKey;var s={url:"api/school/recipes?page="+a.pagination.current+"&cid="+i+"&state="+a.rlID+"&begin="+a.time.s+"&end="+a.time.e,method:"get",data:{}};this.$apiAxiox(s).then(function(a){0==a.data.code&&(e.pagination.total=a.data.data.total,e.dataSource2=[],a.data.data.data.forEach(function(t,a){var i="";switch(t.state){case 0:i="待审核";break;case 1:i="已通过";break;case 2:i="已拒绝"}var s={key:a,droom:t.canteen_title,time:t.begin_format+" - "+t.end_format,nName:t.dietitian,rName:t.producer,sTime:t.updated_at,state:i,code:t.cycle,id:t.canteen_id};e.dataSource2.push(s)}),0==t&&(e.pageLoad=!e.pageLoad),e.kTwoLoad=!e.kTwoLoad)})},setData:function(t){var e=this,a={key:"0",logo:"早餐",name:[]},i={key:"1",logo:"午餐",name:[]},s={key:"2",logo:"晚餐",name:[]},o={key:"3",logo:"加餐",name:[]};this.isExpire=[],t.forEach(function(t,n){a.name.push(t.meal_times[1]),i.name.push(t.meal_times[2]),s.name.push(t.meal_times[3]),o.name.push(t.meal_times[4]),e.isExpire.push(t.state)}),console.log(this.isExpire),this.dataSource=[],this.dataSource.push(a),this.dataSource.push(i),this.dataSource.push(s),this.dataSource.push(o),this.columns=this.hasTab},onpChange:function(t){this.pKey=t,this.seachFood(0)}},created:function(){this.getData(),this.tFormat()},watch:{ctnKey:function(t,e){this.fID=e}}},c=r,l=(a("72c3"),a("b431"),a("2877")),d=Object(l["a"])(c,i,s,!1,null,"ea34cc86",null);e["default"]=d.exports},"72c3":function(t,e,a){"use strict";var i=a("90f1"),s=a.n(i);s.a},"90f1":function(t,e,a){},ac6a:function(t,e,a){for(var i=a("cadf"),s=a("0d58"),o=a("2aba"),n=a("7726"),r=a("32e9"),c=a("84f2"),l=a("2b4c"),d=l("iterator"),p=l("toStringTag"),m=c.Array,u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=s(u),v=0;v<h.length;v++){var f,g=h[v],x=u[g],b=n[g],k=b&&b.prototype;if(k&&(k[d]||r(k,d,m),k[p]||r(k,p,g),c[g]=m,x))for(f in i)k[f]||o(k,f,i[f],!0)}},b431:function(t,e,a){"use strict";var i=a("db3b"),s=a.n(i);s.a},db3b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-85905574.7c70a0f2.js.map