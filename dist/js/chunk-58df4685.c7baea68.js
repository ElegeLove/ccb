(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58df4685"],{"0bfb":function(e,t,a){"use strict";var i=a("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"1af6":function(e,t,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"28a0":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},3022:function(e,t,a){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),a={},i=0;i<t.length;i++)a[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return a},s=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(r(arguments[a]));return t.join(" ")}a=1;for(var i=arguments,n=i.length,o=String(e).replace(s,function(e){if("%%"===e)return"%";if(a>=n)return e;switch(e){case"%s":return String(i[a++]);case"%d":return Number(i[a++]);case"%j":try{return JSON.stringify(i[a++])}catch(t){return"[Circular]"}default:return e}}),l=i[a];a<n;l=i[++a])S(l)||!k(l)?o+=" "+l:o+=" "+r(l);return o},t.deprecate=function(a,i){if("undefined"!==typeof e&&!0===e.noDeprecation)return a;if("undefined"===typeof e)return function(){return t.deprecate(a,i).apply(this,arguments)};var s=!1;function n(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return a.apply(this,arguments)}return n};var n,o={};function r(e,a){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(a)?i.showHidden=a:a&&t._extend(i,a),D(i.showHidden)&&(i.showHidden=!1),D(i.depth)&&(i.depth=2),D(i.colors)&&(i.colors=!1),D(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),m(i,e,i.depth)}function l(e,t){var a=r.styles[t];return a?"["+r.colors[a][0]+"m"+e+"["+r.colors[a][1]+"m":e}function c(e,t){return e}function d(e){var t={};return e.forEach(function(e,a){t[e]=!0}),t}function m(e,a,i){if(e.customInspect&&a&&L(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var s=a.inspect(i,e);return w(s)||(s=m(e,s,i)),s}var n=p(e,a);if(n)return n;var o=Object.keys(a),r=d(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(a)),A(a)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(a);if(0===o.length){if(L(a)){var l=a.name?": "+a.name:"";return e.stylize("[Function"+l+"]","special")}if(C(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(T(a))return e.stylize(Date.prototype.toString.call(a),"date");if(A(a))return u(a)}var c,v="",S=!1,b=["{","}"];if(_(a)&&(S=!0,b=["[","]"]),L(a)){var x=a.name?": "+a.name:"";v=" [Function"+x+"]"}return C(a)&&(v=" "+RegExp.prototype.toString.call(a)),T(a)&&(v=" "+Date.prototype.toUTCString.call(a)),A(a)&&(v=" "+u(a)),0!==o.length||S&&0!=a.length?i<0?C(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),c=S?h(e,a,i,r,o):o.map(function(t){return f(e,a,i,r,t,S)}),e.seen.pop(),g(c,v,b)):b[0]+v+b[1]}function p(e,t){if(D(t))return e.stylize("undefined","undefined");if(w(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}return x(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):S(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,a,i,s){for(var n=[],o=0,r=t.length;o<r;++o)Y(t,String(o))?n.push(f(e,t,a,i,String(o),!0)):n.push("");return s.forEach(function(s){s.match(/^\d+$/)||n.push(f(e,t,a,i,s,!0))}),n}function f(e,t,a,i,s,n){var o,r,l;if(l=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},l.get?r=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(r=e.stylize("[Setter]","special")),Y(i,s)||(o="["+s+"]"),r||(e.seen.indexOf(l.value)<0?(r=S(a)?m(e,l.value,null):m(e,l.value,a-1),r.indexOf("\n")>-1&&(r=n?r.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+r.split("\n").map(function(e){return"   "+e}).join("\n"))):r=e.stylize("[Circular]","special")),D(o)){if(n&&s.match(/^\d+$/))return r;o=JSON.stringify(""+s),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+r}function g(e,t,a){var i=e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1]:a[0]+t+" "+e.join(", ")+" "+a[1]}function _(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function S(e){return null===e}function b(e){return null==e}function x(e){return"number"===typeof e}function w(e){return"string"===typeof e}function y(e){return"symbol"===typeof e}function D(e){return void 0===e}function C(e){return k(e)&&"[object RegExp]"===U(e)}function k(e){return"object"===typeof e&&null!==e}function T(e){return k(e)&&"[object Date]"===U(e)}function A(e){return k(e)&&("[object Error]"===U(e)||e instanceof Error)}function L(e){return"function"===typeof e}function M(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function U(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(a){if(D(n)&&(n=Object({NODE_ENV:"production",BASE_URL:"http://cdn.ccb.micmio.com/"}).NODE_DEBUG||""),a=a.toUpperCase(),!o[a])if(new RegExp("\\b"+a+"\\b","i").test(n)){var i=e.pid;o[a]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",a,i,e)}}else o[a]=function(){};return o[a]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=_,t.isBoolean=v,t.isNull=S,t.isNullOrUndefined=b,t.isNumber=x,t.isString=w,t.isSymbol=y,t.isUndefined=D,t.isRegExp=C,t.isObject=k,t.isDate=T,t.isError=A,t.isFunction=L,t.isPrimitive=M,t.isBuffer=a("d60a");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=a("28a0"),t._extend=function(e,t){if(!t||!k(t))return e;var a=Object.keys(t),i=a.length;while(i--)e[a[i]]=t[a[i]];return e};var V="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(e,t){if(!e){var a=new Error("Promise was rejected with a falsy value");a.reason=e,e=a}return t(e)}function R(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function a(){for(var a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);var s=a.pop();if("function"!==typeof s)throw new TypeError("The last argument must be of type Function");var n=this,o=function(){return s.apply(n,arguments)};t.apply(this,a).then(function(t){e.nextTick(o,null,t)},function(t){e.nextTick(E,t,o)})}return Object.setPrototypeOf(a,Object.getPrototypeOf(t)),Object.defineProperties(a,i(t)),a}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(V&&e[V]){var t=e[V];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,V,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,a,i=new Promise(function(e,i){t=e,a=i}),s=[],n=0;n<arguments.length;n++)s.push(arguments[n]);s.push(function(e,i){e?a(e):t(i)});try{e.apply(this,s)}catch(o){a(o)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),V&&Object.defineProperty(t,V,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=V,t.callbackify=R}).call(this,a("f28c"))},"36a4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZkAAAAZCAYAAADjYlOiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADlSURBVHhe7dmxCYVAEARQ27YW27AdU1swPFnOSEyEG03eg0k+uNxEE/ypAUCIkQEgxsgAEGNkAIgxMgDEGBkAYowMADFGBoAYIwNAjJEBIMbIABBjZACIMTIAxBgZAGKmeZ7b31mWpW3bdj3pvfq2bjzd/jJ6dHqMjR6dHmOT6nG/O9UPf2dd17bv+/Wk9+rbuvF0+8vo0ekxNnp0eoxNqsf97lSL83fqQcdxXE96r76tG0+3v4wenR5jo0enx9iketzv+k8GgBgjA0CMkQEgxsgAEGNkAIgxMgDEGBkAYowMACGtnfe7xG2Y2Wd3AAAAAElFTkSuQmCC"},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(e,t,a){"use strict";a("3846");var i=a("cb7c"),s=a("0bfb"),n=a("9e1e"),o="toString",r=/./[o],l=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?l(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!n&&e instanceof RegExp?s.call(e):void 0)}):r.name!=o&&l(function(){return r.call(this)})},"75fc":function(e,t,a){"use strict";var i=a("a745"),s=a.n(i);function n(e){if(s()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var o=a("774e"),r=a.n(o),l=a("c8bb"),c=a.n(l);function d(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return r()(e)}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){return n(e)||d(e)||m()}a.d(t,"a",function(){return p})},"774e":function(e,t,a){e.exports=a("d2d5")},a745:function(e,t,a){e.exports=a("f410")},ac6a:function(e,t,a){for(var i=a("cadf"),s=a("0d58"),n=a("2aba"),o=a("7726"),r=a("32e9"),l=a("84f2"),c=a("2b4c"),d=c("iterator"),m=c("toStringTag"),p=l.Array,u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=s(u),f=0;f<h.length;f++){var g,_=h[f],v=u[_],S=o[_],b=S&&S.prototype;if(b&&(b[d]||r(b,d,p),b[m]||r(b,m,_),l[_]=p,v))for(g in i)b[g]||n(b,g,i[g],!0)}},c5b0:function(e,t,a){"use strict";var i=a("c943"),s=a.n(i);s.a},c8bb:function(e,t,a){e.exports=a("54a1")},c943:function(e,t,a){},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},e522:function(e,t,a){e.exports=a.p+"img/erweima.6c500ffc.jpg"},f410:function(e,t,a){a("1af6"),e.exports=a("584a").Array.isArray},ff7d:function(e,t,a){"use strict";a.r(t);for(var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mxMealRecord"}},[i("a-skeleton",{attrs:{loading:e.loadingActive,active:"",paragraph:{rows:20}}},[i("a-tabs",{attrs:{activeKey:e.activeKey},on:{change:e.callback}},[i("a-tab-pane",{key:"1",attrs:{tab:"陪餐记录"}},[e.isShow||e.isAddRecord||e.isUpdateRecord?e._e():i("div",[i("a-form",{staticClass:"mx_form mx_staff",attrs:{layout:"inline"}},[i("a-form-item",{attrs:{label:"食堂："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.canteenKey},on:{change:e.selectChange}},e._l(e.canteen,function(t,a){return i("a-select-option",{key:a+1},[e._v(e._s(t.title))])}),1)],1),i("div",{staticClass:"components-input-demo-presuffix"},[i("p",{staticClass:"hmTxt"},[e._v("员工:")]),i("a-input",{ref:"userNameInput",staticClass:"seachBox",staticStyle:{width:"200px"},attrs:{placeholder:"姓名/职位"},model:{value:e.mxClassVal,callback:function(t){e.mxClassVal=t},expression:"mxClassVal"}},[e.mxClassVal?i("a-icon",{staticStyle:{color:"#999"},attrs:{slot:"suffix",theme:"filled",type:"close-circle"},on:{click:e.emitEmpty},slot:"suffix"}):e._e()],1)],1),i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.mealTimesKey},on:{change:e.mealTimesChange}},e._l(e.mealTimes,function(t,a){return i("a-select-option",{key:a+1},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期："}},[i("a-date-picker",{attrs:{disabledDate:e.disabledStartDate,showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),i("div",{staticClass:"mx_divide"},[e._v("—")]),i("a-date-picker",{attrs:{disabledDate:e.disabledEndDate,showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),i("a-form-item",[i("a-button",{staticClass:"mx_btnbg",attrs:{type:"primary"},on:{click:e.inquiryData}},[e._v("查询")]),i("a-button",{on:{click:e.inquiryMealReset}},[e._v("重置")])],1)],1),i("div",{staticClass:"mx_operate"},[i("a-button",{attrs:{type:"primary",icon:"form"},on:{click:e.mxAddRecord}},[e._v("添加记录")]),i("div",{staticClass:"mx_switch"},[i("span",[e._v("公示到家长端：")]),i("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关",defaultChecked:""}})],1),i("span",{staticClass:"mx_btns"},[i("span",{staticClass:"mx_outPoeration"},[i("a-icon",{staticClass:"mx_icon",attrs:{type:"printer"}}),i("span",[e._v("打印")])],1),i("a-divider",{staticStyle:{background:"#000"},attrs:{type:"vertical"}}),i("span",{staticClass:"mx_outPoeration"},[i("a-icon",{staticClass:"mx_icon",attrs:{type:"printer"}}),i("span",[e._v("导出")])],1)],1)],1),i("a-skeleton",{attrs:{loading:e.loading,active:"",title:!1,paragraph:{rows:20}}},[i("a-table",{attrs:{columns:e.column,dataSource:e.MealRecordList,bordered:"",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"photos_src",fn:function(t,a,s){return i("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[i("viewer",e._l(a.photos_src,function(e){return i("img",{staticStyle:{width:"60px",heigth:"60px",margin:"0 10px"},attrs:{src:e.url}})}),0)],1)}},{key:"operation",fn:function(t,a,s){return[i("div",{staticClass:"editable-row-operations"},[i("div",[i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxShowMeal(a.id)}}},[e._v("查看")]),i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxUpdateMeal(a)}}},[e._v("编辑")]),i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxDel(a.id)}}},[e._v("删除")]),i("a-modal",{attrs:{title:"删除确认",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:e.mxCancel,ok:e.mxDelete},model:{value:e.isDel,callback:function(t){e.isDel=t},expression:"isDel"}},[i("div",{staticClass:"mx_model"},[i("div",{staticClass:"mx_model_mainDel"},[e._v("\n                                                    是否确定删除该条陪餐记录？\n                                                ")])])])],1)])]}}],null,!1,3089230940)})],1)],1),e.isShow?i("div",[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goback}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("查看详情")])],1),i("a-skeleton",{attrs:{loading:e.loadingShow,active:"",title:!1,paragraph:{rows:20}}},[i("div",{staticClass:"mx_main"},[i("a-row",[i("a-col",{attrs:{span:8}},[i("p",[e._v("\n                                        食  堂：\n                                        "),i("span",[e._v(e._s(e.showMealList.canteen_str))])]),i("p",[e._v("\n                                        日  期：\n                                        "),i("span",[e._v(e._s(e.showMealList.meal_date_str))])]),i("p",[e._v("\n                                        餐  次：\n                                        "),i("span",[e._v(e._s(e.showMealList.meal_str))])]),i("p",[e._v("\n                                        陪  餐  人：\n                                        "),i("span",[e._v(e._s(e.showMealList.cater_nickname))])]),i("p",[e._v("\n                                        职  位：\n                                        "),i("span",[e._v(e._s(e.showMealList.cater_position))])]),i("p",[e._v("\n                                        陪餐时间：\n                                        "),i("span",[e._v(e._s(e.showMealList.meal_time_str))])]),i("p",[e._v("\n                                        餐后评价：\n                                        "),i("span",[e._v(e._s(e.showMealList.appraisal))])]),i("p",{staticClass:"mx_IDCard"},[e._v("\n                                        记  录  人：\n                                        "),i("span",[e._v(e._s(e.showMealList.sponsor_str))])]),i("p",[e._v("\n                                        记录时间：\n                                        "),i("span",[e._v(e._s(e.showMealList.created_at_str))])]),i("div",{staticClass:"mx_receipt"},[i("p",[e._v("陪餐记录小票 "),i("a",{on:{click:e.mxPrintingMeal}},[e._v("（点击打印）")])]),i("div",{staticClass:"mx_receipt_main"},[i("p",{staticClass:"mx_receipt_main_header"},[e._v("陪餐记录小票")]),i("img",{attrs:{src:a("36a4"),alt:""}}),i("p",[e._v("食  堂："+e._s(e.showMealList.canteen_str))]),i("p",[e._v("日期/餐次："+e._s(e.moment(e.showMealList.meal_date_str).format("MM-DD"))+" "+e._s(e.showMealList.meal_str))]),i("p",[e._v("陪  餐  人："+e._s(e.showMealList.cater_nickname))]),i("p",[e._v("职  位："+e._s(e.showMealList.cater_position))]),i("p",[e._v("陪餐时间："+e._s(e.showMealList.meal_time_str))]),i("p",[e._v("餐后评价："+e._s(e.showMealList.appraisal))]),i("img",{attrs:{src:a("36a4"),alt:""}}),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("p",[e._v("扫描二维码即可查看\n                                                    样详情及图片")]),i("img",{staticStyle:{width:"54px",height:"54px"},attrs:{src:a("e522"),alt:""}})])])])]),i("a-col",{attrs:{span:16}},[i("div",[i("p",[e._v("陪餐照片")]),i("div",[i("viewer",e._l(e.showMealList.photos_src,function(e){return i("img",{staticStyle:{width:"100px",height:"100px","margin-right":"30px"},attrs:{src:e.url,alt:"",srcset:""}})}),0)],1)])])],1)],1)])],1):e._e(),e.isAddRecord?i("div",[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goRecord}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("添加记录")])],1),i("a-modal",{attrs:{title:"确认返回",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:e.mxCancelBack,ok:e.mxGoback},model:{value:e.isGoBack,callback:function(t){e.isGoBack=t},expression:"isGoBack"}},[i("div",{staticClass:"mx_model"},[i("div",{staticClass:"mx_model_mainDel"},[e._v("\n                                您还未保存所添加记录，是否继续返回\n                            ")])])]),i("a-skeleton",{attrs:{loading:e.loadingAddShow,active:"",title:!1,paragraph:{rows:20}}},[i("a-form",{attrs:{form:e.form},on:{submit:e.handleAddSubmit}},[i("a-row",{staticClass:"mx_main"},[i("a-col",{attrs:{span:8}},[i("a-form-item",{attrs:{label:"所属食堂"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["canteen",{rules:[{required:!0,message:"请选择所属食堂"}]}],expression:"[\n                                        'canteen',\n                                        {rules: [{ required: true, message: '请选择所属食堂' }]}\n                                    ]"}],staticStyle:{width:"150px"},attrs:{placeholder:"选择所属食堂"}},e._l(e.canteenShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期"}},[i("a-date-picker",{attrs:{placeholder:"选择时间",defaultValue:e.moment(e.newData,"YYYY-MM-DD")},on:{change:e.onChangeDataMeal}})],1),i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.mealTimesAddKey},on:{change:e.mealTimesAddChange}},e._l(e.mealTimeShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"陪餐人"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cater_nickname",{rules:[{required:!0,message:"请填写陪餐人姓名"}]}],expression:"[\n                                    'cater_nickname',\n                                    {rules: [{ required: true, message: '请填写陪餐人姓名' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写陪餐人姓名"}})],1),i("a-form-item",{attrs:{label:"职位"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cater_position",{rules:[{required:!0,message:"请填写陪餐人职位"}]}],expression:"[\n                                    'cater_position',\n                                    {rules: [{ required: true, message: '请填写陪餐人职位' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写陪餐人职位"}})],1),i("a-form-item",{attrs:{label:"陪餐时间"}},[i("a-time-picker",{attrs:{defaultValue:e.moment(e.newDataTime,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeTimeMeal}})],1),i("a-form-item",{attrs:{label:"餐后评价"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["appraisal",{rules:[{required:!0,message:"请填写餐后评价"}]}],expression:"[\n                                            'appraisal',\n                                            {rules: [{ required: true, message: '请填写餐后评价' }]}\n                                        ]"}],staticStyle:{resize:"none"},attrs:{placeholder:"填写餐后评价",rows:4}})],1)],1),i("a-col",{attrs:{span:16}},[i("a-form-item",{attrs:{label:"陪餐照片"}},[i("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["陪餐照片",{rules:[{required:e.fileList.length<=0,message:"请上传至少一张陪餐照片"}]}],expression:"[\n                                                        '陪餐照片',\n                                                        {rules: [{ required: fileList.length<=0?true:false, message: '请上传至少一张陪餐照片' }]}\n                                                    ]"}]},[i("div",{staticClass:"clearfix"},[i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<3?i("div",[i("a-icon",{attrs:{type:"plus"}})],1):e._e()]),i("a-modal",{staticStyle:{display:"flex"},attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[i("a-button",{attrs:{icon:"upload"}},[e._v("\n                                                    上传图片\n                                                ")])],1)],1)])],1)],1),i("a-form-item",[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("立即添加")])],1)],1)],1)],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isUpdateRecord,expression:"isUpdateRecord"}]},[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goUpRecord}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("编辑记录")])],1),i("a-form",{attrs:{form:e.myformMeal},on:{submit:e.handleUpdata}},[i("a-row",{staticClass:"mx_main"},[i("a-col",{attrs:{span:8}},[i("a-form-item",{attrs:{label:"所属食堂"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["canteen",{rules:[{required:!0,message:"请选择所属食堂"}]}],expression:"[\n                                            'canteen',\n                                            {rules: [{ required: true, message: '请选择所属食堂' }]}\n                                        ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择所属食堂"}},e._l(e.canteenShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期"}},[i("a-date-picker",{attrs:{placeholder:"选择时间",value:e.moment(e.updataData,"YYYY-MM-DD")},on:{change:e.onChangeUpdataDataMeal}})],1),i("a-form-item",{attrs:{label:"餐次"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["mealTimesm",{rules:[{required:!0,message:"请选择餐次"}]}],expression:"[\n                                        'mealTimesm',\n                                        {rules: [{ required: true, message: '请选择餐次' }]}\n                                    ]"}],staticStyle:{width:"150px"}},e._l(e.mealTimeShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"陪餐人"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["accompanier",{rules:[{required:!0,message:"请填写陪餐人姓名"}]}],expression:"[\n                                    'accompanier',\n                                    {rules: [{ required: true, message: '请填写陪餐人姓名' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写陪餐人姓名"}})],1),i("a-form-item",{attrs:{label:"职位"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["positionman",{rules:[{required:!0,message:"请填写陪餐人职位"}]}],expression:"[\n                                    'positionman',\n                                    {rules: [{ required: true, message: '请填写陪餐人职位' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写陪餐人职位"}})],1),i("a-form-item",{attrs:{label:"陪餐时间"}},[i("a-time-picker",{attrs:{value:e.moment(e.updataDataTime,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeUpdataTimeMeal}})],1),i("a-form-item",{attrs:{label:"餐后评价"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["appraise",{rules:[{required:!0,message:"请填写餐后评价"}]}],expression:"[\n                                    'appraise',\n                                    {rules: [{ required: true, message: '请填写餐后评价' }]}\n                                    ]"}],staticStyle:{resize:"none"},attrs:{placeholder:"填写餐后评价",rows:4}})],1)],1),i("a-col",{attrs:{span:16}},[i("a-form-item",{attrs:{label:"陪餐照片"}},[i("div",[i("div",{staticClass:"clearfix"},[i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.imgsLists},on:{preview:e.handlePreviews,change:e.handleChanges}},[e.imgsLists.length<3?i("div",[i("a-icon",{attrs:{type:"plus"}})],1):e._e()]),i("a-modal",{staticStyle:{display:"flex"},attrs:{visible:e.previewVisibles,footer:null},on:{cancel:e.handleCancels}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImages}})])],1),i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.imgsLists},on:{preview:e.handlePreviews,change:e.handleChanges}},[i("a-button",{attrs:{icon:"upload"}},[e._v("\n                                                上传图片\n                                            ")])],1)],1)])],1)],1),i("a-form-item",[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("更新保存")])],1)],1)],1)]),i("a-tab-pane",{key:"2",attrs:{tab:"留样记录",forceRender:""}},[e.isShowSample||e.isAddSample||e.isUpdateSample?e._e():i("div",[i("a-form",{staticClass:"mx_form mx_staff",attrs:{layout:"inline"}},[i("a-form-item",{attrs:{label:"食堂："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.canteenSampleKey},on:{change:e.selectSampleChange}},e._l(e.canteen,function(t,a){return i("a-select-option",{key:a+1},[e._v(e._s(t.title))])}),1)],1)],1),i("a-form",{staticClass:"mx_form",attrs:{layout:"inline"}},[i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.mealTimesSampleKey},on:{change:e.mealTimesSampleChange}},e._l(e.mealTimes,function(t,a){return i("a-select-option",{key:a+1},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期："}},[i("a-date-picker",{attrs:{disabledDate:e.sampleStartDate,showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期"},on:{openChange:e.sampleStartOpenChange},model:{value:e.sampleStartValue,callback:function(t){e.sampleStartValue=t},expression:"sampleStartValue"}}),i("div",{staticClass:"mx_divide"},[e._v("—")]),i("a-date-picker",{attrs:{disabledDate:e.sampleEndDate,showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期",open:e.endOpenSample},on:{openChange:e.sampleEndOpenChange},model:{value:e.sampleEndValue,callback:function(t){e.sampleEndValue=t},expression:"sampleEndValue"}})],1),i("a-form-item",[i("a-button",{staticClass:"mx_btnbg",attrs:{type:"primary","html-type":"submit"},on:{click:e.mxInquirySample}},[e._v("查询")]),i("a-button",{on:{click:e.mxResetSample}},[e._v("重置")])],1)],1),i("div",{staticClass:"mx_operate"},[i("a-button",{attrs:{type:"primary",icon:"form"},on:{click:e.mxAddSample}},[e._v("添加记录")]),i("div",{staticClass:"mx_switch"},[i("span",[e._v("公示到家长端：")]),i("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关",defaultChecked:""}})],1),i("span",{staticClass:"mx_btns"},[i("span",{staticClass:"mx_outPoeration"},[i("a-icon",{staticClass:"mx_icon",attrs:{type:"printer"}}),i("span",[e._v("打印")])],1),i("a-divider",{staticStyle:{background:"#000"},attrs:{type:"vertical"}}),i("span",{staticClass:"mx_outPoeration"},[i("a-icon",{staticClass:"mx_icon",attrs:{type:"printer"}}),i("span",[e._v("导出")])],1)],1)],1),i("a-skeleton",{attrs:{loading:e.loadingSample,active:"",title:!1,paragraph:{rows:20}}},[i("a-table",{attrs:{columns:e.columnlist,dataSource:e.SampleRecordList,bordered:"",pagination:e.paginationSample},on:{change:e.handleTableChangeSample},scopedSlots:e._u([{key:"photos_src",fn:function(t,a,s){return i("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[i("viewer",e._l(a.photos_src,function(e){return i("img",{staticStyle:{width:"60px",heigth:"60px",margin:"0 10px"},attrs:{src:e.url}})}),0)],1)}},{key:"operation",fn:function(t,a,s){return[i("div",{staticClass:"editable-row-operations"},[i("div",[i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxShowSample(a.id)}}},[e._v("查看")]),i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxUpdateSample(a)}}},[e._v("编辑")]),i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxDelSample(a.id)}}},[e._v("删除")]),i("a-modal",{attrs:{title:"删除确认",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:e.mxCancels,ok:e.mxDeletes},model:{value:e.isDelSample,callback:function(t){e.isDelSample=t},expression:"isDelSample"}},[i("div",{staticClass:"mx_model"},[i("div",{staticClass:"mx_model_mainDel"},[e._v("\n                                                    是否确定删除该条陪餐记录？\n                                                ")])])])],1)])]}}],null,!1,4230496988)})],1)],1),e.isShowSample?i("div",[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.gobackSample}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("查看详情")])],1),i("a-skeleton",{attrs:{loading:e.loadingSampleShow,active:"",title:!1,paragraph:{rows:20}}},[i("div",{staticClass:"mx_main"},[i("a-row",[i("a-col",{attrs:{span:8}},[i("p",[e._v("\n                                        食  堂：\n                                        "),i("span",[e._v(e._s(e.showSampleList.canteen_str))])]),i("p",[e._v("\n                                        日  期：\n                                        "),i("span",[e._v(e._s(e.showSampleList.meal_date_str))])]),i("p",[e._v("\n                                        餐  次：\n                                        "),i("span",[e._v(e._s(e.showSampleList.meal_str))])]),i("p",[e._v("\n                                        样品名称：\n                                        "),i("span",[e._v(e._s(e.showSampleList.sample_food))])]),i("p",[e._v("\n                                        重  量：\n                                        "),i("span",[e._v(e._s(e.showSampleList.weight)+"g")])]),i("p",[e._v("\n                                        留样时间：\n                                        "),i("span",[e._v(e._s(e.showSampleList.meal_time_str))])]),i("p",[e._v("\n                                        样品有效截止：\n                                        "),i("span",[e._v(e._s(e.showSampleList.expire_str))])]),i("p",[e._v("\n                                        留  样  人：\n                                        "),i("span",[e._v(e._s(e.showSampleList.sample_holder))])]),i("p",{staticClass:"mx_IDCard"},[e._v("\n                                        记  录  人：\n                                        "),i("span",[e._v(e._s(e.showSampleList.sponsor_str))])]),i("p",[e._v("\n                                        记录时间：\n                                        "),i("span",[e._v(e._s(e.showSampleList.created_at_str))])]),i("div",{staticClass:"mx_receipt"},[i("p",[e._v("留样记录小票"),i("a",{on:{click:e.mxPrintingSample}},[e._v("（点击打印）")])]),i("div",{staticClass:"mx_receipt_main"},[i("p",{staticClass:"mx_receipt_main_header"},[e._v("陪餐记录小票")]),i("img",{attrs:{src:a("36a4"),alt:""}}),i("p",[e._v("食  堂："+e._s(e.showSampleList.canteen_str))]),i("p",[e._v("日期/餐次："+e._s(e.moment(e.showSampleList.meal_date_str).format("MM-DD"))+" "+e._s(e.showSampleList.meal_str))]),i("p",[e._v("样品名称："+e._s(e.showSampleList.sample_food))]),i("p",[e._v("留样数量："+e._s(e.showSampleList.weight))]),i("p",[e._v("留样时间："+e._s(e.showSampleList.meal_time_str))]),i("p",[e._v("有效截止："+e._s(e.showSampleList.expire_str))]),i("p",[e._v("留  样  人："+e._s(e.showSampleList.sample_holder))]),i("img",{attrs:{src:a("36a4"),alt:""}}),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("p",[e._v("扫描二维码即可查看\n                                                    样详情及图片")]),i("img",{staticStyle:{width:"54px",height:"54px"},attrs:{src:a("e522"),alt:""}})])])])]),i("a-col",{attrs:{span:16}},[i("div",[i("p",[e._v("留样照片")]),i("viewer",e._l(e.showSampleList.photos_src,function(e){return i("img",{staticStyle:{width:"100px",height:"100px","margin-right":"30px"},attrs:{src:e.url,alt:"",srcset:""}})}),0)],1)])],1)],1)])],1):e._e(),e.isAddSample?i("div",[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goSample}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("添加记录")])],1),i("a-modal",{attrs:{title:"确认返回",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:e.mxCancelSample,ok:e.mxGoSample},model:{value:e.isGoSample,callback:function(t){e.isGoSample=t},expression:"isGoSample"}},[i("div",{staticClass:"mx_model"},[i("div",{staticClass:"mx_model_mainDel"},[e._v("\n                                您还未保存所添加记录，是否继续返回\n                            ")])])]),i("a-skeleton",{attrs:{loading:e.loadingAddSampleShow,active:"",title:!1,paragraph:{rows:20}}},[i("a-form",{attrs:{form:e.formSample},on:{submit:e.sampleAddSubmit}},[i("a-row",{staticClass:"mx_main"},[i("a-col",{attrs:{span:8}},[i("a-form-item",{attrs:{label:"所属食堂"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["canteen",{rules:[{required:!0,message:"请选择所属食堂"}]}],expression:"[\n                                        'canteen',\n                                        {rules: [{ required: true, message: '请选择所属食堂' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择所属食堂"}},e._l(e.canteenShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期"}},[i("a-date-picker",{attrs:{placeholder:"选择时间",defaultValue:e.moment(e.dataSample,"YYYY-MM-DD")},on:{change:e.onchangeDataSample}})],1),i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.mealTimesAddSampleKey},on:{change:e.mealTimesAddSample}},e._l(e.mealTimeShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"样品名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sample_food",{rules:[{required:!0,message:"请填写样品名称"}]}],expression:"[\n                                    'sample_food',\n                                    {rules: [{ required: true, message: '请填写样品名称' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写样品名称"}})],1),i("a-form-item",{attrs:{label:"重量（g）"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{rules:[{required:!0,message:"请填写样品重量"}]}],expression:"[\n                                    'weight',\n                                    {rules: [{ required: true, message: '请填写样品重量' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写重量"}})],1),i("a-form-item",{attrs:{label:"留样时间"}},[i("a-time-picker",{attrs:{defaultValue:e.moment(e.timeSample,"HH:mm"),format:"HH:mm"},on:{change:e.onchangeTimeSample}})],1),i("a-form-item",{attrs:{label:"样品有效截止时间"}},[i("a-date-picker",{staticStyle:{"margin-right":"6px"},attrs:{placeholder:"选择时间",defaultValue:e.moment(e.dataStopSample,"YYYY-MM-DD")},on:{change:e.onchangeDataStopSample}}),i("a-time-picker",{attrs:{defaultValue:e.moment(e.timeStopSample,"HH:mm"),format:"HH:mm"},on:{change:e.onchangeTimeStopSample}})],1),i("a-form-item",{attrs:{label:"留样人"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sample_holder",{rules:[{required:!0,message:"请填写留样人姓名"}]}],expression:"[\n                                    'sample_holder',\n                                    {rules: [{ required: true, message: '请填写留样人姓名' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写留样人"}})],1)],1),i("a-col",{attrs:{span:16}},[i("a-form-item",{attrs:{label:"样品照片"}},[i("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["样品照片",{rules:[{required:!0,message:"请上传样品照片"}]}],expression:"[\n                                                '样品照片',\n                                                {rules: [{ required: true, message: '请上传样品照片' }]}\n                                                ]"}]},[i("div",{staticClass:"clearfix"},[i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.sampleList},on:{preview:e.handleSample,change:e.handleChangeSample}},[e.sampleList.length<3?i("div",[i("a-icon",{attrs:{type:"plus"}})],1):e._e()]),i("a-modal",{staticStyle:{display:"flex"},attrs:{visible:e.sampleVisible,footer:null},on:{cancel:e.handleCancelSample}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.sampleImage}})])],1),i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.sampleList},on:{preview:e.handleSample,change:e.handleChangeSample}},[i("a-button",{attrs:{icon:"upload"}},[e._v("\n                                                    上传图片\n                                                ")])],1)],1)])],1)],1),i("a-form-item",[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("立即添加")])],1)],1)],1)],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isUpdateSample,expression:"isUpdateSample"}]},[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goUpSample}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("编辑记录")])],1),i("a-form",{attrs:{form:e.formSampleUpdata},on:{submit:e.sampleUpdataSubmit}},[i("a-row",{staticClass:"mx_main"},[i("a-col",{attrs:{span:8}},[i("a-form-item",{attrs:{label:"所属食堂"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["canteen",{rules:[{required:!0,message:"请选择所属食堂"}]}],expression:"[\n                                        'canteen',\n                                        {rules: [{ required: true, message: '请选择所属食堂' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择所属食堂"}},e._l(e.canteenShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期"}},[i("a-date-picker",{attrs:{placeholder:"选择时间",value:e.moment(e.dataSampleUpdata,"YYYY-MM-DD")},on:{change:e.onChangeDataSampleUpdata}})],1),i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["meal",{rules:[{required:!0,message:"请选择餐次"}]}],expression:"[\n                                        'meal',\n                                        {rules: [{ required: true, message: '请选择餐次' }]}\n                                    ]"}],staticStyle:{width:"150px"},attrs:{placeholder:"选择餐次"}},e._l(e.mealTimeShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"样品名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sample_food",{rules:[{required:!0,message:"请填写样品名称"}]}],expression:"[\n                                    'sample_food',\n                                    {rules: [{ required: true, message: '请填写样品名称' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写样品名称"}})],1),i("a-form-item",{attrs:{label:"重量（g）"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{rules:[{required:!0,message:"请填写样品重量"}]}],expression:"[\n                                    'weight',\n                                    {rules: [{ required: true, message: '请填写样品重量' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写重量"}})],1),i("a-form-item",{attrs:{label:"留样时间"}},[i("a-time-picker",{attrs:{value:e.moment(e.timeSampleUpdata,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeTimeSampleUpdata}})],1),i("a-form-item",{attrs:{label:"样品有效截止时间"}},[i("a-date-picker",{staticStyle:{"margin-right":"6px"},attrs:{placeholder:"选择时间",value:e.moment(e.dataSampleStopUpdata,"YYYY-MM-DD")},on:{change:e.onChangeStopDataSampleUpdata}}),i("a-time-picker",{attrs:{value:e.moment(e.timeSampleStopUpdata,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeStopTimeSampleUpdata}})],1),i("a-form-item",{attrs:{label:"留样人"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sample_holder",{rules:[{required:!0,message:"请填写留样人姓名"}]}],expression:"[\n                                    'sample_holder',\n                                    {rules: [{ required: true, message: '请填写留样人姓名' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写留样人"}})],1)],1),i("a-col",{attrs:{span:16}},[i("a-form-item",{attrs:{label:"样品照片"}},[i("div",[i("div",{staticClass:"clearfix"},[i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.sampleUpdataList},on:{preview:e.handleUpdataSample,change:e.handleChangeUpdataSample}},[e.sampleUpdataList.length<3?i("div",[i("a-icon",{attrs:{type:"plus"}})],1):e._e()]),i("a-modal",{staticStyle:{display:"flex"},attrs:{visible:e.sampleUpdataVisible,footer:null},on:{cancel:e.handleCancelUpdataSample}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.sampleUpdataImage}})])],1),i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.sampleUpdataList},on:{preview:e.handleUpdataSample,change:e.handleChangeUpdataSample}},[i("a-button",{attrs:{icon:"upload"}},[e._v("\n                                                上传图片\n                                            ")])],1)],1)])],1)],1),i("a-form-item",[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("更新保存")])],1)],1)],1)]),i("a-tab-pane",{key:"3",attrs:{tab:"餐具消毒记录"}},[e.isShowDist||e.isAddDist||e.isUpdateDist?e._e():i("div",[i("a-form",{staticClass:"mx_form mx_staff",attrs:{layout:"inline",form:e.distForm}},[i("a-form-item",{attrs:{label:"食堂："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.canteenDistKey},on:{change:e.selectDistChange}},e._l(e.canteen,function(t,a){return i("a-select-option",{key:a+1},[e._v(e._s(t.title))])}),1)],1),i("div",{staticStyle:{marginTop:"20px"}},[i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.mealTimesDistKey},on:{change:e.mealTimesDistChange}},e._l(e.mealTimes,function(t,a){return i("a-select-option",{key:a+1},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期："}},[i("a-date-picker",{attrs:{disabledDate:e.disinfectStartDate,showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期"},on:{openChange:e.disinfectStartOpenChange},model:{value:e.disinfectStartValue,callback:function(t){e.disinfectStartValue=t},expression:"disinfectStartValue"}}),i("div",{staticClass:"mx_divide"},[e._v("—")]),i("a-date-picker",{attrs:{disabledDate:e.disinfectEndDate,showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择日期",open:e.endOpenDisinfect},on:{openChange:e.disinfectEndOpenChange},model:{value:e.disinfectEndValue,callback:function(t){e.disinfectEndValue=t},expression:"disinfectEndValue"}})],1),i("a-form-item",[i("a-button",{staticClass:"mx_btnbg",attrs:{type:"primary","html-type":"submit"},on:{click:e.mxInquiryDist}},[e._v("查询")]),i("a-button",{on:{click:e.mxDistReset}},[e._v("重置")])],1)],1)],1),i("div",{staticClass:"mx_operate"},[i("a-button",{attrs:{type:"primary",icon:"form",mxAddRecord:""},on:{click:e.mxAddDist}},[e._v("添加记录")]),i("div",{staticClass:"mx_switch"},[i("span",[e._v("公示到家长端：")]),i("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关",defaultChecked:""}})],1),i("span",{staticClass:"mx_btns"},[i("span",{staticClass:"mx_outPoeration"},[i("a-icon",{staticClass:"mx_icon",attrs:{type:"printer"}}),i("span",[e._v("打印")])],1),i("a-divider",{staticStyle:{background:"#000"},attrs:{type:"vertical"}}),i("span",{staticClass:"mx_outPoeration"},[i("a-icon",{staticClass:"mx_icon",attrs:{type:"printer"}}),i("span",[e._v("导出")])],1)],1),i("span",{staticClass:"mx_btns"},[i("span",{staticClass:"mx_outPoeration"},[e._v("\n                                小票打印机配置\n                            ")])])],1),i("a-skeleton",{attrs:{loading:e.loadingDist,active:"",title:!1,paragraph:{rows:20}}},[i("a-table",{attrs:{columns:e.columnDisinfect,dataSource:e.disinfectList,bordered:"",pagination:e.paginationDist},on:{change:e.disinfectTableChange},scopedSlots:e._u([{key:"photos_src",fn:function(t,a,s){return i("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[i("viewer",e._l(a.photos_src,function(e){return i("img",{staticStyle:{width:"60px",heigth:"60px",margin:"0 10px"},attrs:{src:e.url}})}),0)],1)}},{key:"operation",fn:function(t,a,s){return[i("div",{staticClass:"editable-row-operations"},[i("div",[i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxShowDist(a.id)}}},[e._v("查看")]),i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxUpdateDist(a)}}},[e._v("编辑")]),i("a",{staticClass:"mx_operation mx_color",on:{click:function(t){return e.mxDelDist(a.id)}}},[e._v("删除")]),i("a-modal",{attrs:{title:"删除确认",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:e.mxCancelDist,ok:e.mxDelSureDist},model:{value:e.isDelDist,callback:function(t){e.isDelDist=t},expression:"isDelDist"}},[i("div",{staticClass:"mx_model"},[i("div",{staticClass:"mx_model_mainDel"},[e._v("\n                                                    是否确定删除该条餐具消毒记录？\n                                                ")])])])],1)])]}}],null,!1,4108556318)})],1)],1),e.isShowDist?i("div",[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.gobackDist}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("查看详情")])],1),i("a-skeleton",{attrs:{loading:e.loadingDistShow,active:"",title:!1,paragraph:{rows:20}}},[i("div",{staticClass:"mx_main"},[i("a-row",[i("a-col",{attrs:{span:8}},[i("p",[e._v("\n                                        食  堂：\n                                        "),i("span",[e._v(e._s(e.showDistList.canteen_str))])]),i("p",[e._v("\n                                        日  期：\n                                        "),i("span",[e._v(e._s(e.showDistList.exe_date_str))])]),i("p",[e._v("\n                                        餐  次：\n                                        "),i("span",[e._v(e._s(e.showDistList.meal_str))])]),i("p",[e._v("\n                                        餐具名称：\n                                        "),i("span",[e._v(e._s(e.showDistList.title))])]),i("p",[e._v("\n                                        消毒方式：\n                                        "),i("span",[e._v(e._s(e.showDistList.manner_str))])]),i("p",[e._v("\n                                        执行时间：\n                                        "),i("span",[e._v(e._s(e.showDistList.exe_time_str))])]),i("p",[e._v("\n                                        执  行  人：\n                                        "),i("span",[e._v(e._s(e.showDistList.person))])]),i("p",{staticClass:"mx_IDCard"},[e._v("\n                                        记  录  人：\n                                        "),i("span",[e._v(e._s(e.showDistList.sponsor_str))])]),i("p",[e._v("\n                                        记录时间：\n                                        "),i("span",[e._v(e._s(e.showDistList.created_at_str))])]),i("div",{staticClass:"mx_receipt"},[i("p",[e._v("餐具消毒小票"),i("a",{on:{click:e.mxPrintingDist}},[e._v("（点击打印）")])]),i("div",{staticClass:"mx_receipt_main"},[i("p",{staticClass:"mx_receipt_main_header"},[e._v("餐具消毒小票")]),i("img",{attrs:{src:a("36a4"),alt:""}}),i("p",[e._v("食  堂："+e._s(e.showDistList.canteen_str))]),i("p",[e._v("日期/餐次："+e._s(e.moment(e.showDistList.exe_date_str).format("MM-DD"))+" "+e._s(e.showDistList.meal_str))]),i("p",[e._v("餐具名称："+e._s(e.showDistList.title))]),i("p",[e._v("消毒方式："+e._s(e.showDistList.manner_str))]),i("p",[e._v("执行时间："+e._s(e.showDistList.exe_time_str))]),i("p",[e._v("执  行  人："+e._s(e.showDistList.person))]),i("img",{attrs:{src:a("36a4"),alt:""}}),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("p",[e._v("扫描二维码即可查看\n                                                    样详情及图片")]),i("img",{staticStyle:{width:"54px",height:"54px"},attrs:{src:a("e522"),alt:""}})])])])]),i("a-col",{attrs:{span:16}},[i("div",[i("p",[e._v("消毒照片")]),i("div",[i("viewer",e._l(e.showDistList.photos_src,function(e){return i("img",{staticStyle:{width:"100px",height:"100px","margin-right":"30px"},attrs:{src:e.url,alt:"",srcset:""}})}),0)],1)])])],1)],1)])],1):e._e(),e.isAddDist?i("div",[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goDist}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("添加记录")])],1),i("a-modal",{attrs:{title:"确认返回",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:e.mxCancelAddDist,ok:e.mxOkAddDist},model:{value:e.isGoDist,callback:function(t){e.isGoDist=t},expression:"isGoDist"}},[i("div",{staticClass:"mx_model"},[i("div",{staticClass:"mx_model_mainDel"},[e._v("\n                                您还未保存所添加记录，是否继续返回\n                            ")])])]),i("a-skeleton",{attrs:{loading:e.loadingAddDistShow,active:"",title:!1,paragraph:{rows:20}}},[i("a-form",{attrs:{form:e.form},on:{submit:e.handleAddDist}},[i("a-row",{staticClass:"mx_main"},[i("a-col",{attrs:{span:8}},[i("a-form-item",{attrs:{label:"所属食堂"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["canteen",{rules:[{required:!0,message:"请选择所属食堂"}]}],expression:"[\n                                        'canteen',\n                                        {rules: [{ required: true, message: '请选择所属食堂' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择所属食堂"}},e._l(e.canteenShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期"}},[i("a-date-picker",{attrs:{placeholder:"选择时间",defaultValue:e.moment(e.newDataDist,"YYYY-MM-DD")},on:{change:e.onchangeDataDist}})],1),i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{staticStyle:{width:"150px"},attrs:{value:e.mealTimesAddDistKey},on:{change:e.mealTimesAddDist}},e._l(e.mealTimeShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"餐具名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请填写餐具名称"}]}],expression:"[\n                                    'name',\n                                    {rules: [{ required: true, message: '请填写餐具名称' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写样品名称"}})],1),i("a-form-item",{attrs:{label:"消毒方式"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["disinfectMode",{rules:[{required:!0,message:"请选择消毒方式"}]}],expression:"[\n                                        'disinfectMode',\n                                        {rules: [{ required: true, message: '请选择消毒方式' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择消毒方式"}},e._l(e.disinfectMode,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"执行时间"}},[i("a-time-picker",{attrs:{defaultValue:e.moment(e.newTimeDist,"HH:mm"),format:"HH:mm"},on:{change:e.onchangeTimeDist}})],1),i("a-form-item",{attrs:{label:"执行人"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["runName",{rules:[{required:!0,message:"请填写执行人姓名"}]}],expression:"[\n                                    'runName',\n                                    {rules: [{ required: true, message: '请填写执行人姓名' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写执行人姓名"}})],1)],1),i("a-col",{attrs:{span:16}},[i("a-form-item",{attrs:{label:"样品照片"}},[i("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["样品照片",{rules:[{required:!0,message:"请上传样品照片"}]}],expression:"[\n                                                '样品照片',\n                                                {rules: [{ required: true, message: '请上传样品照片' }]}\n                                                ]"}]},[i("div",{staticClass:"clearfix"},[i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.distListAdd},on:{preview:e.handleAddDistpreview,change:e.handleChangeAddDist}},[e.distListAdd.length<3?i("div",[i("a-icon",{attrs:{type:"plus"}})],1):e._e()]),i("a-modal",{staticStyle:{display:"flex"},attrs:{visible:e.distVisibleAdd,footer:null},on:{cancel:e.handleCancelAddDist}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.distImageAdd}})])],1),i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.distListAdd},on:{preview:e.handleAddDist,change:e.handleChangeAddDist}},[i("a-button",{attrs:{icon:"upload"}},[e._v("\n                                                    上传图片\n                                                ")])],1)],1)])],1)],1),i("a-form-item",[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("立即添加")])],1)],1)],1)],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isUpdateDist,expression:"isUpdateDist"}]},[i("a-breadcrumb",{attrs:{separator:" "}},[i("a-breadcrumb-item",[i("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goUpdataDist}})],1),i("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("编辑记录")])],1),i("a-form",{attrs:{form:e.distUpdataForm},on:{submit:e.handleUpdataDist}},[i("a-row",{staticClass:"mx_main"},[i("a-col",{attrs:{span:8}},[i("a-form-item",{attrs:{label:"所属食堂"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["canteen",{rules:[{required:!0,message:"请选择所属食堂"}]}],expression:"[\n                                        'canteen',\n                                        {rules: [{ required: true, message: '请选择所属食堂' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择所属食堂"}},e._l(e.canteenShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"日期"}},[i("a-date-picker",{staticStyle:{width:"300px"},attrs:{placeholder:"选择时间",value:e.moment(e.dataDistDataUpdata,"YYYY-MM-DD"),format:"YYYY-MM-DD"},on:{change:e.onChangedataDistDataUpdata}})],1),i("a-form-item",{attrs:{label:"餐次："}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["meal",{rules:[{required:!0,message:"请选择餐次"}]}],expression:"[\n                                        'meal',\n                                        {rules: [{ required: true, message: '请选择餐次' }]}\n                                    ]"}],staticStyle:{width:"150px"},attrs:{placeholder:"选择餐次"}},e._l(e.mealTimeShow,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"餐具名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请填写餐具名称"}]}],expression:"[\n                                    'name',\n                                    {rules: [{ required: true, message: '请填写餐具名称' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写样品名称"}})],1),i("a-form-item",{attrs:{label:"消毒方式"}},[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["disinfectMode",{rules:[{required:!0,message:"请选择消毒方式"}]}],expression:"[\n                                        'disinfectMode',\n                                        {rules: [{ required: true, message: '请选择消毒方式' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"选择消毒方式"}},e._l(e.disinfectMode,function(t,a){return i("a-select-option",{key:t.id},[e._v(e._s(t.title))])}),1)],1),i("a-form-item",{attrs:{label:"执行时间"}},[i("a-time-picker",{staticStyle:{width:"300px"},attrs:{value:e.moment(e.dataDistTimeUpdata,"HH:mm"),format:"HH:mm"},on:{change:e.onChangedataDistTimeUpdata}})],1),i("a-form-item",{attrs:{label:"执行人"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["person",{rules:[{required:!0,message:"请填写执行人姓名"}]}],expression:"[\n                                    'person',\n                                    {rules: [{ required: true, message: '请填写执行人姓名' }]}\n                                    ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写执行人姓名"}})],1)],1),i("a-col",{attrs:{span:16}},[i("a-form-item",{attrs:{label:"样品照片"}},[i("div",[i("div",{staticClass:"clearfix"},[i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.distList},on:{preview:e.handleDist,change:e.handleChangeDist}},[e.distList.length<3?i("div",[i("a-icon",{attrs:{type:"plus"}})],1):e._e()]),i("a-modal",{staticStyle:{display:"flex"},attrs:{visible:e.distVisible,footer:null},on:{cancel:e.handleCancelDist}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.distImage}})])],1),i("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.distList},on:{preview:e.handleDist,change:e.handleChangeDist}},[i("a-button",{attrs:{icon:"upload"}},[e._v("\n                                                上传图片\n                                            ")])],1)],1)])],1)],1),i("a-form-item",[i("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("更新保存")])],1)],1)],1)])],1)],1)],1)},s=[],n=(a("7f7f"),a("75fc")),o=(a("ac6a"),a("6b54"),a("c1df")),r=a.n(o),l=(a("3022"),[{title:"食堂",dataIndex:"canteen_str",align:"center",width:"8%",scopedSlots:{customRender:"canteen_str"}},{title:"日期",dataIndex:"meal_date_str",align:"center",width:"12%",scopedSlots:{customRender:"meal_date_str"}},{title:"餐次",dataIndex:"meal_str",align:"center",width:"6%",scopedSlots:{customRender:"meal_str"}},{title:"陪餐人",dataIndex:"cater_nickname",align:"center",width:"8%",scopedSlots:{customRender:"cater_nickname"}},{title:"职位",dataIndex:"cater_position",align:"center",width:"8%",scopedSlots:{customRender:"cater_position"}},{title:"陪餐时间",dataIndex:"meal_time_str",align:"center",width:"10%",scopedSlots:{customRender:"meal_time_str"}},{title:"餐后评价",dataIndex:"appraisal",align:"center",width:"18%",scopedSlots:{customRender:"appraisal"}},{title:"照片",dataIndex:"photos_src",align:"center",width:"20%",scopedSlots:{customRender:"photos_src"}},{title:"操作按钮",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}]),c=[],d=0;d<7;d++){d<2?(b="食堂1",S="早餐"):d<4?(b="食堂2",S="中餐"):d<5?(b="食堂3",S="晚餐"):(b="食堂4",S="加餐");var m=[[{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic33.nipic.com/20131007/13639685_123501617185_2.jpg"}],[{pic:"http://pic16.nipic.com/20111006/6239936_092702973000_2.jpg"},{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"}],[{pic:"http://pic40.nipic.com/20140424/12259251_002036722178_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic31.nipic.com/20130801/11604791_100539834000_2.jpg"}],[{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic33.nipic.com/20131007/13639685_123501617185_2.jpg"}],[{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}],[{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}]];c.push({key:d.toString(),canteen_str:"".concat(b),meal_date_str:"2019-0".concat(d,"-0").concat(d),meal_str:"".concat(S),cater_nickname:"阿".concat(d),cater_position:"食堂主任".concat(d),meal_time_str:"1".concat(d,":1").concat(d),appraisal:"饭菜香浓可口，延年益寿",photos_src:m[d]})}for(var p=[{title:"食堂",dataIndex:"canteen_str",align:"center",width:"8%",scopedSlots:{customRender:"canteen_str"}},{title:"日期",dataIndex:"meal_date_str",align:"center",width:"10%",scopedSlots:{customRender:"meal_date_str"}},{title:"餐次",dataIndex:"meal_str",align:"center",width:"6%",scopedSlots:{customRender:"meal_str"}},{title:"样品名称",dataIndex:"sample_food",align:"center",width:"10%",scopedSlots:{customRender:"sample_food"}},{title:"重量（g）",dataIndex:"weight",align:"center",width:"8%",scopedSlots:{customRender:"weight"}},{title:"留样时间",dataIndex:"meal_time_str",align:"center",width:"8%",scopedSlots:{customRender:"meal_time_str"}},{title:"样品有效截止",dataIndex:"expire_str",align:"center",width:"10%",scopedSlots:{customRender:"expire_str"}},{title:"留样人",dataIndex:"sample_holder",align:"center",width:"8%",scopedSlots:{customRender:"sample_holder"}},{title:"照片",dataIndex:"photos_src",align:"center",width:"18%",scopedSlots:{customRender:"photos_src"}},{title:"操作按钮",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}],u=[],h=0;h<7;h++){h<2?(b="食堂1",S="早餐"):h<4?(b="食堂2",S="中餐"):h<5?(b="食堂3",S="晚餐"):(b="食堂4",S="加餐");var f=[[{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}],[{pic:"http://pic16.nipic.com/20111006/6239936_092702973000_2.jpg"}],[{pic:"http://pic40.nipic.com/20140424/12259251_002036722178_2.jpg"}],[{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"}],[{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"}],[{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}]];u.push({key:h.toString(),canteen_str:"".concat(b),meal_date_str:"2019-0".concat(h,"-0").concat(h),meal_str:"".concat(S),sample_food:"番茄炒蛋",weight:"20".concat(h),meal_time_str:"1".concat(h,":1").concat(h),expire_str:"0".concat(h,":0").concat(h,"  1").concat(h,":1").concat(h),sample_holder:"阿".concat(h),photos_src:f[h]})}for(var g=[{title:"食堂",dataIndex:"canteen_str",align:"center",width:"10%",scopedSlots:{customRender:"canteen_str"}},{title:"日期",dataIndex:"exe_date_str",align:"center",width:"10%",scopedSlots:{customRender:"exe_date_str"}},{title:"餐次",dataIndex:"meal_str",align:"center",width:"6%",scopedSlots:{customRender:"meal_str"}},{title:"餐具名称",dataIndex:"name",align:"center",width:"15%",scopedSlots:{customRender:"name"}},{title:"消毒方式",dataIndex:"manner_str",align:"center",width:"10%",scopedSlots:{customRender:"manner_str"}},{title:"执行时间",dataIndex:"exe_time_str",align:"center",width:"8%",scopedSlots:{customRender:"exe_time_str"}},{title:"执行人",dataIndex:"person",align:"center",width:"8%",scopedSlots:{customRender:"person"}},{title:"照片",dataIndex:"photos_src",align:"center",width:"18%",scopedSlots:{customRender:"photos_src"}},{title:"操作按钮",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}],_=[],v=0;v<7;v++){var S,b;v<2?(b="食堂1",S="早餐"):v<4?(b="食堂2",S="中餐"):v<5?(b="食堂3",S="晚餐"):(b="食堂4",S="加餐");m=[[{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic33.nipic.com/20131007/13639685_123501617185_2.jpg"}],[{pic:"http://pic16.nipic.com/20111006/6239936_092702973000_2.jpg"},{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"},{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"}],[{pic:"http://pic40.nipic.com/20140424/12259251_002036722178_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic31.nipic.com/20130801/11604791_100539834000_2.jpg"}],[{pic:"http://pic51.nipic.com/file/20141025/8649940_220505558734_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://pic33.nipic.com/20131007/13639685_123501617185_2.jpg"}],[{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}],[{pic:"http://pic46.nipic.com/20140815/2531170_172548240000_2.jpg"},{pic:"http://pic41.nipic.com/20140508/18609517_112216473140_2.jpg"},{pic:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"}]];_.push({key:v.toString(),canteen_str:"".concat(b),exe_date_str:"2019-0".concat(v,"-0").concat(v),meal_str:"".concat(S),name:"餐盘、筷子、勺子".concat(v),manner_str:"消毒柜".concat(v),exe_time_str:"1".concat(v,":1").concat(v),person:"阿".concat(v),photos_src:m[v]})}var x={data:function(){var e=this;return{activeKey:"1",loadingActive:!1,loading:!0,loadingShow:!0,loadingAddShow:!0,MealRecordList:c,SampleRecordList:u,disinfectList:_,column:l,columnlist:p,columnDisinfect:g,startValue:null,endValue:null,endOpen:!1,canteen:[],canteenShow:[],canteenKey:"全部",canteenId:0,mxClassVal:"",mealId:"",mealTimes:[],mealTimeShow:[],mealTimesKey:"全部",mealTimesId:0,mealTimesAddKey:"",mealTimesAddId:0,addShow:{},newData:"",newDataTime:"",fileImg:[],updataDataTime:"",updataData:"",updataId:"",startTimeMeal:"",endTimeMeal:"",form:this.$form.createForm(this),myform:this.$form.createForm(this),myformMeal:this.$form.createForm(this),loadingSample:!0,loadingSampleShow:!0,loadingAddSampleShow:!0,sampleId:"",formSample:this.$form.createForm(this),formSampleUpdata:this.$form.createForm(this),imgSampleListsImg:[],updateSampleId:"",sampleUpdataList:[],sampleUpdataVisible:!1,sampleUpdataImage:"",canteenSampleKey:"全部",canteenSampleId:0,mealTimesSampleKey:"全部",mealTimesSampleId:0,startSampleTimeMeal:"",endSampleTimeMeal:"",mealTimesAddSampleKey:"",dataSample:"",timeSample:"",dataStopSample:"",timeStopSample:"",sampleImg:[],dataSampleUpdata:"",timeSampleUpdata:"",dataSampleStopUpdata:"",timeSampleStopUpdata:"",sampleStartValue:null,sampleEndValue:null,endOpenSample:!1,disinfectStartValue:null,disinfectEndValue:null,endOpenDisinfect:!1,isGoBack:!1,isDelDist:!1,isShowDist:!1,isAddDist:!1,isGoDist:!1,distList:[],showDistList:{},distImage:"",distVisible:!1,loadingDist:!0,loadingDistShow:!0,loadingAddDistShow:!0,distForm:this.$form.createForm(this),distUpdataForm:this.$form.createForm(this),distListAdd:[],distListId:"",newDataDist:"",newTimeDist:"",distImageAdd:"",distVisibleAdd:!1,distUpdataId:"",canteenDistKey:"全部",canteenDistId:0,mealTimesDistKey:"全部",mealTimesDistId:0,startDistTimeMeal:"",endDistTimeMeal:"",disinfectMode:[],mealTimesAddDistKey:"",distImg:[],isUpdateDist:!1,dataDistDataUpdata:"",dataDistTimeUpdata:"",pagination:{pageSize:15,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(t){return"共 ".concat(t," 条记录 第 ").concat(e.pagination.current," / ").concat(Math.ceil(t/e.pagination.pageSize)," 页")}},paginationSample:{pageSize:15,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(t){return"共 ".concat(t," 条记录 第 ").concat(e.paginationSample.current," / ").concat(Math.ceil(t/e.paginationSample.pageSize)," 页")}},paginationDist:{pageSize:15,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(t){return"共 ".concat(t," 条记录 第 ").concat(e.paginationDist.current," / ").concat(Math.ceil(t/e.paginationDist.pageSize)," 页")}},isDel:!1,isShow:!1,isAddRecord:!1,isUpdateRecord:!1,showMealList:{},showMealId:"",isDelSample:!1,isShowSample:!1,isAddSample:!1,isUpdateSample:!1,showSampleList:{},previewVisible:!1,previewImage:"",previewVisibles:!1,previewImages:"",fileList:[],imgsLists:[],uploading:!1,moment:r.a,defValue:"",updataList:"",isGoSample:!1,sampleList:[],sampleVisible:!1,sampleImage:""}},watch:{startValue:function(e){e&&(this.startTimeMeal=r()(e._d).format("YYYY-MM-DD  HH:mm:ss"))},endValue:function(e){e&&(this.endTimeMeal=r()(e._d).format("YYYY-MM-DD  HH:mm:ss"))},sampleStartValue:function(e){e&&(this.startSampleTimeMeal=r()(e._d).format("YYYY-MM-DD  HH:mm:ss"))},sampleEndValue:function(e){e&&(this.endSampleTimeMeal=r()(e._d).format("YYYY-MM-DD  HH:mm:ss"))},disinfectStartValue:function(e){e&&(this.startDistTimeMeal=r()(e._d).format("YYYY-MM-DD  HH:mm:ss"))},disinfectEndValue:function(e){e&&(this.endDistTimeMeal=r()(e._d).format("YYYY-MM-DD  HH:mm:ss"))}},mounted:function(){this.getCanteen(),this.getMealTimes(),this.getMealRecord("","","","",""),this.getSampleList("","","",""),this.getDistList("","","","")},methods:{callback:function(e){var t=this;this.activeKey=e,this.loadingActive=!0,setTimeout(function(){t.loadingActive=!1},300)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},handleTableChange:function(e,t,a){this.pagination.pageSize=e.pageSize,this.pagination.current=e.current},inquiryData:function(){this.loading=!0,this.getMealRecord(this.canteenId,this.mealTimesId,this.startTimeMeal,this.endTimeMeal,this.mxClassVal)},inquiryMealReset:function(){this.startValue=null,this.endValue=null,this.canteenKey=1,this.mealTimesKey=1,this.canteenId=0,this.mealTimesId=0,this.mxClassVal="",this.loading=!0,this.getMealRecord("","","","","")},handleAddSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){var i={url:"api/school/safety/cater",method:"post",data:{canteen_id:a.canteen,meal:t.mealTimesAddKey,meal_time:t.newData+" "+t.newDataTime,cater_nickname:a.cater_nickname,cater_position:a.cater_position,appraisal:a.appraisal,photos:t.fileImg.join(",")}};t.$apiAxiox(i).then(function(e){0==e.data.code?(t.$message.success("添加记录成功"),t.loading=!0,t.getMealRecord("","","","",""),t.isAddRecord=!1,t.fileList=[]):t.$message.success(e.data.msg)})}})},handleUpdata:function(e){var t=this;e.preventDefault(),this.myformMeal.validateFields(function(e,a){if(!e){var i=[];t.imgsLists.forEach(function(e){i.push(e.response.data.id)});var s={url:"api/school/safety/cater/"+t.updataId,method:"put",data:{canteen_id:a.canteen,meal:a.mealTimesm,meal_time:t.updataData+" "+t.updataDataTime,cater_nickname:a.accompanier,cater_position:a.positionman,appraisal:a.appraise,photos:i.join(",")}};t.$apiAxiox(s).then(function(e){0==e.data.code?(t.$message.success("修改成功"),t.loading=!0,t.getMealRecord("","","","",""),t.isUpdateRecord=!1,t.imgsLists=[]):console.log(22)})}})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=Object(n["a"])(e.fileList);t=t.slice(-3);var a=[];t=t.map(function(e){return e.response&&(e.url=e.response.url,a.push(e.response.data.id)),e}),this.fileImg=a,this.fileList=t},handleCancels:function(){this.previewVisibles=!1},handlePreviews:function(e){this.previewImages=e.url||e.thumbUrl,this.previewVisibles=!0},handleChanges:function(e){var t=Object(n["a"])(e.fileList);t=t.slice(-3),t=t.map(function(e){return e.response&&(e.url=e.response.data.url),e}),this.imgsLists=t},getCanteen:function(){var e=this;this.$get("api/school/canteen",{}).then(function(t){if(0==t.data.code){e.canteen=t.data.data;var a={id:0,title:"全部"};e.canteen.splice(0,0,a);var i=[];e.canteen.forEach(function(e,t){0!=t&&i.push(e)}),e.canteenShow=i}else console.log(22)})},selectChange:function(e){this.canteenKey=e,this.canteenId=this.canteen[e-1].id},emitEmpty:function(){this.$refs.userNameInput.focus(),this.mxClassVal=""},onChangeDataMeal:function(e,t){this.newData=t},onChangeTimeMeal:function(e,t){this.newDataTime=t},onChangeUpdataDataMeal:function(e,t){this.updataData=t},onChangeUpdataTimeMeal:function(e,t){this.updataDataTime=t},getMealTimes:function(){var e=this;this.$get("api/common/dictionaries").then(function(t){if(0==t.data.code){e.mealTimes=t.data.data.eat;var a={id:0,title:"全部"};e.mealTimes.splice(0,0,a);var i=[];e.mealTimes.forEach(function(e,t){0!=t&&i.push(e)}),e.mealTimeShow=i}else console.log(22)})},mealTimesChange:function(e){this.mealTimesKey=e,this.mealTimesId=this.mealTimes[e-1].id},mealTimesAddChange:function(e){this.mealTimesAddKey=e},getAddShow:function(){var e=this;this.$get("api/school/safety/cater/create",{}).then(function(t){0==t.data.code?(e.mealTimesAddKey=t.data.data.meal,e.newData=t.data.data.meal_date_str,e.newDataTime=t.data.data.meal_time_str,e.loadingAddShow=!1):console.log(22)})},getMealRecord:function(e,t,a,i,s){var n=this,o=this;this.$get("api/school/safety/cater?page="+this.pagination.current+"&canteen_id="+e+"&meal="+t+"&begin_time="+a+"&end_time="+i+"&keyword="+s).then(function(e){0==e.data.code?(o.pagination.pageSize=e.data.data.per_page,o.pagination.total=e.data.data.total,e.data.data.data.forEach(function(e){e.key=e.id,e.photos_src.forEach(function(e){e.url||(e.url="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")})}),n.MealRecordList=e.data.data.data,n.loading=!1):console.log(22)})},mxAddRecord:function(){this.isAddRecord=!0,this.loadingAddShow=!0,this.getAddShow()},mxShowMeal:function(e){var t=this;this.isShow=!0,this.loadingShow=!0,this.showMealId=e,this.$get("api/school/safety/cater/"+e).then(function(e){0==e.data.code?(t.showMealList=e.data.data,t.loadingShow=!1):console.log(22)})},mxPrintingMeal:function(){this.$message.warning("未配置小票打印设备")},mxUpdateMeal:function(e){this.updataId=e.id,this.isUpdateRecord=!0,this.updataList=e,this.myformMeal.setFieldsValue({canteen:e.canteen_id,accompanier:e.cater_nickname,appraise:e.appraisal,mealTimesm:e.meal,positionman:e.cater_position}),this.updataData=e.meal_date_str,this.updataDataTime=e.meal_time_str;var t=[];e.photos_src.forEach(function(e,a){var i={uid:e.id,name:"xxx.png",response:{data:{id:parseInt(e.id),url:e.url}},status:"done",url:e.url};t.push(i)}),this.imgsLists=t},mxDel:function(e){this.isDel=!0,this.mealId=e},mxCancel:function(){this.isDel=!1},mxDelete:function(){var e=this;this.isDel=!1;var t={url:"api/school/safety/cater/"+this.mealId,method:"delete",data:{}};this.$apiAxiox(t).then(function(t){e.isOffDuty=!1,e.$message.success("删除记录成功"),e.loading=!0,e.getMealRecord("","","","","")})},goback:function(){this.isShow=!1},mxCancelBack:function(){this.isGoBack=!1},mxGoback:function(){this.isGoBack=!1,this.isAddRecord=!1,this.fileList=[]},goRecord:function(){this.isGoBack=!0},goUpRecord:function(){this.isUpdateRecord=!1,this.imgsLists=[]},handleTableChangeSample:function(e,t,a){this.paginationSample.pageSize=e.pageSize,this.paginationSample.current=e.current,this.getSampleList("","","","")},getSampleList:function(e,t,a,i){var s=this,n=this;this.$get("api/school/safety/sample?page="+this.paginationSample.current+"&canteen_id="+e+"&meal="+t+"&begin_time="+a+"&end_time="+i).then(function(e){0==e.data.code?(n.paginationSample.pageSize=e.data.data.per_page,n.paginationSample.total=e.data.data.total,e.data.data.data.forEach(function(e){e.key=e.id,e.photos_src.forEach(function(e){e.url||(e.url="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")})}),s.SampleRecordList=e.data.data.data,s.loadingSample=!1):console.log(22)})},mxInquirySample:function(){this.loadingSample=!0,this.getSampleList(this.canteenSampleId,this.mealTimesSampleId,this.startSampleTimeMeal,this.endSampleTimeMeal)},mxResetSample:function(){this.sampleStartValue=null,this.sampleEndValue=null,this.startSampleTimeMeal="",this.endSampleTimeMeal="",this.canteenSampleKey=1,this.mealTimesSampleKey=1,this.canteenSampleId=0,this.mealTimesSampleId=0,this.loadingSample=!0,this.getSampleList("","","","")},selectSampleChange:function(e){this.canteenSampleKey=e,this.canteenSampleId=this.canteen[e-1].id},mealTimesSampleChange:function(e){this.mealTimesSampleKey=e,this.mealTimesSampleId=this.mealTimes[e-1].id},sampleStartDate:function(e){var t=this.sampleEndValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},sampleEndDate:function(e){var t=this.sampleStartValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},sampleStartOpenChange:function(e){e||(this.endOpenSample=!0)},sampleEndOpenChange:function(e){this.endOpenSample=e},mxAddSample:function(){this.isAddSample=!0,this.loadingAddSampleShow=!0,this.getSampleAddShow()},getSampleAddShow:function(){var e=this;this.$get("api/school/safety/sample/create",{}).then(function(t){0==t.data.code?(e.dataSample=t.data.data.meal_date_str,e.timeSample=t.data.data.meal_time_str,e.dataStopSample=t.data.data.expire_date_str,e.timeStopSample=t.data.data.expire_time_str,e.mealTimesAddSampleKey=t.data.data.meal,e.loadingAddSampleShow=!1):console.log(22)})},onchangeDataSample:function(e,t){this.dataSample=t},onchangeTimeSample:function(e,t){this.timeSample=t},onchangeDataStopSample:function(e,t){this.dataStopSample=t},onchangeTimeStopSample:function(e,t){this.timeStopSample=t},mealTimesAddSample:function(e){this.mealTimesAddSampleKey=e},sampleAddSubmit:function(e){var t=this;e.preventDefault(),this.formSample.validateFields(function(e,a){if(!e){var i={url:"api/school/safety/sample",method:"post",data:{canteen_id:a.canteen,meal:t.mealTimesAddSampleKey,meal_time:t.dataSample+" "+t.timeSample,expire_time:t.dataStopSample+" "+t.timeStopSample,sample_holder:a.sample_holder,sample_food:a.sample_food,weight:a.weight,photos:t.sampleImg.join(",")}};t.$apiAxiox(i).then(function(e){0==e.data.code?(t.$message.success("添加记录成功"),t.isAddSample=!1,t.loadingSample=!0,t.getSampleList("","","",""),t.sampleList=[]):t.$message.success(e.data.msg)})}})},mxShowSample:function(e){var t=this;this.isShowSample=!0,this.loadingSampleShow=!0,this.$get("api/school/safety/sample/"+e).then(function(e){0==e.data.code?(e.data.data.photos_src.forEach(function(e){e.url||(e.url="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")}),t.showSampleList=e.data.data,t.loadingSampleShow=!1):console.log(22)})},mxPrintingSample:function(){this.$message.warning("未配置小票打印设备")},mxUpdateSample:function(e){console.log(e),this.isUpdateSample=!0,this.dataSampleUpdata=e.meal_date_str,this.timeSampleUpdata=e.meal_time_str,this.dataSampleStopUpdata=e.expire_str,this.timeSampleStopUpdata=e.expire_str,this.updateSampleId=e.id;var t=[];e.photos_src.forEach(function(e,a){var i={uid:e.id,name:"xxx.png",response:{data:{id:parseInt(e.id),url:e.url}},status:"done",url:e.url};t.push(i)}),this.sampleUpdataList=t,this.formSampleUpdata.setFieldsValue({canteen:e.canteen_id,meal:e.meal,sample_holder:e.sample_holder,weight:e.weight,sample_food:e.sample_food})},sampleUpdataSubmit:function(e){var t=this;e.preventDefault(),this.formSampleUpdata.validateFields(function(e,a){if(!e){var i=[];t.sampleUpdataList.forEach(function(e){i.push(e.response.data.id)});var s,n=r()(t.dataSampleStopUpdata).format("YYYY-MM-DD");s=t.timeSampleStopUpdata.length>5?r()(t.timeSampleStopUpdata).format("HH:mm"):t.timeSampleStopUpdata;var o={url:"api/school/safety/sample/"+t.updateSampleId,method:"PUT",data:{canteen_id:a.canteen,meal:a.meal,meal_time:t.dataSampleUpdata+" "+t.timeSampleUpdata,expire_time:n+" "+s,sample_holder:a.sample_holder,sample_food:a.sample_food,weight:a.weight,photos:i.join(",")}};t.$apiAxiox(o).then(function(e){0==e.data.code?(t.isUpdateSample=!1,t.$message.success("修改记录成功"),t.loadingSample=!0,t.getSampleList("","","",""),t.sampleUpdataList=[]):t.$message.success(e.data.msg)})}})},mxDelSample:function(e){this.isDelSample=!0,this.sampleId=e},mxCancels:function(){this.isDelSample=!1},mxDeletes:function(){var e=this;this.isDelSample=!1;var t={url:"api/school/safety/sample/"+this.sampleId,method:"delete",data:{}};this.$apiAxiox(t).then(function(t){e.$message.success("删除记录成功"),e.loadingSample=!0,e.getSampleList("","","","")})},gobackSample:function(){this.isShowSample=!1},goSample:function(){this.isGoSample=!0},mxCancelSample:function(){this.isGoSample=!1},mxGoSample:function(){this.isGoSample=!1,this.isAddSample=!1},handleCancelSample:function(){this.sampleVisible=!1},handleSample:function(e){this.sampleImage=e.url||e.thumbUrl,this.sampleVisible=!0},handleChangeSample:function(e){var t=Object(n["a"])(e.fileList);t=t.slice(-3);var a=[];t=t.map(function(e){return e.response&&(e.url=e.response.url,a.push(e.response.data.id)),e}),this.sampleImg=a,this.sampleList=t},onChangeDataSampleUpdata:function(e,t){this.dataSampleUpdata=t},onChangeTimeSampleUpdata:function(e,t){this.timeSampleUpdata=t},onChangeStopDataSampleUpdata:function(e,t){this.dataSampleStopUpdata=t},onChangedataDistTimeUpdata:function(e,t){this.dataDistTimeUpdata=t},onChangedataDistDataUpdata:function(e,t){this.dataDistDataUpdata=t},onChangeStopTimeSampleUpdata:function(e,t){this.timeSampleStopUpdata=t},handleCancelUpdataSample:function(){this.sampleUpdataVisible=!1},handleUpdataSample:function(e){this.sampleUpdataImage=e.url||e.thumbUrl,this.sampleUpdataVisible=!0},handleChangeUpdataSample:function(e){var t=Object(n["a"])(e.fileList);t=t.slice(-3);var a=[];t=t.map(function(e){return e.response&&(e.url=e.response.data.url,a.push(e.response.data.id)),e}),this.sampleUpdataList=t},goUpSample:function(){this.isUpdateSample=!1,this.sampleUpdataList=[]},onChangeTime:function(e,t){console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",t)},onOkTime:function(e){console.log("onOk: ",e)},getCurrentData:function(){return(new Date).toLocaleDateString()},getCurrentTime:function(){return(new Date).toLocaleTimeString()},selectDistChange:function(e){this.canteenDistKey=e,this.canteenDistId=this.canteen[e-1].id},mealTimesDistChange:function(e){this.mealTimesDistKey=e,this.mealTimesDistId=this.mealTimes[e-1].id},getDistList:function(e,t,a,i){var s=this,n=this;this.$get("api/school/safety/disinfec?page="+this.paginationDist.current+"&canteen_id="+e+"&meal="+t+"&begin_time="+a+"&end_time="+i).then(function(e){0==e.data.code?(n.paginationDist.pageSize=e.data.data.per_page,n.paginationDist.total=e.data.data.total,e.data.data.data.forEach(function(e){e.key=e.id,e.name=e.title,e.photos_src.forEach(function(e){e.url||(e.url="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")})}),s.disinfectList=e.data.data.data,s.loadingDist=!1):console.log(22)})},mxInquiryDist:function(){this.loadingDist=!0,this.getDistList(this.canteenDistId,this.mealTimesDistId,this.startDistTimeMeal,this.endDistTimeMeal)},mxDistReset:function(){this.disinfectStartValue=null,this.disinfectEndValue=null,this.startDistTimeMeal="",this.endDistTimeMeal="",this.canteenDistKey=1,this.mealTimesDistKey=1,this.canteenDistId=0,this.mealTimesDistId=0,this.loadingDist=!0,this.getDistList("","","","")},onchangeDataDist:function(e,t){this.newDataDist=t},onchangeTimeDist:function(e,t){this.newTimeDist=t},disinfectStartDate:function(e){var t=this.disinfectEndDate;return!(!e||!t)&&e.valueOf()>t.valueOf()},disinfectEndDate:function(e){var t=this.disinfectStartValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},disinfectStartOpenChange:function(e){e||(this.endOpenDisinfect=!0)},disinfectEndOpenChange:function(e){this.endOpenDisinfect=e},disinfectTableChange:function(e,t,a){this.paginationDist.pageSize=e.pageSize,this.paginationDist.current=e.current},mxDelDist:function(e){this.isDelDist=!0,this.distListId=e},mxCancelDist:function(){this.isDelDist=!1},mxDelSureDist:function(){var e=this;this.isDelDist=!1;var t={url:"api/school/safety/disinfec/"+this.distListId,method:"delete",data:{}};this.$apiAxiox(t).then(function(t){e.$message.success("删除记录成功"),e.loadingDist=!0,e.getDistList("","","","")})},mxShowDist:function(e){var t=this;this.isShowDist=!0,this.loadingDistShow=!0,this.$get("api/school/safety/disinfec/"+e).then(function(e){0==e.data.code?(e.data.data.photos_src.forEach(function(e){e.url||(e.url="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")}),t.showDistList=e.data.data,t.loadingDistShow=!1):console.log(22)})},mxPrintingDist:function(){this.$message.warning("未配置小票打印设备")},gobackDist:function(){this.isShowDist=!1},getDisinfectMode:function(){var e=this;this.$get("api/common/dictionaries").then(function(t){0==t.data.code?e.disinfectMode=t.data.data.manner:console.log(22)})},mxAddDist:function(){this.isAddDist=!0,this.getDisinfectMode(),this.loadingAddDistShow=!0,this.getDistAddShow()},getDistAddShow:function(){var e=this;this.$get("api/school/safety/disinfec/create",{}).then(function(t){0==t.data.code?(e.newDataDist=t.data.data.exe_time_date,e.newTimeDist=t.data.data.exe_time_str,e.mealTimesAddDistKey=t.data.data.meal,e.loadingAddDistShow=!1):console.log(22)})},mealTimesAddDist:function(e){this.mealTimesAddDistKey=e},handleAddDist:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){var i={url:"api/school/safety/disinfec",method:"post",data:{canteen_id:a.canteen,meal:t.mealTimesAddDistKey,manner:a.disinfectMode,time:t.newDataDist,exe_time:t.newDataDist+" "+t.newTimeDist,title:a.name,person:a.runName,photos:t.distImg.join(",")}};t.$apiAxiox(i).then(function(e){0==e.data.code?(t.$message.success("添加记录成功"),t.isAddDist=!1,t.distListAdd=[],t.loadingDist=!0,t.getDistList("","","","")):t.$message.success(e.data.msg)})}})},goDist:function(){this.isGoDist=!0},mxCancelAddDist:function(){this.isGoDist=!1},mxOkAddDist:function(){this.isGoDist=!1,this.isAddDist=!1},handleCancelAddDist:function(){this.distVisibleAdd=!1},handleAddDistpreview:function(e){this.distImageAdd=e.url||e.thumbUrl,this.distVisibleAdd=!0},handleChangeAddDist:function(e){var t=Object(n["a"])(e.fileList);t=t.slice(-3);var a=[];t=t.map(function(e){return e.response&&(e.url=e.response.url,a.push(e.response.data.id)),e}),this.distImg=a,this.distListAdd=t},handleCancelDist:function(){this.distVisible=!1},handleDist:function(e){this.distImage=e.url||e.thumbUrl,this.distVisible=!0},handleChangeDist:function(e){var t=Object(n["a"])(e.fileList);t=t.slice(-3),t=t.map(function(e){return e.response&&(e.url=e.response.data.url),e}),this.distList=t},mxUpdateDist:function(e){this.getDisinfectMode(),this.isUpdateDist=!0;var t=[];e.photos_src.forEach(function(e,a){var i={uid:e.id,name:"xxx.png",response:{data:{id:parseInt(e.id),url:e.url}},status:"done",url:e.url};t.push(i)}),this.distList=t,this.distUpdataId=e.id,this.dataDistDataUpdata=e.exe_date_str,this.dataDistTimeUpdata=e.exe_time_str,this.distUpdataForm.setFieldsValue({canteen:e.canteen_id,meal:e.meal,person:e.person,disinfectMode:e.manner,name:e.name})},handleUpdataDist:function(e){var t=this;e.preventDefault(),this.distUpdataForm.validateFields(function(e,a){if(!e){var i=[];t.distList.forEach(function(e){i.push(e.response.data.id)});var s={url:"api/school/safety/disinfec/"+t.distUpdataId,method:"PUT",data:{canteen_id:a.canteen,meal:a.meal,manner:a.disinfectMode,exe_time:t.dataDistDataUpdata+" "+t.dataDistTimeUpdata,title:a.name,person:a.person,photos:i.join(",")}};t.$apiAxiox(s).then(function(e){0==e.data.code?(t.isUpdateDist=!1,t.$message.success("修改记录成功"),t.loadingDist=!0,t.getDistList("","","",""),t.distList=[]):t.$message.success(e.data.msg)})}})},goUpdataDist:function(){this.isUpdateDist=!1}}},w=x,y=(a("c5b0"),a("2877")),D=Object(y["a"])(w,i,s,!1,null,"fd02ccd4",null);t["default"]=D.exports}}]);
//# sourceMappingURL=chunk-58df4685.c7baea68.js.map