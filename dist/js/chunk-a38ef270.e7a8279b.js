(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a38ef270"],{"1af6":function(e,t,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"2dd1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mxAddStaffs"}},[a("a-breadcrumb",{attrs:{separator:" "}},[a("a-breadcrumb-item",[a("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:e.goback}})],1),a("a-breadcrumb-item",{staticClass:"mx_header_text"},[e._v("添加员工")])],1),a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"身份证正反面图片"}},[a("div",[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["身份证正面图片",{rules:[{required:!0,message:"请上传身份证正面图片"}]}],expression:"[\n                                '身份证正面图片',\n                                {rules: [{ required: true, message: '请上传身份证正面图片' }]}\n                            ]"}]},[a("a-icon",{attrs:{type:"plus"}})],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传图片\n                    ")],1)],1)],1),a("div",[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.sedList},on:{preview:e.handlePreviews,change:e.handleChanges}},[e.sedList.length<1?a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["身份证反面图片",{rules:[{required:!0,message:"请上传身份证反面图片"}]}],expression:"[\n                                '身份证反面图片',\n                                {rules: [{ required: true, message: '请上传身份证反面图片' }]}\n                            ]"}]},[a("a-icon",{attrs:{type:"plus"}})],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisibles,footer:null},on:{cancel:e.handleCancels}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImages}})])],1),a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.sedList},on:{preview:e.handlePreviews,change:e.handleChanges}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传图片\n                    ")],1)],1)],1)]),a("a-form-item",{attrs:{label:"身份证号码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardId",{rules:[{required:!0,message:"请填写身份证号码"}]}],expression:"[\n                    'cardId',\n                    {rules: [{ required: true, message: '请填写身份证号码' }]}\n                ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写身份证号码"}})],1),a("a-form-item",{attrs:{label:"健康证图片"}},[a("div",[a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",listType:"picture-card",fileList:e.health},on:{preview:e.healthPreview,change:e.healthChange}},[e.health.length<1?a("div",{directives:[{name:"decorator",rawName:"v-decorator",value:["健康证图片",{rules:[{required:!0,message:"请上传健康证图片"}]}],expression:"[\n                                '健康证图片',\n                                {rules: [{ required: true, message: '请上传健康证图片' }]}\n                            ]"}]},[a("a-icon",{attrs:{type:"plus"}})],1):e._e()]),a("a-modal",{attrs:{visible:e.healthVisible,footer:null},on:{cancel:e.healthCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.healthImage}})])],1),a("a-upload",{attrs:{action:"http://bate.ccb.micmio.com/api/common/upload",fileList:e.health},on:{preview:e.healthPreview,change:e.healthChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传图片\n                    ")],1)],1)],1)]),a("a-form-item",{attrs:{label:"健康证发证单位"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["authority",{rules:[{required:!0,message:"请填写发证单位"}]}],expression:"[\n                    'authority',\n                    {rules: [{ required: true, message: '请填写发证单位' }]}\n                ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"填写发证单位"}})],1),a("a-form-item",{attrs:{label:"健康证发证日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["issuance",{rules:[{required:!0,message:"请选择发证日期"}]}],expression:"[\n                    'issuance',\n                    {rules: [{ required: true, message: '请选择发证日期' }]}\n                ]"}],attrs:{placeholder:"发证日期选择"},on:{change:e.mxDateChange}})],1),a("a-form-item",[a("a-button",{staticClass:"mx_back",on:{click:e.mxBack}},[e._v("上一步")]),a("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v("立即添加")])],1)],1)],1)},r=[],s=a("75fc"),n=(a("7f7f"),a("c1df")),o=a.n(n),l={data:function(){return{moment:o.a,previewVisible:!1,previewImage:"",fileList:[],previewVisibles:!1,previewImages:"",sedList:[],healthVisible:!1,healthImage:"",health:[],form:this.$form.createForm(this),uploading:!1,addStaff:{},dateString:"",justId:"",backId:"",healthId:""}},mounted:function(){this.addStaff=this.$route.query,console.log(this.addStaff)},methods:{goback:function(){this.$router.push({path:"/mxEmployeeInfo"})},mxBack:function(){this.$router.push({path:"/mxAddStaff",query:{values:this.addStaff}})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){console.log("Received values of form: ",a);var i={url:"api/school/staff",method:"post",data:{canteen_id:t.addStaff.canteenId,title:t.addStaff.name,sex:t.addStaff.sex,age:t.addStaff.age,job_title:t.addStaff.jobTitle,education:t.addStaff.education,phone:t.addStaff.phone,location:t.addStaff.location,join_time:t.addStaff.joinTime,card_photo:t.justId+","+t.backId,card_id:a.cardId,health_cert:t.healthId,authority:a.authority,issuance:t.dateString,face_id:t.addStaff.faceId}};t.$apiAxiox(i).then(function(e){0==e.data.code?(t.$message.success("添加员工成功"),t.$router.push({path:"/mxEmployeeInfo"})):console.log(22)})}})},mxDateChange:function(e,t){this.dateString=o()(e._d).format("x")/1e3},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=this,a=Object(s["a"])(e.fileList);a=a.slice(-1),a=a.map(function(e){return e.response&&(e.url=e.response.url,console.log(e.response.data.id),t.justId=e.response.data.id),e}),this.fileList=a},handleCancels:function(){this.previewVisibles=!1},handlePreviews:function(e){this.previewImages=e.url||e.thumbUrl,this.previewVisibles=!0},handleChanges:function(e){var t=this,a=Object(s["a"])(e.fileList);a=a.slice(-1),a=a.map(function(e){return e.response&&(e.url=e.response.url,console.log(e.response.data.id),t.backId=e.response.data.id),e}),this.sedList=a},healthCancel:function(){this.healthVisible=!1},healthPreview:function(e){this.healthImage=e.url||e.thumbUrl,this.healthVisible=!0},healthChange:function(e){var t=this,a=Object(s["a"])(e.fileList);a=a.slice(-1),a=a.map(function(e){return e.response&&(e.url=e.response.url,console.log(e.response.data.id),t.healthId=e.response.data.id),e}),this.health=a}}},c=l,d=(a("6af4"),a("2877")),u=Object(d["a"])(c,i,r,!1,null,"7844aada",null);t["default"]=u.exports},"6af4":function(e,t,a){"use strict";var i=a("ddfd"),r=a.n(i);r.a},"75fc":function(e,t,a){"use strict";var i=a("a745"),r=a.n(i);function s(e){if(r()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var n=a("774e"),o=a.n(n),l=a("c8bb"),c=a.n(l);function d(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return o()(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){return s(e)||d(e)||u()}a.d(t,"a",function(){return h})},"774e":function(e,t,a){e.exports=a("d2d5")},a745:function(e,t,a){e.exports=a("f410")},c8bb:function(e,t,a){e.exports=a("54a1")},ddfd:function(e,t,a){},f410:function(e,t,a){a("1af6"),e.exports=a("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-a38ef270.e7a8279b.js.map