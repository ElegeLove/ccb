(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a89397e"],{"0bfb":function(t,e,a){"use strict";var i=a("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1630:function(t,e,a){"use strict";a.r(e);for(var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mxTimeTag"}},[a("a-skeleton",{attrs:{loading:t.loadingActive,active:"",paragraph:{rows:20}}},[a("a-tabs",{attrs:{activeKey:t.activeKey,tabPosition:"top"},on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"每日考勤",forceRender:!0}},[t.datashow?a("div",[a("a-form",{staticClass:"mx_form",attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"食堂："}},[a("a-select",{staticStyle:{width:"150px"},attrs:{value:t.canteenKey},on:{change:t.selectChange}},t._l(t.canteen,function(e,i){return a("a-select-option",{key:i+1},[t._v(t._s(e.title))])}),1)],1)],1),a("div",{staticClass:"components-input-demo-presuffix"},[a("p",{staticClass:"hmTxt"},[t._v("员工:")]),a("a-input",{ref:"userNameInput",staticClass:"seachBox",staticStyle:{width:"200px"},attrs:{placeholder:"姓名/职位"},model:{value:t.mxClassVal,callback:function(e){t.mxClassVal=e},expression:"mxClassVal"}},[t.mxClassVal?a("a-icon",{staticStyle:{color:"#999"},attrs:{slot:"suffix",theme:"filled",type:"close-circle"},on:{click:t.emitEmpty},slot:"suffix"}):t._e()],1),a("a-button",{staticClass:"seachBtn",attrs:{type:"primary"},on:{click:t.mxSeach}},[t._v("搜索")])],1),a("a-form",{staticClass:"mx_form",attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"日期："}},[a("a-date-picker",{attrs:{placeholder:"入职日期选择",defaultValue:t.moment(t.joinTime,"YYYY-MM-DD"),value:t.moment(t.joinTime,"YYYY-MM-DD")},on:{change:t.handlePanelChange}})],1),a("a-form-item",[a("div",{staticClass:"mx_btns"},[a("span",[t._v("打印")]),a("a-divider",{staticStyle:{background:"#000"},attrs:{type:"vertical"}}),a("span",[t._v("导出")])],1)])],1),a("a-skeleton",{attrs:{loading:t.loading,active:"",title:!1,paragraph:{rows:12}}},[a("a-table",{attrs:{columns:t.column,dataSource:t.datas,bordered:"",pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"face_id_src",fn:function(t,e,i){return a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("viewer",[a("img",{staticStyle:{width:"60px",heigth:"60px"},attrs:{src:e.face_id_src}})])],1)}},{key:"inRecord",fn:function(e,i,n){return a("div",{},[a("p",[t._v(t._s(i.min))]),a("p",[t._v(t._s(i.max))])])}},{key:"operation",fn:function(e,i,n){return a("a",{staticClass:"mx_updata mx_color",on:{click:function(e){return t.mxShowMonth(i.staff_id,i.staff_name,i.job_title)}}},[t._v("查看本月")])}}],null,!1,2122477225)})],1)],1):a("div",[a("a-breadcrumb",{attrs:{separator:" "}},[a("a-breadcrumb-item",[a("a-icon",{staticClass:"mx_header_icon",attrs:{type:"arrow-left"},on:{click:t.goback}})],1),a("a-breadcrumb-item",{staticClass:"mx_header_text"},[t._v("查看本月")])],1),a("div",{staticClass:"mx_dateList"},[a("div",{staticClass:"mx_dateList_left"},[a("div",{staticClass:"mx_dateList_left_name"},[a("span",[t._v("姓名：")]),a("span",[t._v(t._s(t.userName))])]),a("div",[a("span",[t._v("职位：")]),a("span",[t._v(t._s(t.jobName))])])]),a("div",{staticClass:"mx_dateList_right"},[a("div",{staticClass:"mx_dateList_right_name"},[t._v(t._s(t.nowdata))]),a("div",[a("span",{staticClass:"mx_mouth",on:{click:t.mxPreMouth}},[a("a-icon",{attrs:{type:"left"}}),t._v("上一月")],1),a("span",{staticClass:"mx_thismouth",on:{click:t.mxMouth}},[t._v("本月")]),a("span",{staticClass:"mx_mouth",on:{click:t.mxNextMouth}},[t._v("下一月\n                                    "),a("a-icon",{attrs:{type:"right"}})],1)])])]),a("div",[a("a-calendar",{scopedSlots:t._u([{key:"dateCellRender",fn:function(e){return a("ul",{staticClass:"events"},t._l(t.getListData(e),function(e){return a("li",{key:e.key},[a("p",{staticStyle:{"text-align":"center","font-weight":"400"}},[t._v(t._s(e.content))])])}),0)}}])})],1)],1)]),a("a-tab-pane",{key:"2",attrs:{tab:"月度汇总",forceRender:!0}},[a("a-form",{staticClass:"mx_form",attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"食堂："}},[a("a-select",{staticStyle:{width:"150px"},attrs:{value:t.canteensKey},on:{change:t.selectsChange}},t._l(t.canteens,function(e,i){return a("a-select-option",{key:i+1},[t._v(t._s(e.title))])}),1)],1)],1),a("div",{staticClass:"components-input-demo-presuffix"},[a("p",{staticClass:"hmTxt"},[t._v("员工:")]),a("a-input",{ref:"userNameInput",staticClass:"seachBox",staticStyle:{width:"200px"},attrs:{placeholder:"姓名/职位"},model:{value:t.mxStaffVal,callback:function(e){t.mxStaffVal=e},expression:"mxStaffVal"}},[t.mxStaffVal?a("a-icon",{staticStyle:{color:"#999"},attrs:{slot:"suffix",theme:"filled",type:"close-circle"},on:{click:t.emitEmptyStaff},slot:"suffix"}):t._e()],1)],1),a("a-form",{staticClass:"mx_form",attrs:{layout:"inline",form:t.form},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"日期："}},[a("a-month-picker",{attrs:{placeholder:"选择月份"},on:{change:t.onDateChange}})],1),a("a-form-item",[a("a-button",{staticClass:"mx_btnbg",attrs:{type:"primary","html-type":"submit"}},[t._v("查询")]),a("a-button",{attrs:{"html-type":"reset"}},[a("div",{on:{click:t.mxReset}},[t._v("重置")])])],1),a("a-form-item",[a("div",{staticClass:"mx_btns"},[a("span",[t._v("打印")]),a("a-divider",{staticStyle:{background:"#000"},attrs:{type:"vertical"}}),a("span",[t._v("导出")])],1)])],1),a("a-skeleton",{attrs:{loading:t.loadings,active:"",title:!1,paragraph:{rows:12}}},[a("a-table",{staticStyle:{"max-width":"100%"},attrs:{columns:t.columns,dataSource:t.monthlyList,bordered:"",pagination:t.paginations,locale:t.locale,scroll:t.scrollWidth},on:{change:t.handleTableChanges},scopedSlots:t._u([{key:"face_id_src",fn:function(t,e){return a("viewer",{},[a("img",{staticStyle:{width:"100px",heigth:"100px"},attrs:{src:t}})])}},t._l(t.longNum,function(e){return{key:e,fn:function(i,n,s){return a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v(t._s(n.works[e-1].zao_time))]),a("p",[t._v(t._s(n.works[e-1].wan_time))])])}}})],null,!0)})],1)],1)],1)],1)],1)},n=[],s=(a("ac6a"),a("6b54"),a("c1df")),o=a.n(s),c=[{title:"食堂",dataIndex:"canteen_title",align:"center",width:"10%",scopedSlots:{customRender:"canteen_title"}},{title:"人脸图片",dataIndex:"face_id_src",align:"center",width:"14%",scopedSlots:{customRender:"face_id_src"}},{title:"姓名",dataIndex:"staff_name",align:"center",width:"12%",scopedSlots:{customRender:"staff_name"}},{title:"职位",dataIndex:"job_title",align:"center",width:"15%",scopedSlots:{customRender:"job_title"}},{title:"工号",dataIndex:"id",align:"center",width:"15%",scopedSlots:{customRender:"id"}},{title:"打卡记录",dataIndex:"inRecord",align:"center",width:"15%",scopedSlots:{customRender:"inRecord"}},{title:"操作按钮",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}],l=[],r=0;r<10;r++){var d;r%2==0?"男":"女",d=r<2?"食堂1":r<4?"食堂2":r<6?"食堂3":r<8?"食堂4":"食堂5",l.push({key:r.toString(),canteen_title:"".concat(d),face_id_src:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg",staff_name:"Edrward ".concat(r),job_title:"采购员".concat(r),id:"ST10".concat(r),inRecordam:"08:3".concat(r),inRecordpm:"18:0".concat(r)})}for(var h=[],m=0;m<100;m++)h.push({key:m,canteen:"食堂".concat(m),picurl:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg",name:"Edrward ".concat(m),position:"Edrward ".concat(m),jobNum:"Edrward ".concat(m),attendance:"Edrward ".concat(m),age:32,addressam:"08:3".concat(m),addresspm:"18:0".concat(m)});var u={data:function(){var t=this,e=this.$createElement;return{activeKey:"1",loadingActive:!1,loading:!0,loadings:!0,longNum:6,moment:o.a,dataList:[[{content:"08:15"},{content:"未打卡"}]],datament:[],m:0,datas:l,monthlyList:h,column:c,datashow:!0,pagination:{pageSize:10,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录 第 ").concat(t.pagination.current," / ").concat(Math.ceil(e/t.pagination.pageSize)," 页")}},paginations:{pageSize:10,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录 第 ").concat(t.pagination.current," / ").concat(Math.ceil(e/t.pagination.pageSize)," 页")}},form:this.$form.createForm(this),locale:{filterConfirm:"确定",filterReset:"重置",emptyText:"暂无数据"},scrollWidth:{x:"101%"},nowdata:"",columns:[{title:"食堂",width:100,dataIndex:"canteen",align:"center",key:"canteen",fixed:"left"},{title:"人脸图片",width:120,dataIndex:"picurl",align:"center",fixed:"left",key:"pic",scopedSlots:{customRender:"pic"}},{title:"姓名",width:120,align:"center",dataIndex:"name",key:"name",fixed:"left"},{title:"职位",width:120,align:"center",dataIndex:"position",key:"position"},{title:"工号",width:120,align:"center",dataIndex:"jobNum",key:"jobNum"},{title:"出勤天数",width:120,align:"center",dataIndex:"attendance",key:"attendance"},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["一"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["01"])])},dataIndex:"1",key:"1",width:150,scopedSlots:{customRender:"1"}},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["二"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["02"])])},dataIndex:"2",key:"2",width:150,scopedSlots:{customRender:"2"}},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["三"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["03"])])},dataIndex:"3",key:"3",width:150,scopedSlots:{customRender:"3"}},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["四"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["04"])])},dataIndex:"4",key:"4",width:150,scopedSlots:{customRender:"4"}},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["五"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["05"])])},dataIndex:"5",key:"5",width:150,scopedSlots:{customRender:"5"}},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["六"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["06"])])},dataIndex:"6",key:"6",width:150,scopedSlots:{customRender:"6"}},{title:function(t){return e("div",[e("p",{style:"text-align: left;margin-bottom: 0;"},["七"]),e("p",{style:"text-align: right;margin-bottom: 0;"},["07"])])},dataIndex:"7",key:"7",width:150,scopedSlots:{customRender:"7"}}],joinTime:"",canteen:[],canteenKey:"全部",canteenId:0,canteens:[],canteensKey:"全部",canteensId:0,mxClassVal:"",mxStaffVal:"",monthId:"",userName:"",jobName:"",listData:[],inquiryTime:""}},mounted:function(){this.joinTime=o()((new Date).toLocaleDateString()).format("YYYY-MM-DD"),this.getTimeTag("","",this.joinTime),this.getCanteen()},methods:{callback:function(t){this.activeKey=t,this.loadingActive=!0,"1"==t?this.getTimeTag("","",this.joinTime):(this.loadings=!0,this.getMonthly("","",""))},handleTableChange:function(t,e,a){this.pagination.pageSize=t.pageSize,this.pagination.current=t.current,this.getTimeTag("","",this.joinTime)},handleTableChanges:function(t,e,a){this.paginations.pageSize=t.pageSize,this.paginations.current=t.current,this.getMonthly("","","")},getCanteen:function(){var t=this;this.$get("api/school/canteen",{}).then(function(e){if(0==e.data.code){t.canteen=e.data.data,t.canteens=e.data.data;var a={id:0,title:"全部"};t.canteen.splice(0,0,a)}else console.log(22)})},selectChange:function(t){this.canteenKey=t,this.canteenId=this.canteen[t-1].id,this.sexVal="0"},selectsChange:function(t){this.canteensKey=t,this.canteensId=this.canteens[t-1].id,this.sexVal="0"},onDateChange:function(t,e){this.inquiryTime=e},handleSubmit:function(t){t.preventDefault(),this.loadings=!0,this.getMonthly(this.canteensId,this.mxStaffVal,this.inquiryTime)},mxReset:function(){this.inquiryTime="",this.loadings=!0,this.getMonthly("","","")},handlePanelChange:function(t,e){this.joinTime=e},onSelect:function(t){this.value=t,this.selectedValue=t},onPanelChange:function(t){this.value=t},goback:function(){this.datashow=!this.datashow},getTimeTag:function(t,e,a){var i=this,n=this;this.$get("api/school/attend?page="+this.pagination.current+"&canteen_id="+t+"&key_word="+e+"&time="+a).then(function(t){0==t.data.code?(n.pagination.pageSize=t.data.data.per_page,n.pagination.total=t.data.data.total,t.data.data.data.forEach(function(t){t.key=t.id,t.face_id_src||(t.face_id_src="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg")}),i.datas=t.data.data.data,i.loadingActive=!1,i.loading=!1):console.log(22)})},mxShowMonth:function(t,e,a){this.datashow=!this.datashow,this.userName=e,this.jobName=a,this.monthId=t,this.nowdata=o()(this.joinTime).format("YYYY-MM-DD"),this.joinTime=o()(this.joinTime).format("YYYY-MM"),this.getMonthRecord(t,this.joinTime)},getMonthRecord:function(t,e){var a=this;this.$get("api/school/attend/"+t+"/edit?time="+e).then(function(t){0==t.data.code?a.datament=t.data.data:console.log(22)})},mxSeach:function(){this.loading=!0,this.getTimeTag(this.canteenId,this.mxClassVal,this.joinTime)},emitEmpty:function(){this.$refs.userNameInput.focus(),this.mxClassVal=""},getMonthly:function(t,e,a){var i=this,n=this.$createElement,s=this;this.$get("api/school/attend/create?page="+this.paginations.current+"&canteen_id="+t+"&key_word="+e+"&time="+a).then(function(t){if(0==t.data.code){var e;s.paginations.pageSize=t.data.data.per_page,s.paginations.total=t.data.data.total;var a=[];t.data.data.data.forEach(function(t,i){t.face_id_src||(t.face_id_src="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"),e={key:i,canteen:t.canteen_title,face_id_src:t.face_id_src,name:t.staff_name,position:t.job_title,jobNum:t.staff_id,attendance:t.total_day,works:t.works},a.push(e)}),i.monthlyList=a,i.longNum=6,i.longNum=i.longNum+t.data.data.data[0].works.length,i.scrollWidth={x:360+150*t.data.data.data[0].works.length};var o,c,l=[];t.data.data.data[0].works.some(function(t,e){o={day:t.day.substr(t.day.length-2,t.day.length),week:t.weekday},l.push(o)}),i.listData=l;var r=[{title:"食堂",width:100,dataIndex:"canteen",align:"center",key:"canteen",fixed:"left"},{title:"人脸图片",width:120,dataIndex:"face_id_src",align:"center",fixed:"left",key:"face_id_src",scopedSlots:{customRender:"face_id_src"}},{title:"姓名",width:120,align:"center",dataIndex:"name",key:"name",fixed:"left"},{title:"职位",width:120,align:"center",dataIndex:"position",key:"position"},{title:"工号",width:120,align:"center",dataIndex:"jobNum",key:"jobNum"},{title:"出勤天数",width:120,align:"center",dataIndex:"attendance",key:"attendance"}];i.listData.forEach(function(t,e){c={title:function(e){return n("div",[n("p",{style:"text-align: left;margin-bottom: 0;"},[t.week]),n("p",{style:"text-align: right;margin-bottom: 0;"},[t.day])])},dataIndex:e+1,key:e+1,width:150,scopedSlots:{customRender:e+1}},r.push(c)}),i.columns=r,i.loadingActive=!1,i.loadings=!1}else console.log(22)})},emitEmptyStaff:function(){this.$refs.userNameInput.focus(),this.mxStaffVal=""},getListData:function(t){var e,a=this.datament,i=o()(t._d).format("YY-MM-DD").substring(0,5),n=new Date;return n=o()(n).format("YY-MM-DD").substring(0,5),i===n&&a&&a.forEach(function(a,i){t.date()==a.day&&(e=[{content:a.min,key:a.id},{content:a.max,key:a.id+1}])}),e||[]},mxPreMouth:function(){this.m--,this.mxMonthMore(this.m),this.getMonthRecord(this.monthId,this.joinTime)},mxMouth:function(){this.m=0,this.mxMonthMore(this.m),this.getMonthRecord(this.monthId,this.joinTime)},mxNextMouth:function(){this.m++,this.mxMonthMore(this.m),this.getMonthRecord(this.monthId,this.joinTime)},mxMonthMore:function(t){this.nowdata=o()(o()().add(t,"months")).format("YYYY-MM-DD"),this.joinTime=o()(o()().add(t,"months")).format("YYYY-MM")}},created:function(){this.getMonthly("","",""),this.m=0,this.date=o()().add(this.m,"months"),this.nowdata=o()(this.date).format("YYYY-MM-DD")}},f=u,g=(a("cc47"),a("2877")),p=Object(g["a"])(f,i,n,!1,null,null,null);e["default"]=p.exports},"1fad":function(t,e,a){},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var i=a("cb7c"),n=a("0bfb"),s=a("9e1e"),o="toString",c=/./[o],l=function(t){a("2aba")(RegExp.prototype,o,t,!0)};a("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?n.call(t):void 0)}):c.name!=o&&l(function(){return c.call(this)})},ac6a:function(t,e,a){for(var i=a("cadf"),n=a("0d58"),s=a("2aba"),o=a("7726"),c=a("32e9"),l=a("84f2"),r=a("2b4c"),d=r("iterator"),h=r("toStringTag"),m=l.Array,u={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(u),g=0;g<f.length;g++){var p,x=f[g],y=u[x],_=o[x],b=_&&_.prototype;if(b&&(b[d]||c(b,d,m),b[h]||c(b,h,x),l[x]=m,y))for(p in i)b[p]||s(b,p,i[p],!0)}},cc47:function(t,e,a){"use strict";var i=a("1fad"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-6a89397e.d8c68d1b.js.map