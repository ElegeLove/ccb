(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e492f244"],{"0bfb":function(t,e,a){"use strict";var i=a("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},5369:function(t,e,a){},"6b54":function(t,e,a){"use strict";a("3846");var i=a("cb7c"),n=a("0bfb"),s=a("9e1e"),o="toString",c=/./[o],l=function(t){a("2aba")(RegExp.prototype,o,t,!0)};a("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?n.call(t):void 0)}):c.name!=o&&l(function(){return c.call(this)})},ac6a:function(t,e,a){for(var i=a("cadf"),n=a("0d58"),s=a("2aba"),o=a("7726"),c=a("32e9"),l=a("84f2"),r=a("2b4c"),d=r("iterator"),u=r("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(p),m=0;m<h.length;m++){var g,x=h[m],v=p[x],b=o[x],_=b&&b.prototype;if(_&&(_[d]||c(_,d,f),_[u]||c(_,u,x),l[x]=f,v))for(g in i)_[g]||s(_,g,i[g],!0)}},bf6e:function(t,e,a){"use strict";a.r(e);for(var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mxEmployeeInfo"}},[a("a-form",{staticClass:"mx_form",attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"食堂："}},[a("a-select",{staticStyle:{width:"150px"},attrs:{value:t.canteenKey},on:{change:t.selectChange}},t._l(t.canteen,function(e,i){return a("a-select-option",{key:i+1},[t._v(t._s(e.title))])}),1)],1)],1),a("div",{staticClass:"components-input-demo-presuffix"},[a("p",{staticClass:"hmTxt"},[t._v("员工:")]),a("a-input",{ref:"userNameInput",staticClass:"seachBox",staticStyle:{width:"200px"},attrs:{placeholder:"员工姓名"},model:{value:t.mxClassVal,callback:function(e){t.mxClassVal=e},expression:"mxClassVal"}},[t.mxClassVal?a("a-icon",{staticStyle:{color:"#999"},attrs:{slot:"suffix",theme:"filled",type:"close-circle"},on:{click:t.emitEmpty},slot:"suffix"}):t._e()],1),a("a-button",{staticClass:"seachBtn",attrs:{type:"primary"},on:{click:t.mxSeach}},[t._v("搜索")])],1),a("a-form",{staticClass:"mx_form",attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"职位："}},[a("a-select",{staticStyle:{width:"150px"},attrs:{value:t.positionKey,disabled:t.positionDisabled},on:{change:t.selectChangePosition}},t._l(t.positionList,function(e,i){return a("a-select-option",{attrs:{value:e}},[t._v(t._s(e))])}),1)],1),a("a-form-item",{staticClass:"mx_formsex",attrs:{label:"性别："}},[a("a-select",{staticStyle:{width:"120px"},attrs:{defaultValue:"0"},on:{change:t.sexChange},model:{value:t.sexVal,callback:function(e){t.sexVal=e},expression:"sexVal"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),a("a-select-option",{attrs:{value:"1"}},[t._v("男")]),a("a-select-option",{attrs:{value:"2"}},[t._v("女")])],1)],1)],1),a("div",{staticClass:"mx_btnGroup"},[a("a-button",{staticClass:"mx_creat_btn mx_btnbg",attrs:{type:"primary"},on:{click:t.mxAdd}},[a("a-icon",{attrs:{type:"user-add"}}),t._v("添加员工\n        ")],1),a("a-button",{staticClass:"mx_creat_btn mx_lever_btn",on:{click:t.mxRecord}},[t._v("离职记录")]),a("div",{staticClass:"mx_btns"},[a("span",[t._v("打印")]),a("a-divider",{staticStyle:{background:"#000"},attrs:{type:"vertical"}}),a("span",[t._v("导出")])],1)],1),a("a-skeleton",{attrs:{loading:t.loading,active:"",title:!1,paragraph:{rows:12}}},[a("a-table",{attrs:{columns:t.columns,dataSource:t.data,bordered:"",pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"face_id_src",fn:function(t,e,i){return a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("viewer",[a("img",{staticStyle:{width:"60px",heigth:"60px"},attrs:{src:t}})])],1)}},{key:"operation",fn:function(e,i,n){return[a("div",{staticClass:"editable-row-operations"},[a("div",[a("a",{staticClass:"mx_updata mx_color",on:{click:function(e){return t.mxCheck(i.id)}}},[t._v("查看")]),a("a",{staticClass:"mx_updata mx_color",on:{click:function(e){return t.mxRevise(i)}}},[t._v("修改")]),a("a",{staticClass:"mx_updata mx_color",on:{click:function(e){return t.mxShowOffDuty(i.id)}}},[t._v("离职")]),a("a-modal",{attrs:{title:"离职原因",centered:"",maskStyle:{opacity:"0.1",background:"#000",animation:"none"},okText:"确认",cancelText:"取消"},on:{cancel:t.mxCelOffDuty,ok:t.mxOffDuty},model:{value:t.isOffDuty,callback:function(e){t.isOffDuty=e},expression:"isOffDuty"}},[a("div",{staticClass:"mx_model"},[a("div",{staticClass:"mx_model_main"},[a("p",[a("span",[t._v("离职原因：")]),a("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择离班原因"},on:{change:t.selectDel}},[a("a-select-option",{attrs:{value:"0"}},[t._v("正常退休")]),a("a-select-option",{attrs:{value:"1"}},[t._v("正常离职")]),a("a-select-option",{attrs:{value:"2"}},[t._v("违规辞退")]),a("a-select-option",{attrs:{value:"3"}},[t._v("其他原因")])],1)],1)])])])],1)])]}}])})],1)],1)},n=[],s=(a("ac6a"),a("6b54"),[{title:"食堂",dataIndex:"canteen_title",align:"center",width:"10%",scopedSlots:{customRender:"canteen_title"}},{title:"人脸图片",dataIndex:"face_id_src",align:"center",width:"14%",scopedSlots:{customRender:"face_id_src"}},{title:"姓名",dataIndex:"name",align:"center",width:"12%",scopedSlots:{customRender:"name"}},{title:"性别",dataIndex:"sex",align:"center",width:"10%",scopedSlots:{customRender:"sex"}},{title:"年龄",dataIndex:"age",align:"center",width:"10%",scopedSlots:{customRender:"age"}},{title:"职位",dataIndex:"job_title",align:"center",width:"15%",scopedSlots:{customRender:"job_title"}},{title:"联系电话",dataIndex:"phone",align:"center",width:"15%",scopedSlots:{customRender:"phone"}},{title:"操作按钮",dataIndex:"operation",align:"center",scopedSlots:{customRender:"operation"}}]),o=[],c=0;c<10;c++){var l,r;l=c%2==0?"男":"女",r=c<2?"食堂1":c<4?"食堂2":c<6?"食堂3":c<8?"食堂4":"食堂5",o.push({key:c.toString(),canteen_title:"".concat(r),face_id_src:"http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg",name:"Edrward ".concat(c),sex:"".concat(l),age:32,job_title:"采购员".concat(c),phone:"1354625368".concat(c)})}var d={data:function(){var t=this;return{loading:!0,data:o,columns:s,pagination:{pageSize:10,current:1,total:0,showSizeChanger:!1,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录 第 ").concat(t.pagination.current," / ").concat(Math.ceil(e/t.pagination.pageSize)," 页")}},isOffDuty:!1,positionDisabled:!0,positionList:[],positionKey:"全部",canteen:[],canteenKey:"全部",canteenId:0,mxClassVal:"",personnelId:"",leavingWork:"",sexVal:"0"}},mounted:function(){this.getStaffList(),this.getCanteen()},methods:{goback:function(){window.history.back(-1)},getCanteen:function(){var t=this;this.$get("api/school/canteen",{}).then(function(e){if(0==e.data.code){t.canteen=e.data.data;var a={id:0,title:"全部"};t.canteen.splice(0,0,a)}else console.log(22)})},getStaffList:function(t){var e=this,a=this;this.$get("api/school/staff?page="+this.pagination.current,t).then(function(t){0==t.data.code?(a.pagination.pageSize=t.data.data.per_page,a.pagination.total=t.data.data.total,t.data.data.data.forEach(function(t){t.key=t.id,t.face_id_src||(t.face_id_src="http://h.hiphotos.baidu.com/lvpics/w=600/sign=5dc3621e19d5ad6eaaf967eab1c939a3/0b55b319ebc4b745cc71eecccdfc1e178b821506.jpg"),0==t.sex?t.sex="男":1==t.sex&&(t.sex="女"),t.name=t.title}),e.data=t.data.data.data,e.loading=!1):console.log(22)})},selectChange:function(t){var e=this;if(this.canteenKey=t,this.canteenId=this.canteen[t-1].id,1==t)this.positionDisabled=!0,this.positionKey="全部";else{this.positionDisabled=!1,this.canteen.forEach(function(t){t.id==e.canteenId&&(e.positionList=t.job_title)});var a="全部";this.positionList.splice(0,0,a),this.positionKey="全部"}},selectChangePosition:function(t){this.positionKey=t},sexChange:function(t){this.sexVal=t},mxSeach:function(){var t;t="全部"==this.positionKey?0:this.positionKey;var e={canteen_id:this.canteenId,key_word:this.mxClassVal,job_title:t,sex:this.sexVal};this.loading=!0,this.getStaffList(e)},emitEmpty:function(){this.$refs.userNameInput.focus(),this.mxClassVal=""},mxAdd:function(){this.$router.push({path:"/mxAddStaff"})},mxRecord:function(){this.$router.push({path:"/mxDepRecord"})},mxCheck:function(t){this.$router.push({path:"/mxStaffInfo",query:{staffId:t}})},mxRevise:function(t){this.$router.push({path:"/mxModifyInfo",query:{staffInfo:t,id:t.id}})},handleTableChange:function(t,e,a){this.pagination.pageSize=t.pageSize,this.pagination.current=t.current,this.getStaffList()},mxShowOffDuty:function(t){this.personnelId=t,this.isOffDuty=!0},selectDel:function(t){this.leavingWork=t},mxCelOffDuty:function(){this.isOffDuty=!1},mxOffDuty:function(){var t=this,e={url:"api/school/staff/"+this.personnelId,method:"delete",data:{event:this.leavingWork}};this.$apiAxiox(e).then(function(e){t.isOffDuty=!1,t.$message.success("编辑成功"),t.getStaffList()})}}},u=d,f=(a("cc97"),a("2877")),p=Object(f["a"])(u,i,n,!1,null,"f718c0a2",null);e["default"]=p.exports},cc97:function(t,e,a){"use strict";var i=a("5369"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-e492f244.1a43ac38.js.map