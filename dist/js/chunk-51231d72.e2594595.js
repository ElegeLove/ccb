(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51231d72"],{"515e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQYAAAAMCAYAAACA2RPuAAAA7ElEQVRoQ+3aQRKCMAxA0bR3wwPh3oIHwAPB2RrFEaVSOl03ny26yDPzR4tOCpef+yCqGi+Pe+l13EMAgbYE3Nk4fu4HEQnv+6qBOLT1wTMNAiWBbBiSKGzvJg5sEgJmBA5hyEaBOJhZCAZFYBVIwlCMwl8c/NwrhAgg0KbANwxVUdjFQZwb2yRhKgQQ+IVhuY6ieqskGWM3rYeTXAgg0KBA+lOiLg5D7Ca+LTS4DIyEwCZwPHwsx4EosDsIGBDIP67Mx4EoGFgIRkTg8FRiT+LTOBAF9gUBQwKn/3xcDT5xiJwpGNoIRkXgJfAEnKJUaQqe5uMAAAAASUVORK5CYII="},6474:function(e,t,a){},"761f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAMCAYAAACELMPTAAAA5klEQVRoQ+2a3Q2EIBAGwd68gmwA7grwCqI31sD9RaIHPsIOrxLCN6wTIFhDgwAEVBGYwuKMiMTb81EGt6pIEBYCyglkGRjjMwYRV0oBISgvEOLrIbCTwSd2IQWEoKceSKqYwKEMDqRgp7CIYk5Eh8DQBOK8pn/8d0w4S/veKSCEocuBcBDI9wWvO4NaE3EcGWqQ+A6BjglMYUkySDuEluYRQgsm+kCgYwKNUvBxXu8IoeOFZuoQaCVQkUKWQRoLIbQSpR8EOidwIoWvDBBC5wvM9CFwlcBOCjxMuoqP/hAYj8C/p8sbWyRMZvaA5oMAAAAASUVORK5CYII="},"7c3d":function(e,t,a){"use strict";var s=a("6474"),i=a.n(s);i.a},aaf6:function(e,t,a){},b461:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main",attrs:{id:"login"}},[a("div",{staticClass:"login"},[a("div",{staticClass:"lBox"},[e._m(0),a("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{staticClass:"Mt20"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入正确的用户名"}],validateTrigger:"change",initialValue:e.user.name}],expression:"[\n                        'username',\n                        {\n                            rules: [{ required: true, message: '请输入正确的用户名' }],\n                            validateTrigger: 'change',\n                            initialValue:user.name\n                        }\n\n                      ]"}],staticClass:"tWidth",attrs:{size:"large",type:"text",initialValue:e.user.name,placeholder:"帐户名 / admin"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",{staticClass:"Mt20"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"blur"}],expression:"[\n                        'password',\n                        {rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur'}\n                      ]"}],staticClass:"tWidth",attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码 / admin"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",{staticClass:"tWidth"},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["rememberMe"],expression:"['rememberMe']"}],attrs:{defaultChecked:e.clickState}},[e._v("记住账户")]),a("router-link",{staticClass:"forge-password",staticStyle:{float:"right"},attrs:{to:"/register"}},[e._v("忘记密码")])],1),a("a-form-item",{staticClass:"tWidth"},[a("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.state.loginBtn,disabled:e.state.loginBtn}},[e._v("登录")])],1)],1)],1)])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lPic"},[s("img",{staticClass:"logo",attrs:{src:a("ceca"),alt:""}}),s("p",{staticClass:"MfBold"},[e._v("餐餐保智慧食堂管理云平台")]),s("div",{staticClass:"lineBox"},[s("img",{attrs:{src:a("761f"),alt:""}}),s("p",{staticClass:"Mf"},[e._v("守护孩子每一餐")]),s("img",{attrs:{src:a("515e"),alt:""}})])])}],r=a("8de6"),o=a("bc3a"),n=a.n(o),l=a("4328"),c=a.n(l),u=(a("1c46"),{data:function(){return{loginBtn:!1,loginType:0,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1},user:{name:"",psd:""},clickState:!1}},created:function(){var e=localStorage.getItem("username");console.log(e),""!=e&&(this.user.name=e,this.clickState=!0)},methods:{handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields,s=this.state;s.loginBtn=!0;var i=["username","password","rememberMe"];a(i,{force:!0},function(e,a){if(e)setTimeout(function(){},600);else{var i={username:a.username,password:a.password};n()({method:"post",url:r["a"].BASE_URL+"api/auth/login",data:c.a.stringify(i),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(s.loginBtn=!1,0==e.data.code){localStorage.setItem("openKey","1"),localStorage.setItem("cheakKey","1"),localStorage.setItem("token",e.data.token),localStorage.setItem("state",e.data.data.verify_status);var i={username:e.data.data.username,avatar:e.data.data.avatar,role:e.data.data.role};return localStorage.setItem("userInfo",JSON.stringify(i)),t.loginSuccess("登录成功！"),void(1==a.rememberMe&&localStorage.setItem("username",a.username))}t.requestFailed(e.data.msg)}).catch(function(e){s.loginBtn=!0,console.log(e)})}})},stepCaptchaSuccess:function(){this.loginSuccess()},stepCaptchaCancel:function(){var e=this;this.Logout().then(function(){e.loginBtn=!1,e.stepCaptchaVisible=!1})},loginSuccess:function(e){var t=this;this.$router.push({name:"home"}),setTimeout(function(){t.$notification.success({message:"欢迎",description:e})},1e3)},requestFailed:function(e){console.log(e),this.$notification["error"]({message:"错误",description:e||"请求出现错误，请稍后再试",duration:4})}}}),d=u,g=(a("e4dd"),a("7c3d"),a("2877")),m=Object(g["a"])(d,s,i,!1,null,"7dd25886",null);t["default"]=m.exports},ceca:function(e,t,a){e.exports=a.p+"img/logo.b7dee120.png"},e4dd:function(e,t,a){"use strict";var s=a("aaf6"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-51231d72.e2594595.js.map